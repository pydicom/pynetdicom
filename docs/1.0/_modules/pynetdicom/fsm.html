

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>pynetdicom.fsm &mdash; pynetdicom 1.0.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/pynetdicom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/pynetdicom.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> pynetdicom
          

          
            
            <img src="../../_static/pydicom_flat_black.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../verification_service_class.html">Verification Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../storage_service_class.html">Storage Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../query_retrieve_service_class.html">Query/Retrieve Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../basic_worklist_service_class.html">Basic Worklist Management Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../relevant_patient_service_class.html">Relevant Patient Information Query Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../substance_admin_service_class.html">Substance Administration Query Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../non_patient_service_class.html">Non-Patient Object Storage Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../color_palette_service_class.html">Color Palette Query/Retrieve Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../defined_procedure_service_class.html">Defined Procedure Protocol Query/Retrieve Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hanging_protocol_service_class.html">Hanging Protocol Query/Retrieve Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../implant_template_service_class.html">Implant Template Query/Retrieve Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../display_system_service_class.html">Display System Management Service Class</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">User Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">1.0.0</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">pynetdicom</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
      <li>pynetdicom.fsm</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for pynetdicom.fsm</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">The DUL&#39;s finite state machine representation.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">socket</span>

<span class="kn">from</span> <span class="nn">pynetdicom.pdu</span> <span class="k">import</span> <span class="p">(</span><span class="n">A_ASSOCIATE_RQ</span><span class="p">,</span> <span class="n">A_ASSOCIATE_RJ</span><span class="p">,</span> <span class="n">A_ASSOCIATE_AC</span><span class="p">,</span>
                             <span class="n">P_DATA_TF</span><span class="p">,</span> <span class="n">A_RELEASE_RQ</span><span class="p">,</span> <span class="n">A_RELEASE_RP</span><span class="p">,</span> <span class="n">A_ABORT_RQ</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">pynetdicom.pdu_primitives</span> <span class="k">import</span> <span class="n">A_ABORT</span>

<span class="n">LOGGER</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;pynetdicom.sm&#39;</span><span class="p">)</span>

<span class="c1"># pylint: disable=invalid-name</span>


<div class="viewcode-block" id="StateMachine"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.StateMachine.html#pynetdicom.fsm.StateMachine">[docs]</a><span class="k">class</span> <span class="nc">StateMachine</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Implementation of the DICOM Upper Layer State Machine.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    current_state : str</span>
<span class="sd">        The current state of the state machine, &#39;Sta1&#39; to &#39;Sta13&#39;.</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer service instance for the local AE</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>

<span class="sd">    * DICOM Standard, Part 8, Section 9.2</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="StateMachine.__init__"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.StateMachine.html#pynetdicom.fsm.StateMachine.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dul</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new StateMachine.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ---------</span>
<span class="sd">        dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">            The DICOM Upper Layer Service instance for the local AE.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_state</span> <span class="o">=</span> <span class="s1">&#39;Sta1&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dul</span> <span class="o">=</span> <span class="n">dul</span></div>

<div class="viewcode-block" id="StateMachine.do_action"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.StateMachine.html#pynetdicom.fsm.StateMachine.do_action">[docs]</a>    <span class="k">def</span> <span class="nf">do_action</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Execute the action triggered by `event`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        event : str</span>
<span class="sd">            The event to be processed, &#39;Evt1&#39; to &#39;Evt19&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Check (event + state) is valid</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_state</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">TRANSITION_TABLE</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;DUL State Machine received an invalid event &#39;</span><span class="si">%s</span><span class="s2">&#39; &quot;</span>
                         <span class="s2">&quot;for the current state &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
                         <span class="n">event</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_state</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s2">&quot;DUL State Machine received an invalid event &quot;</span>
                           <span class="s2">&quot;&#39;</span><span class="si">{}</span><span class="s2">&#39; for the current state &#39;</span><span class="si">{}</span><span class="s2">&#39;&quot;</span>
                           <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_state</span><span class="p">))</span>

        <span class="n">action_name</span> <span class="o">=</span> <span class="n">TRANSITION_TABLE</span><span class="p">[(</span><span class="n">event</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_state</span><span class="p">)]</span>

        <span class="c1"># action is the (description, function, state) tuple</span>
        <span class="c1">#   associated with the action_name</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">ACTIONS</span><span class="p">[</span><span class="n">action_name</span><span class="p">]</span>

        <span class="c1"># Attempt to execute the action and move the state machine to its</span>
        <span class="c1">#   next state</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Execute the required action</span>
            <span class="n">next_state</span> <span class="o">=</span> <span class="n">action</span><span class="p">[</span><span class="mi">1</span><span class="p">](</span><span class="bp">self</span><span class="o">.</span><span class="n">dul</span><span class="p">)</span>

            <span class="c1">#print(action_name, self.current_state, event, next_state)</span>

            <span class="c1"># Move the state machine to the next state</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transition</span><span class="p">(</span><span class="n">next_state</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;DUL State Machine received an exception attempting &quot;</span>
                         <span class="s2">&quot;to perform the action &#39;</span><span class="si">%s</span><span class="s2">&#39; while in state &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
                         <span class="n">action_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_state</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dul</span><span class="o">.</span><span class="n">kill_dul</span><span class="p">()</span>
            <span class="k">raise</span></div>

<div class="viewcode-block" id="StateMachine.transition"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.StateMachine.html#pynetdicom.fsm.StateMachine.transition">[docs]</a>    <span class="k">def</span> <span class="nf">transition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Transition the state machine to the next state.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        state : str</span>
<span class="sd">            The state to transition to, &#39;Sta1&#39; to &#39;Sta13&#39;.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        ValueError</span>
<span class="sd">            If `state` is not a valid state.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Validate that state is acceptable</span>
        <span class="k">if</span> <span class="n">state</span> <span class="ow">in</span> <span class="n">STATES</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_state</span> <span class="o">=</span> <span class="n">state</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Invalid state &quot;</span><span class="si">%s</span><span class="s1">&quot; for State Machine&#39;</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Invalid state &quot;</span><span class="si">%s</span><span class="s1">&quot; for State Machine&#39;</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="AE_1"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.AE_1.html#pynetdicom.fsm.AE_1">[docs]</a><span class="k">def</span> <span class="nf">AE_1</span><span class="p">(</span><span class="n">dul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Association establishment action AE-1.</span>

<span class="sd">    From Idle state, local AE issues a connection request to a remote. This</span>
<span class="sd">    is the first step in associating a local AE (requestor) to a remote AE</span>
<span class="sd">    (acceptor).</span>

<span class="sd">    Used when the local AE is acting as an SCU</span>

<span class="sd">    State-event triggers: Sta1 + Evt1</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    1. DICOM Standard 2015b, PS3.8, Table 9-7, &quot;Associate Establishment</span>
<span class="sd">       Related Actions&quot;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer Service instance for the local AE</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        &#39;Sta4&#39;, the next state of the state machine.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Issue TRANSPORT CONNECT request primitive to local transport service</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">scu_socket</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># CalledPresentationAddress is set by the ACSE and</span>
        <span class="c1">#   is an (address, port) tuple</span>
        <span class="n">dul</span><span class="o">.</span><span class="n">scu_socket</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="o">.</span><span class="n">called_presentation_address</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">error</span><span class="p">:</span>
        <span class="c1"># Failed to connect</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Association Request Failed: Failed to establish &quot;</span>
                     <span class="s2">&quot;association&quot;</span><span class="p">)</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Peer aborted Association (or never connected)&quot;</span><span class="p">)</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;TCP Initialisation Error: Connection refused&quot;</span><span class="p">)</span>
        <span class="n">dul</span><span class="o">.</span><span class="n">to_user_queue</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">dul</span><span class="o">.</span><span class="n">scu_socket</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="s1">&#39;Sta1&#39;</span>

    <span class="k">return</span> <span class="s1">&#39;Sta4&#39;</span></div>

<div class="viewcode-block" id="AE_2"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.AE_2.html#pynetdicom.fsm.AE_2">[docs]</a><span class="k">def</span> <span class="nf">AE_2</span><span class="p">(</span><span class="n">dul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Association establishment action AE-2.</span>

<span class="sd">    On receiving connection confirmation, send A-ASSOCIATE-RQ to the peer AE</span>
<span class="sd">    This send a byte stream with the format given by Table 9-11</span>

<span class="sd">    State-event triggers: Sta4 + Evt2</span>

<span class="sd">    Callbacks: ApplicationEntity.on_send_associate_rq(PDU)</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    1. DICOM Standard 2015b, PS3.8, Table 9-7, &quot;Associate Establishment</span>
<span class="sd">       Related Actions&quot;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer Service instance for the local AE</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        &#39;Sta5&#39;, the next state of the state machine.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Send A-ASSOCIATE-RQ PDU</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span> <span class="o">=</span> <span class="n">A_ASSOCIATE_RQ</span><span class="p">()</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">from_primitive</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="p">)</span>

    <span class="c1"># Callback</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">assoc</span><span class="o">.</span><span class="n">acse</span><span class="o">.</span><span class="n">debug_send_associate_rq</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="p">)</span>

    <span class="n">bytestream</span> <span class="o">=</span> <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">scu_socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">bytestream</span><span class="p">)</span>

    <span class="k">return</span> <span class="s1">&#39;Sta5&#39;</span></div>

<div class="viewcode-block" id="AE_3"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.AE_3.html#pynetdicom.fsm.AE_3">[docs]</a><span class="k">def</span> <span class="nf">AE_3</span><span class="p">(</span><span class="n">dul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Association establishment action AE-3.</span>

<span class="sd">    On receiving A-ASSOCIATE-AC, issue acceptance confirmation</span>

<span class="sd">    State-event triggers: Sta5 + Evt3</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    1. DICOM Standard 2015b, PS3.8, Table 9-7, &quot;Associate Establishment</span>
<span class="sd">       Related Actions&quot;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer Service instance for the local AE</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Sta6, the next state of the state machine</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Issue A-ASSOCIATE confirmation (accept) primitive</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">to_user_queue</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="p">)</span>

    <span class="k">return</span> <span class="s1">&#39;Sta6&#39;</span></div>

<div class="viewcode-block" id="AE_4"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.AE_4.html#pynetdicom.fsm.AE_4">[docs]</a><span class="k">def</span> <span class="nf">AE_4</span><span class="p">(</span><span class="n">dul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Association establishment action AE-4.</span>

<span class="sd">    On receiving A-ASSOCIATE-RJ, issue rejection confirmation and close</span>
<span class="sd">    connection</span>

<span class="sd">    State-event triggers: Sta5 + Evt4</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    1. DICOM Standard 2015b, PS3.8, Table 9-7, &quot;Associate Establishment</span>
<span class="sd">       Related Actions&quot;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer Service instance for the local AE</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Sta1, the next state of the state machine</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Issue A-ASSOCIATE confirmation (reject) primitive and close transport</span>
    <span class="c1"># connection</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">to_user_queue</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="p">)</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">scu_socket</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">peer_socket</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">return</span> <span class="s1">&#39;Sta1&#39;</span></div>

<div class="viewcode-block" id="AE_5"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.AE_5.html#pynetdicom.fsm.AE_5">[docs]</a><span class="k">def</span> <span class="nf">AE_5</span><span class="p">(</span><span class="n">dul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Association establishment action AE-5.</span>

<span class="sd">    From Idle state, on receiving a remote connection attempt, respond and</span>
<span class="sd">    start ARTIM. This is the first step in associating a remote AE (requestor)</span>
<span class="sd">    to the local AE (acceptor).</span>

<span class="sd">    State-event triggers: Sta1 + Evt5</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    1. DICOM Standard 2015b, PS3.8, Table 9-7, &quot;Associate Establishment</span>
<span class="sd">       Related Actions&quot;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer Service instance for the local AE</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Sta2, the next state of the state machine</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Issue connection response primitive</span>
    <span class="c1"># not required due to implementation</span>

    <span class="c1"># Start ARTIM timer</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">artim_timer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">return</span> <span class="s1">&#39;Sta2&#39;</span></div>

<div class="viewcode-block" id="AE_6"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.AE_6.html#pynetdicom.fsm.AE_6">[docs]</a><span class="k">def</span> <span class="nf">AE_6</span><span class="p">(</span><span class="n">dul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Association establishment action AE-6.</span>

<span class="sd">    On receiving an A-ASSOCIATE-RQ PDU from the peer then stop the ARTIM timer</span>
<span class="sd">    and then either</span>

<span class="sd">    * issue an A-ASSOCIATE indication primitive if the -RQ is acceptable or</span>
<span class="sd">    * issue an A-ASSOCIATE-RJ PDU to the peer and start the ARTIM timer</span>

<span class="sd">    This is a lower-level DUL Service Provider initiated rejection - for</span>
<span class="sd">    example this could be where the protocol version is checked</span>

<span class="sd">    State-event triggers: Sta2 + Evt6</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    1. DICOM Standard 2015b, PS3.8, Table 9-7, &quot;Associate Establishment</span>
<span class="sd">       Related Actions&quot;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer Service instance for the local AE</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Either Sta3 or Sta13, the next state of the state machine</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Stop ARTIM timer</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">artim_timer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

    <span class="c1"># If A-ASSOCIATE-RQ not acceptable by service dul provider</span>
    <span class="c1">#   Then set reason and send -RJ PDU back to peer</span>
    <span class="k">if</span> <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">protocol_version</span> <span class="o">!=</span> <span class="mh">0x0001</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Receiving Association failed: Unsupported peer protocol &quot;</span>
                     <span class="s2">&quot;version &#39;0x</span><span class="si">%04x</span><span class="s2">&#39; (0x0001 expected)&quot;</span><span class="p">,</span>
                     <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">protocol_version</span><span class="p">)</span>

        <span class="c1"># Send A-ASSOCIATE-RJ PDU and start ARTIM timer</span>
        <span class="c1"># dul.primitive is A_ASSOCIATE</span>
        <span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="mh">0x01</span>
        <span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="o">.</span><span class="n">result_source</span> <span class="o">=</span> <span class="mh">0x02</span>
        <span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="o">.</span><span class="n">diagnostic</span> <span class="o">=</span> <span class="mh">0x02</span>

        <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span> <span class="o">=</span> <span class="n">A_ASSOCIATE_RJ</span><span class="p">()</span>
        <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">from_primitive</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="p">)</span>

        <span class="c1"># Callback</span>
        <span class="n">dul</span><span class="o">.</span><span class="n">assoc</span><span class="o">.</span><span class="n">acse</span><span class="o">.</span><span class="n">debug_send_associate_rj</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="p">)</span>

        <span class="n">dul</span><span class="o">.</span><span class="n">scu_socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>

        <span class="n">dul</span><span class="o">.</span><span class="n">artim_timer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

        <span class="k">return</span> <span class="s1">&#39;Sta13&#39;</span>

    <span class="c1"># If A-ASSOCIATE-RQ acceptable by service dul provider</span>
    <span class="c1">#   issue A-ASSOCIATE indication primitive and move to Sta3</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">to_user_queue</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="p">)</span>

    <span class="k">return</span> <span class="s1">&#39;Sta3&#39;</span></div>

<div class="viewcode-block" id="AE_7"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.AE_7.html#pynetdicom.fsm.AE_7">[docs]</a><span class="k">def</span> <span class="nf">AE_7</span><span class="p">(</span><span class="n">dul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Association establishment action AE-7.</span>

<span class="sd">    On receiving association request acceptance, issue A-ASSOCIATE-AC</span>

<span class="sd">    State-event triggers: Sta3 + Evt7</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    1. DICOM Standard 2015b, PS3.8, Table 9-7, &quot;Associate Establishment</span>
<span class="sd">       Related Actions&quot;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer Service instance for the local AE</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Sta6, the next state of the state machine</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Send A-ASSOCIATE-AC PDU</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span> <span class="o">=</span> <span class="n">A_ASSOCIATE_AC</span><span class="p">()</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">from_primitive</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="p">)</span>

    <span class="c1"># Callback</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">assoc</span><span class="o">.</span><span class="n">acse</span><span class="o">.</span><span class="n">debug_send_associate_ac</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="p">)</span>

    <span class="n">bytestream</span> <span class="o">=</span> <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">scu_socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">bytestream</span><span class="p">)</span>

    <span class="k">return</span> <span class="s1">&#39;Sta6&#39;</span></div>

<div class="viewcode-block" id="AE_8"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.AE_8.html#pynetdicom.fsm.AE_8">[docs]</a><span class="k">def</span> <span class="nf">AE_8</span><span class="p">(</span><span class="n">dul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Association establishment action AE-8.</span>

<span class="sd">    On receiving association request rejection, issue A-ASSOCIATE-RJ</span>

<span class="sd">    State-event triggers: Sta3 + Evt8</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    1. DICOM Standard 2015b, PS3.8, Table 9-7, &quot;Associate Establishment</span>
<span class="sd">       Related Actions&quot;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer Service instance for the local AE</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Sta13, the next state of the state machine</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Send A-ASSOCIATE-RJ PDU and start ARTIM timer</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span> <span class="o">=</span> <span class="n">A_ASSOCIATE_RJ</span><span class="p">()</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">from_primitive</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="p">)</span>

    <span class="c1"># Callback</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">assoc</span><span class="o">.</span><span class="n">acse</span><span class="o">.</span><span class="n">debug_send_associate_rj</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="p">)</span>

    <span class="n">dul</span><span class="o">.</span><span class="n">scu_socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>

    <span class="n">dul</span><span class="o">.</span><span class="n">artim_timer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">return</span> <span class="s1">&#39;Sta13&#39;</span></div>


<div class="viewcode-block" id="DT_1"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.DT_1.html#pynetdicom.fsm.DT_1">[docs]</a><span class="k">def</span> <span class="nf">DT_1</span><span class="p">(</span><span class="n">dul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Data transfer DT-1.</span>

<span class="sd">    On receiving a P-DATA request, send P-DATA-TF</span>

<span class="sd">    State-event triggers: Sta6 + Evt9</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    1. DICOM Standard 2015b, PS3.8, Table 9-7, &quot;Associate Establishment</span>
<span class="sd">       Related Actions&quot;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer Service instance for the local AE</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Sta6, the next state of the state machine</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Send P-DATA-TF PDU</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span> <span class="o">=</span> <span class="n">P_DATA_TF</span><span class="p">()</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">from_primitive</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="p">)</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">primitive</span> <span class="o">=</span> <span class="kc">None</span> <span class="c1"># Why this?</span>

    <span class="c1"># Callback</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">assoc</span><span class="o">.</span><span class="n">acse</span><span class="o">.</span><span class="n">debug_send_data_tf</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="p">)</span>

    <span class="n">bytestream</span> <span class="o">=</span> <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">scu_socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">bytestream</span><span class="p">)</span>

    <span class="k">return</span> <span class="s1">&#39;Sta6&#39;</span></div>

<div class="viewcode-block" id="DT_2"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.DT_2.html#pynetdicom.fsm.DT_2">[docs]</a><span class="k">def</span> <span class="nf">DT_2</span><span class="p">(</span><span class="n">dul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Data transfer DT-2.</span>

<span class="sd">    On receiving a P-DATA-TF request, send P-DATA indication</span>

<span class="sd">    State-event triggers: Sta6 + Evt10</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    1. DICOM Standard 2015b, PS3.8, Table 9-7, &quot;Associate Establishment</span>
<span class="sd">       Related Actions&quot;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer Service instance for the local AE</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Sta6, the next state of the state machine</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Send P-DATA indication primitive to DUL</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">to_user_queue</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="p">)</span>

    <span class="k">return</span> <span class="s1">&#39;Sta6&#39;</span></div>


<div class="viewcode-block" id="AR_1"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.AR_1.html#pynetdicom.fsm.AR_1">[docs]</a><span class="k">def</span> <span class="nf">AR_1</span><span class="p">(</span><span class="n">dul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Association release AR-1.</span>

<span class="sd">    Send Association release request</span>

<span class="sd">    State-event triggers: Sta6 + Evt11</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    1. DICOM Standard 2015b, PS3.8, Table 9-7, &quot;Associate Establishment</span>
<span class="sd">       Related Actions&quot;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer Service instance for the local AE</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Sta7, the next state of the state machine</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Send A-RELEASE-RQ PDU</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span> <span class="o">=</span> <span class="n">A_RELEASE_RQ</span><span class="p">()</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">from_primitive</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="p">)</span>

    <span class="c1"># Callback</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">assoc</span><span class="o">.</span><span class="n">acse</span><span class="o">.</span><span class="n">debug_send_release_rq</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="p">)</span>

    <span class="n">bytestream</span> <span class="o">=</span> <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">scu_socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">bytestream</span><span class="p">)</span>

    <span class="k">return</span> <span class="s1">&#39;Sta7&#39;</span></div>

<div class="viewcode-block" id="AR_2"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.AR_2.html#pynetdicom.fsm.AR_2">[docs]</a><span class="k">def</span> <span class="nf">AR_2</span><span class="p">(</span><span class="n">dul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Association release AR-2.</span>

<span class="sd">    On receiving an association release request, send release indication</span>

<span class="sd">    State-event triggers: Sta6 + Evt12</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    1. DICOM Standard 2015b, PS3.8, Table 9-7, &quot;Associate Establishment</span>
<span class="sd">       Related Actions&quot;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer Service instance for the local AE</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Sta8, the next state of the state machine</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Send A-RELEASE indication primitive</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">to_user_queue</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="p">)</span>

    <span class="k">return</span> <span class="s1">&#39;Sta8&#39;</span></div>

<div class="viewcode-block" id="AR_3"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.AR_3.html#pynetdicom.fsm.AR_3">[docs]</a><span class="k">def</span> <span class="nf">AR_3</span><span class="p">(</span><span class="n">dul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Association release AR-3.</span>

<span class="sd">    On receiving an association release response, send release confirmation,</span>
<span class="sd">    close connection and go back to Idle state</span>

<span class="sd">    State-event triggers: Sta7 + Evt13, Sta11 + Evt13</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    1. DICOM Standard 2015b, PS3.8, Table 9-7, &quot;Associate Establishment</span>
<span class="sd">       Related Actions&quot;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer Service instance for the local AE</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Sta1, the next state of the state machine</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Issue A-RELEASE confirmation primitive and close transport connection</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">to_user_queue</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="p">)</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">scu_socket</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">peer_socket</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">return</span> <span class="s1">&#39;Sta1&#39;</span></div>

<div class="viewcode-block" id="AR_4"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.AR_4.html#pynetdicom.fsm.AR_4">[docs]</a><span class="k">def</span> <span class="nf">AR_4</span><span class="p">(</span><span class="n">dul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Association release AR-4.</span>

<span class="sd">    On receiving an association release response, send release response</span>

<span class="sd">    State-event triggers: Sta8 + Evt14, Sta12 + Evt14</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    1. DICOM Standard 2015b, PS3.8, Table 9-7, &quot;Associate Establishment</span>
<span class="sd">       Related Actions&quot;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer Service instance for the local AE</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Sta13, the next state of the state machine</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Issue A-RELEASE-RP PDU and start ARTIM timer</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span> <span class="o">=</span> <span class="n">A_RELEASE_RP</span><span class="p">()</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">from_primitive</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="p">)</span>

    <span class="c1"># Callback</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">assoc</span><span class="o">.</span><span class="n">acse</span><span class="o">.</span><span class="n">debug_send_release_rp</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="p">)</span>

    <span class="n">dul</span><span class="o">.</span><span class="n">scu_socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">artim_timer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">return</span> <span class="s1">&#39;Sta13&#39;</span></div>

<div class="viewcode-block" id="AR_5"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.AR_5.html#pynetdicom.fsm.AR_5">[docs]</a><span class="k">def</span> <span class="nf">AR_5</span><span class="p">(</span><span class="n">dul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Association release AR-5.</span>

<span class="sd">    On receiving transport connection closed, stop the ARTIM timer and go back</span>
<span class="sd">    to Idle state</span>

<span class="sd">    State-event triggers: Sta13 + Evt17</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    1. DICOM Standard 2015b, PS3.8, Table 9-7, &quot;Associate Establishment</span>
<span class="sd">       Related Actions&quot;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer Service instance for the local AE</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Sta1, the next state of the state machine</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Stop ARTIM timer</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">artim_timer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

    <span class="k">return</span> <span class="s1">&#39;Sta1&#39;</span></div>

<div class="viewcode-block" id="AR_6"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.AR_6.html#pynetdicom.fsm.AR_6">[docs]</a><span class="k">def</span> <span class="nf">AR_6</span><span class="p">(</span><span class="n">dul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Association release AR-6.</span>

<span class="sd">    On receiving P-DATA-TF during attempted association release request</span>
<span class="sd">    send P-DATA indication</span>

<span class="sd">    State-event triggers: Sta7 + Evt10</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    1. DICOM Standard 2015b, PS3.8, Table 9-7, &quot;Associate Establishment</span>
<span class="sd">       Related Actions&quot;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer Service instance for the local AE</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Sta7, the next state of the state machine</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Issue P-DATA indication</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">to_user_queue</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="p">)</span>

    <span class="k">return</span> <span class="s1">&#39;Sta7&#39;</span></div>

<div class="viewcode-block" id="AR_7"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.AR_7.html#pynetdicom.fsm.AR_7">[docs]</a><span class="k">def</span> <span class="nf">AR_7</span><span class="p">(</span><span class="n">dul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Association release AR-7.</span>

<span class="sd">    On receiving P-DATA request during attempted association release request</span>
<span class="sd">    send P-DATA-TF</span>

<span class="sd">    State-event triggers: Sta8 + Evt9</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    1. DICOM Standard 2015b, PS3.8, Table 9-7, &quot;Associate Establishment</span>
<span class="sd">       Related Actions&quot;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer Service instance for the local AE</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Sta8, the next state of the state machine</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Issue P-DATA-TF PDU</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span> <span class="o">=</span> <span class="n">P_DATA_TF</span><span class="p">()</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">from_primitive</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="p">)</span>

    <span class="c1"># Callback</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">assoc</span><span class="o">.</span><span class="n">acse</span><span class="o">.</span><span class="n">debug_send_data_tf</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="p">)</span>

    <span class="n">bytestream</span> <span class="o">=</span> <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">scu_socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">bytestream</span><span class="p">)</span>

    <span class="k">return</span> <span class="s1">&#39;Sta8&#39;</span></div>

<div class="viewcode-block" id="AR_8"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.AR_8.html#pynetdicom.fsm.AR_8">[docs]</a><span class="k">def</span> <span class="nf">AR_8</span><span class="p">(</span><span class="n">dul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Association release AR-8.</span>

<span class="sd">    On receiving association release request while local is requesting release</span>
<span class="sd">    then issue release collision indication</span>

<span class="sd">    State-event triggers: Sta7 + Evt12</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    1. DICOM Standard 2015b, PS3.8, Table 9-7, &quot;Associate Establishment</span>
<span class="sd">       Related Actions&quot;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer Service instance for the local AE</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Either Sta9 or Sta10, the next state of the state machine</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Issue A-RELEASE indication (release collision)</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">to_user_queue</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">dul</span><span class="o">.</span><span class="n">requestor</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;Sta9&#39;</span>

    <span class="k">return</span> <span class="s1">&#39;Sta10&#39;</span></div>

<div class="viewcode-block" id="AR_9"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.AR_9.html#pynetdicom.fsm.AR_9">[docs]</a><span class="k">def</span> <span class="nf">AR_9</span><span class="p">(</span><span class="n">dul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Association release AR-9.</span>

<span class="sd">    On receiving A-RELEASE primitive, send release response</span>

<span class="sd">    State-event triggers: Sta9 + Evt14</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    1. DICOM Standard 2015b, PS3.8, Table 9-7, &quot;Associate Establishment</span>
<span class="sd">       Related Actions&quot;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer Service instance for the local AE</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Sta11, the next state of the state machine</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Send A-RELEASE-RP PDU</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span> <span class="o">=</span> <span class="n">A_RELEASE_RP</span><span class="p">()</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">from_primitive</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="p">)</span>

    <span class="c1"># Callback</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">assoc</span><span class="o">.</span><span class="n">acse</span><span class="o">.</span><span class="n">debug_send_release_rp</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="p">)</span>

    <span class="n">dul</span><span class="o">.</span><span class="n">scu_socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>

    <span class="k">return</span> <span class="s1">&#39;Sta11&#39;</span></div>

<div class="viewcode-block" id="AR_10"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.AR_10.html#pynetdicom.fsm.AR_10">[docs]</a><span class="k">def</span> <span class="nf">AR_10</span><span class="p">(</span><span class="n">dul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Association release AR-10.</span>

<span class="sd">    On receiving A-RELEASE-RP, issue release confirmation</span>

<span class="sd">    State-event triggers: Sta10 + Evt13</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    1. DICOM Standard 2015b, PS3.8, Table 9-7, &quot;Associate Establishment</span>
<span class="sd">       Related Actions&quot;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer Service instance for the local AE</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Sta12, the next state of the state machine</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Issue A-RELEASE confirmation primitive</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">to_user_queue</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="p">)</span>

    <span class="k">return</span> <span class="s1">&#39;Sta12&#39;</span></div>


<div class="viewcode-block" id="AA_1"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.AA_1.html#pynetdicom.fsm.AA_1">[docs]</a><span class="k">def</span> <span class="nf">AA_1</span><span class="p">(</span><span class="n">dul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Association abort AA-1.</span>

<span class="sd">    If on sending A-ASSOCIATE-RQ we receive an invalid reply, or an abort</span>
<span class="sd">    request then abort</span>

<span class="sd">    State-event triggers: Sta2 + Evt3/Evt4/Evt10/Evt12/Evt13/Evt19,</span>
<span class="sd">    Sta3/Sta5/Sta6/Sta7/Sta8/Sta9/Sta10/Sta11/Sta12 + Evt15</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    1. DICOM Standard 2015b, PS3.8, Table 9-7, &quot;Associate Establishment</span>
<span class="sd">       Related Actions&quot;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer Service instance for the local AE</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Sta13, the next state of the state machine</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Send A-ABORT PDU (service-user source) and start (or restart</span>
    <span class="c1"># if already started) ARTIM timer.</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span> <span class="o">=</span> <span class="n">A_ABORT_RQ</span><span class="p">()</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="mh">0x00</span>

    <span class="c1"># The reason for the abort should really be roughly defined by the</span>
    <span class="c1">#   current state of the State Machine</span>
    <span class="k">if</span> <span class="n">dul</span><span class="o">.</span><span class="n">state_machine</span><span class="o">.</span><span class="n">current_state</span> <span class="o">==</span> <span class="s1">&#39;Sta2&#39;</span><span class="p">:</span>
        <span class="c1"># Unexpected PDU</span>
        <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">reason_diagnostic</span> <span class="o">=</span> <span class="mh">0x02</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Reason not specified</span>
        <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">reason_diagnostic</span> <span class="o">=</span> <span class="mh">0x00</span>

    <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">from_primitive</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="p">)</span>

    <span class="c1"># Callback</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">assoc</span><span class="o">.</span><span class="n">acse</span><span class="o">.</span><span class="n">debug_send_abort</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="p">)</span>

    <span class="n">dul</span><span class="o">.</span><span class="n">scu_socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">artim_timer</span><span class="o">.</span><span class="n">restart</span><span class="p">()</span>

    <span class="k">return</span> <span class="s1">&#39;Sta13&#39;</span></div>

<div class="viewcode-block" id="AA_2"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.AA_2.html#pynetdicom.fsm.AA_2">[docs]</a><span class="k">def</span> <span class="nf">AA_2</span><span class="p">(</span><span class="n">dul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Association abort AA-2.</span>

<span class="sd">    On receiving an A-ABORT or if the ARTIM timer expires, close connection and</span>
<span class="sd">    return to Idle</span>

<span class="sd">    State-event triggers: Sta2 + Evt16/Evt18, Sta4 + Evt15, Sta13 + Evt16/Evt18</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    1. DICOM Standard 2015b, PS3.8, Table 9-7, &quot;Associate Establishment</span>
<span class="sd">       Related Actions&quot;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer Service instance for the local AE</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Sta1, the next state of the state machine</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Stop ARTIM timer if running. Close transport connection.</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">artim_timer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">scu_socket</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">peer_socket</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">return</span> <span class="s1">&#39;Sta1&#39;</span></div>

<div class="viewcode-block" id="AA_3"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.AA_3.html#pynetdicom.fsm.AA_3">[docs]</a><span class="k">def</span> <span class="nf">AA_3</span><span class="p">(</span><span class="n">dul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Association abort AA-3.</span>

<span class="sd">    On receiving A-ABORT, issue abort indication, close connection and</span>
<span class="sd">    return to Idle</span>

<span class="sd">    State-event triggers: Sta3/Sta5/Sta6/Sta7/Sta8/Sta9/Sta10/Sta11/Sta12 +</span>
<span class="sd">    Evt16</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    1. DICOM Standard 2015b, PS3.8, Table 9-7, &quot;Associate Establishment</span>
<span class="sd">       Related Actions&quot;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer Service instance for the local AE</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Sta1, the next state of the state machine</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># If (service-user initiated abort):</span>
    <span class="c1">#   - Issue A-ABORT indication and close transport connection.</span>
    <span class="c1"># Otherwise (service-dul initiated abort):</span>
    <span class="c1">#   - Issue A-P-ABORT indication and close transport connection.</span>
    <span class="c1"># This action is triggered by the reception of an A-ABORT PDU</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">to_user_queue</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="p">)</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">scu_socket</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">peer_socket</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">kill_dul</span><span class="p">()</span>

    <span class="k">return</span> <span class="s1">&#39;Sta1&#39;</span></div>

<div class="viewcode-block" id="AA_4"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.AA_4.html#pynetdicom.fsm.AA_4">[docs]</a><span class="k">def</span> <span class="nf">AA_4</span><span class="p">(</span><span class="n">dul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Association abort AA-4.</span>

<span class="sd">    If connection closed, issue A-P-ABORT and return to Idle</span>

<span class="sd">    State-event triggers: Sta3/Sta4/Sta5/Sta6/Sta7/Sta8/Sta9/Sta10/Sta11/Sta12</span>
<span class="sd">    + Evt17</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    1. DICOM Standard 2015b, PS3.8, Table 9-7, &quot;Associate Establishment</span>
<span class="sd">       Related Actions&quot;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer Service instance for the local AE</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Sta1, the next state of the state machine</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Issue A-P-ABORT indication primitive.</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">primitive</span> <span class="o">=</span> <span class="n">A_ABORT</span><span class="p">()</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">to_user_queue</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="p">)</span>

    <span class="k">return</span> <span class="s1">&#39;Sta1&#39;</span></div>

<div class="viewcode-block" id="AA_5"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.AA_5.html#pynetdicom.fsm.AA_5">[docs]</a><span class="k">def</span> <span class="nf">AA_5</span><span class="p">(</span><span class="n">dul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Association abort AA-5.</span>

<span class="sd">    If connection closed during association request, stop ARTIM timer and return</span>
<span class="sd">    to Idle</span>

<span class="sd">    State-event triggers: Sta2 + Evt17</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    1. DICOM Standard 2015b, PS3.8, Table 9-7, &quot;Associate Establishment</span>
<span class="sd">       Related Actions&quot;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer Service instance for the local AE</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Sta1, the next state of the state machine</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Stop ARTIM timer.</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">artim_timer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

    <span class="k">return</span> <span class="s1">&#39;Sta1&#39;</span></div>

<div class="viewcode-block" id="AA_6"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.AA_6.html#pynetdicom.fsm.AA_6">[docs]</a><span class="k">def</span> <span class="nf">AA_6</span><span class="p">(</span><span class="n">dul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Association abort AA-6.</span>

<span class="sd">    If receive a PDU while waiting for connection to close, ignore it</span>

<span class="sd">    State-event triggers: Sta13 + Evt3/Evt4/Evt10/Evt12/Evt13</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    1. DICOM Standard 2015b, PS3.8, Table 9-7, &quot;Associate Establishment</span>
<span class="sd">       Related Actions&quot;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer Service instance for the local AE</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Sta13, the next state of the state machine</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Ignore PDU</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">primitive</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">return</span> <span class="s1">&#39;Sta13&#39;</span></div>

<div class="viewcode-block" id="AA_7"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.AA_7.html#pynetdicom.fsm.AA_7">[docs]</a><span class="k">def</span> <span class="nf">AA_7</span><span class="p">(</span><span class="n">dul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Association abort AA-7.</span>

<span class="sd">    If receive a association request or invalid PDU while waiting for connection</span>
<span class="sd">    to close, issue A-ABORT</span>

<span class="sd">    State-event triggers: Sta13 + Evt6/Evt19</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    1. DICOM Standard 2015b, PS3.8, Table 9-7, &quot;Associate Establishment</span>
<span class="sd">       Related Actions&quot;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer Service instance for the local AE</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Sta13, the next state of the state machine</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Send A-ABORT PDU.</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span> <span class="o">=</span> <span class="n">A_ABORT_RQ</span><span class="p">()</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">from_primitive</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="p">)</span>

    <span class="c1"># Callback</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">assoc</span><span class="o">.</span><span class="n">acse</span><span class="o">.</span><span class="n">debug_send_abort</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="p">)</span>

    <span class="n">dul</span><span class="o">.</span><span class="n">scu_socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>

    <span class="k">return</span> <span class="s1">&#39;Sta13&#39;</span></div>

<div class="viewcode-block" id="AA_8"><a class="viewcode-back" href="../../reference/generated/pynetdicom.fsm.AA_8.html#pynetdicom.fsm.AA_8">[docs]</a><span class="k">def</span> <span class="nf">AA_8</span><span class="p">(</span><span class="n">dul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Association abort AA-8.</span>

<span class="sd">    If receive invalid event, send A-ABORT, issue A-P-ABORT indication and start</span>
<span class="sd">    ARTIM timer</span>

<span class="sd">    State-event triggers: Evt3 + Sta3/6/7/8/9/10/11/12,</span>
<span class="sd">    Evt4 + Sta3/5/6/7/8/9/10/11/12, Evt6 + Sta3/5/6/7/8/9/10/11/12,</span>
<span class="sd">    Evt10 + Sta3/5/8/9/10/11/12, Evt12 + Sta3/5/8/9/10/11/12,</span>
<span class="sd">    Evt13 + Sta3/5/6/8/9/12, Evt19 + Sta3/5/6/7/8/9/10/11/12</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    1. DICOM Standard 2015b, PS3.8, Table 9-7, &quot;Associate Establishment</span>
<span class="sd">       Related Actions&quot;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dul : pynetdicom.dul.DULServiceProvider</span>
<span class="sd">        The DICOM Upper Layer Service instance for the local AE</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Sta13, the next state of the state machine</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Send A-ABORT PDU (service-dul source), issue A-P-ABORT</span>
    <span class="c1"># indication, and start ARTIM timer.</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span> <span class="o">=</span> <span class="n">A_ABORT_RQ</span><span class="p">()</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="mh">0x02</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">reason_diagnostic</span> <span class="o">=</span> <span class="mh">0x00</span>

    <span class="n">dul</span><span class="o">.</span><span class="n">primitive</span> <span class="o">=</span> <span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">to_primitive</span><span class="p">()</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="o">.</span><span class="n">abort_source</span> <span class="o">=</span> <span class="mh">0x02</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="mh">0x01</span>
    <span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="o">.</span><span class="n">diagnostic</span> <span class="o">=</span> <span class="mh">0x01</span>

    <span class="k">if</span> <span class="n">dul</span><span class="o">.</span><span class="n">scu_socket</span><span class="p">:</span>
        <span class="c1"># Callback</span>
        <span class="n">dul</span><span class="o">.</span><span class="n">assoc</span><span class="o">.</span><span class="n">acse</span><span class="o">.</span><span class="n">debug_send_abort</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Encode and send A-ABORT to peer</span>
            <span class="n">dul</span><span class="o">.</span><span class="n">scu_socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
        <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">error</span><span class="p">:</span>
            <span class="n">dul</span><span class="o">.</span><span class="n">scu_socket</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">ConnectionResetError</span><span class="p">:</span>
            <span class="n">dul</span><span class="o">.</span><span class="n">scu_socket</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="c1"># Issue A-P-ABORT to user</span>
        <span class="n">dul</span><span class="o">.</span><span class="n">to_user_queue</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">dul</span><span class="o">.</span><span class="n">primitive</span><span class="p">)</span>
        <span class="n">dul</span><span class="o">.</span><span class="n">artim_timer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">return</span> <span class="s1">&#39;Sta13&#39;</span></div>


<span class="c1"># Finite State Machine</span>
<span class="c1"># Machine State Defintions, PS3.8 Tables 9-1, 9-2, 9-3, 9-4, 9-5</span>
<span class="c1"># pylint: disable=line-too-long</span>
<span class="n">STATES</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Sta1&#39;</span><span class="p">:</span> <span class="s1">&#39;Idle&#39;</span><span class="p">,</span>
          <span class="c1"># Association establishment</span>
          <span class="s1">&#39;Sta2&#39;</span><span class="p">:</span> <span class="s1">&#39;Transport connection open (Awaiting A-ASSOCIATE-RQ PDU)&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Sta3&#39;</span><span class="p">:</span> <span class="s1">&#39;Awaiting local A-ASSOCIATE response primitive (from local user)&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Sta4&#39;</span><span class="p">:</span> <span class="s1">&#39;Awaiting transport connection opening to complete (from local transport service&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Sta5&#39;</span><span class="p">:</span> <span class="s1">&#39;Awaiting A-ASSOCIATE-AC or A-ASSOCIATE-RJ PDU&#39;</span><span class="p">,</span>
          <span class="c1"># Data transfer</span>
          <span class="s1">&#39;Sta6&#39;</span><span class="p">:</span> <span class="s1">&#39;Association established and ready for data transfer&#39;</span><span class="p">,</span>
          <span class="c1"># Association release</span>
          <span class="s1">&#39;Sta7&#39;</span><span class="p">:</span> <span class="s1">&#39;Awaiting A-RELEASE-RP PDU&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Sta8&#39;</span><span class="p">:</span> <span class="s1">&#39;Awaiting local A-RELEASE response primitive (from local user)&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Sta9&#39;</span><span class="p">:</span> <span class="s1">&#39;Release collision requestor side; awaiting A-RELEASE response (from local user)&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Sta10&#39;</span><span class="p">:</span> <span class="s1">&#39;Release collision acceptor side; awaiting A-RELEASE-RP PDU&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Sta11&#39;</span><span class="p">:</span> <span class="s1">&#39;Release collision requestor side; awaiting A-RELEASE-RP PDU&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Sta12&#39;</span><span class="p">:</span> <span class="s1">&#39;Release collision acceptor side; awaiting A-RELEASE response primitive (from local user)&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Sta13&#39;</span><span class="p">:</span> <span class="s1">&#39;Awaiting Transport Connection Close Indication (Association no longer exists)&#39;</span><span class="p">}</span>

<span class="c1"># State Machine Action Definitions, PS3.8 Tables 9-6, 9-7, 9-8, 9-9</span>
<span class="n">ACTIONS</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;AE-1&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Issue TRANSPORT CONNECT request primitive to local &#39;</span>
                    <span class="s1">&#39;transport service&#39;</span><span class="p">,</span> <span class="n">AE_1</span><span class="p">,</span> <span class="s1">&#39;Sta4&#39;</span><span class="p">),</span>
           <span class="s1">&#39;AE-2&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Send A-ASSOCIATE-RQ-PDU&#39;</span><span class="p">,</span> <span class="n">AE_2</span><span class="p">,</span> <span class="s1">&#39;Sta5&#39;</span><span class="p">),</span>
           <span class="s1">&#39;AE-3&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Issue A-ASSOCIATE confirmation (accept) primitive&#39;</span><span class="p">,</span>
                    <span class="n">AE_3</span><span class="p">,</span> <span class="s1">&#39;Sta6&#39;</span><span class="p">),</span>
           <span class="s1">&#39;AE-4&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Issue A-ASSOCIATE confirmation (reject) primitive and &#39;</span>
                    <span class="s1">&#39;close transport connection&#39;</span><span class="p">,</span> <span class="n">AE_4</span><span class="p">,</span> <span class="s1">&#39;Sta1&#39;</span><span class="p">),</span>
           <span class="s1">&#39;AE-5&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Issue Transport connection response primitive; start &#39;</span>
                    <span class="s1">&#39;ARTIM timer&#39;</span><span class="p">,</span> <span class="n">AE_5</span><span class="p">,</span> <span class="s1">&#39;Sta2&#39;</span><span class="p">),</span>
           <span class="s1">&#39;AE-6&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Stop ARTIM timer and if A-ASSOCIATE-RQ acceptable by &#39;</span>
                    <span class="s1">&#39;service-dul: issue A-ASSOCIATE indication primitive &#39;</span>
                    <span class="s1">&#39;otherwise issue A-ASSOCIATE-RJ-PDU and start ARTIM timer&#39;</span><span class="p">,</span>
                    <span class="n">AE_6</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;Sta3&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta13&#39;</span><span class="p">)),</span>
           <span class="s1">&#39;AE-7&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Send A-ASSOCIATE-AC PDU&#39;</span><span class="p">,</span> <span class="n">AE_7</span><span class="p">,</span> <span class="s1">&#39;Sta6&#39;</span><span class="p">),</span>
           <span class="s1">&#39;AE-8&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Send A-ASSOCIATE-RJ PDU and start ARTIM timer&#39;</span><span class="p">,</span>
                    <span class="n">AE_8</span><span class="p">,</span> <span class="s1">&#39;Sta13&#39;</span><span class="p">),</span>
           <span class="c1"># Data transfer related actions</span>
           <span class="s1">&#39;DT-1&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Send P-DATA-TF PDU&#39;</span><span class="p">,</span> <span class="n">DT_1</span><span class="p">,</span> <span class="s1">&#39;Sta6&#39;</span><span class="p">),</span>
           <span class="s1">&#39;DT-2&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Send P-DATA indication primitive&#39;</span><span class="p">,</span> <span class="n">DT_2</span><span class="p">,</span> <span class="s1">&#39;Sta6&#39;</span><span class="p">),</span>
           <span class="c1"># Assocation Release related actions</span>
           <span class="s1">&#39;AR-1&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Send A-RELEASE-RQ PDU&#39;</span><span class="p">,</span> <span class="n">AR_1</span><span class="p">,</span> <span class="s1">&#39;Sta7&#39;</span><span class="p">),</span>
           <span class="s1">&#39;AR-2&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Issue A-RELEASE indication primitive&#39;</span><span class="p">,</span> <span class="n">AR_2</span><span class="p">,</span> <span class="s1">&#39;Sta8&#39;</span><span class="p">),</span>
           <span class="s1">&#39;AR-3&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Issue A-RELEASE confirmation primitive and close &#39;</span>
                    <span class="s1">&#39;transport connection&#39;</span><span class="p">,</span> <span class="n">AR_3</span><span class="p">,</span> <span class="s1">&#39;Sta1&#39;</span><span class="p">),</span>
           <span class="s1">&#39;AR-4&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Issue A-RELEASE-RP PDU and start ARTIM timer&#39;</span><span class="p">,</span>
                    <span class="n">AR_4</span><span class="p">,</span> <span class="s1">&#39;Sta13&#39;</span><span class="p">),</span>
           <span class="s1">&#39;AR-5&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Stop ARTIM timer&#39;</span><span class="p">,</span> <span class="n">AR_5</span><span class="p">,</span> <span class="s1">&#39;Sta1&#39;</span><span class="p">),</span>
           <span class="s1">&#39;AR-6&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Issue P-DATA indication&#39;</span><span class="p">,</span> <span class="n">AR_6</span><span class="p">,</span> <span class="s1">&#39;Sta7&#39;</span><span class="p">),</span>
           <span class="s1">&#39;AR-7&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Issue P-DATA-TF PDU&#39;</span><span class="p">,</span> <span class="n">AR_7</span><span class="p">,</span> <span class="s1">&#39;Sta8&#39;</span><span class="p">),</span>
           <span class="s1">&#39;AR-8&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Issue A-RELEASE indication (release collision): if &#39;</span>
                    <span class="s1">&#39;association-requestor, next state is Sta9, if not next &#39;</span>
                    <span class="s1">&#39;state is Sta10&#39;</span><span class="p">,</span> <span class="n">AR_8</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;Sta9&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta10&#39;</span><span class="p">)),</span>
           <span class="s1">&#39;AR-9&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Send A-RELEASE-RP PDU&#39;</span><span class="p">,</span> <span class="n">AR_9</span><span class="p">,</span> <span class="s1">&#39;Sta11&#39;</span><span class="p">),</span>
           <span class="s1">&#39;AR-10&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Issue A-RELEASE confimation primitive&#39;</span><span class="p">,</span> <span class="n">AR_10</span><span class="p">,</span> <span class="s1">&#39;Sta12&#39;</span><span class="p">),</span>
           <span class="c1"># Association abort related actions</span>
           <span class="s1">&#39;AA-1&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Send A-ABORT PDU (service-user source) and start (or &#39;</span>
                    <span class="s1">&#39;restart if already started) ARTIM timer&#39;</span><span class="p">,</span> <span class="n">AA_1</span><span class="p">,</span> <span class="s1">&#39;Sta13&#39;</span><span class="p">),</span>
           <span class="s1">&#39;AA-2&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Stop ARTIM timer if running. Close transport connection&#39;</span><span class="p">,</span>
                    <span class="n">AA_2</span><span class="p">,</span> <span class="s1">&#39;Sta1&#39;</span><span class="p">),</span>
           <span class="s1">&#39;AA-3&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;If (service-user initiated abort): issue A-ABORT &#39;</span>
                    <span class="s1">&#39;indication and close transport connection, otherwise &#39;</span>
                    <span class="s1">&#39;(service-dul initiated abort): issue A-P-ABORT indication &#39;</span>
                    <span class="s1">&#39;and close transport connection&#39;</span><span class="p">,</span> <span class="n">AA_3</span><span class="p">,</span> <span class="s1">&#39;Sta1&#39;</span><span class="p">),</span>
           <span class="s1">&#39;AA-4&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Issue A-P-ABORT indication primitive&#39;</span><span class="p">,</span> <span class="n">AA_4</span><span class="p">,</span> <span class="s1">&#39;Sta1&#39;</span><span class="p">),</span>
           <span class="s1">&#39;AA-5&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Stop ARTIM timer&#39;</span><span class="p">,</span> <span class="n">AA_5</span><span class="p">,</span> <span class="s1">&#39;Sta1&#39;</span><span class="p">),</span>
           <span class="s1">&#39;AA-6&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Ignore PDU&#39;</span><span class="p">,</span> <span class="n">AA_6</span><span class="p">,</span> <span class="s1">&#39;Sta13&#39;</span><span class="p">),</span>
           <span class="s1">&#39;AA-7&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Send A-ABORT PDU&#39;</span><span class="p">,</span> <span class="n">AA_7</span><span class="p">,</span> <span class="s1">&#39;Sta13&#39;</span><span class="p">),</span>
           <span class="s1">&#39;AA-8&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Send A-ABORT PDU (service-dul source), issue an A-P-ABORT &#39;</span>
                    <span class="s1">&#39;indication and start ARTIM timer&#39;</span><span class="p">,</span> <span class="n">AA_8</span><span class="p">,</span> <span class="s1">&#39;Sta13&#39;</span><span class="p">)}</span>

<span class="c1"># State Machine Event Definitions, PS3.8 Table 9-10</span>
<span class="n">EVENTS</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Evt1&#39;</span><span class="p">:</span> <span class="s2">&quot;A-ASSOCIATE request (local user)&quot;</span><span class="p">,</span>
          <span class="s1">&#39;Evt2&#39;</span><span class="p">:</span> <span class="s2">&quot;Transport connect confirmation (local transport service)&quot;</span><span class="p">,</span>
          <span class="s1">&#39;Evt3&#39;</span><span class="p">:</span> <span class="s2">&quot;A-ASSOCIATE-AC PDU (received on transport connection)&quot;</span><span class="p">,</span>
          <span class="s1">&#39;Evt4&#39;</span><span class="p">:</span> <span class="s2">&quot;A-ASSOCIATE-RJ PDU (received on transport connection)&quot;</span><span class="p">,</span>
          <span class="s1">&#39;Evt5&#39;</span><span class="p">:</span> <span class="s2">&quot;Transport connection indication (local transport service)&quot;</span><span class="p">,</span>
          <span class="s1">&#39;Evt6&#39;</span><span class="p">:</span> <span class="s2">&quot;A-ASSOCIATE-RQ PDU (on tranport connection)&quot;</span><span class="p">,</span>
          <span class="s1">&#39;Evt7&#39;</span><span class="p">:</span> <span class="s2">&quot;A-ASSOCIATE response primitive (accept)&quot;</span><span class="p">,</span>
          <span class="s1">&#39;Evt8&#39;</span><span class="p">:</span> <span class="s2">&quot;A-ASSOCIATE response primitive (reject)&quot;</span><span class="p">,</span>
          <span class="s1">&#39;Evt9&#39;</span><span class="p">:</span> <span class="s2">&quot;P-DATA request primitive&quot;</span><span class="p">,</span>
          <span class="s1">&#39;Evt10&#39;</span><span class="p">:</span> <span class="s2">&quot;P-DATA-TF PDU (on transport connection)&quot;</span><span class="p">,</span>
          <span class="s1">&#39;Evt11&#39;</span><span class="p">:</span> <span class="s2">&quot;A-RELEASE request primitive&quot;</span><span class="p">,</span>
          <span class="s1">&#39;Evt12&#39;</span><span class="p">:</span> <span class="s2">&quot;A-RELEASE-RQ PDU (on transport)&quot;</span><span class="p">,</span>
          <span class="s1">&#39;Evt13&#39;</span><span class="p">:</span> <span class="s2">&quot;A-RELEASE-RP PDU (on transport)&quot;</span><span class="p">,</span>
          <span class="s1">&#39;Evt14&#39;</span><span class="p">:</span> <span class="s2">&quot;A-RELEASE response primitive&quot;</span><span class="p">,</span>
          <span class="s1">&#39;Evt15&#39;</span><span class="p">:</span> <span class="s2">&quot;A-ABORT request primitive&quot;</span><span class="p">,</span>
          <span class="s1">&#39;Evt16&#39;</span><span class="p">:</span> <span class="s2">&quot;A-ABORT PDU (on transport)&quot;</span><span class="p">,</span>
          <span class="s1">&#39;Evt17&#39;</span><span class="p">:</span> <span class="s2">&quot;Transport connection closed indication (local transport service)&quot;</span><span class="p">,</span>
          <span class="s1">&#39;Evt18&#39;</span><span class="p">:</span> <span class="s2">&quot;ARTIM timer expired (Association reject/release timer)&quot;</span><span class="p">,</span>
          <span class="s1">&#39;Evt19&#39;</span><span class="p">:</span> <span class="s2">&quot;Unrecognized or invalid PDU received&quot;</span><span class="p">}</span>

<span class="c1"># State Machine Transitions, PS3.8 Table 9-10</span>
<span class="n">TRANSITION_TABLE</span> <span class="o">=</span> <span class="p">{(</span><span class="s1">&#39;Evt1&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta1&#39;</span><span class="p">):</span> <span class="s1">&#39;AE-1&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt2&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta4&#39;</span><span class="p">):</span> <span class="s1">&#39;AE-2&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt3&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta2&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-1&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt3&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta3&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt3&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta5&#39;</span><span class="p">):</span> <span class="s1">&#39;AE-3&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt3&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta6&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt3&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta7&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt3&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta8&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt3&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta9&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt3&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta10&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt3&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta11&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt3&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta12&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt3&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta13&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-6&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt4&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta2&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-1&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt4&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta3&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt4&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta5&#39;</span><span class="p">):</span> <span class="s1">&#39;AE-4&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt4&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta6&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt4&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta7&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt4&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta8&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt4&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta9&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt4&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta10&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt4&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta11&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt4&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta12&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt4&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta13&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-6&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt5&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta1&#39;</span><span class="p">):</span> <span class="s1">&#39;AE-5&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt6&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta2&#39;</span><span class="p">):</span> <span class="s1">&#39;AE-6&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt6&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta3&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt6&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta5&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt6&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta6&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt6&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta7&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt6&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta8&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt6&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta9&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt6&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta10&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt6&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta11&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt6&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta12&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt6&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta13&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-7&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt7&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta3&#39;</span><span class="p">):</span> <span class="s1">&#39;AE-7&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt8&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta3&#39;</span><span class="p">):</span> <span class="s1">&#39;AE-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt9&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta6&#39;</span><span class="p">):</span> <span class="s1">&#39;DT-1&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt9&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta8&#39;</span><span class="p">):</span> <span class="s1">&#39;AR-7&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt10&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta2&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-1&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt10&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta3&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt10&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta5&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt10&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta6&#39;</span><span class="p">):</span> <span class="s1">&#39;DT-2&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt10&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta7&#39;</span><span class="p">):</span> <span class="s1">&#39;AR-6&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt10&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta8&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt10&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta9&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt10&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta10&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt10&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta11&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt10&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta12&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt10&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta13&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-6&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt11&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta6&#39;</span><span class="p">):</span> <span class="s1">&#39;AR-1&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt12&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta2&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-1&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt12&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta3&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt12&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta5&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt12&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta6&#39;</span><span class="p">):</span> <span class="s1">&#39;AR-2&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt12&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta7&#39;</span><span class="p">):</span> <span class="s1">&#39;AR-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt12&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta8&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt12&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta9&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt12&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta10&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt12&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta11&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt12&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta12&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt12&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta13&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-6&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt13&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta2&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-1&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt13&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta3&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt13&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta5&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt13&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta6&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt13&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta7&#39;</span><span class="p">):</span> <span class="s1">&#39;AR-3&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt13&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta8&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt13&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta9&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt13&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta10&#39;</span><span class="p">):</span> <span class="s1">&#39;AR-10&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt13&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta11&#39;</span><span class="p">):</span> <span class="s1">&#39;AR-3&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt13&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta12&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt13&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta13&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-6&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt14&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta8&#39;</span><span class="p">):</span> <span class="s1">&#39;AR-4&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt14&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta9&#39;</span><span class="p">):</span> <span class="s1">&#39;AR-9&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt14&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta12&#39;</span><span class="p">):</span> <span class="s1">&#39;AR-4&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt15&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta3&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-1&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt15&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta4&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-2&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt15&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta5&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-1&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt15&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta6&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-1&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt15&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta7&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-1&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt15&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta8&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-1&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt15&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta9&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-1&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt15&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta10&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-1&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt15&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta11&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-1&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt15&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta12&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-1&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt16&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta2&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-2&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt16&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta3&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-3&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt16&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta5&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-3&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt16&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta6&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-3&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt16&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta7&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-3&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt16&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta8&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-3&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt16&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta9&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-3&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt16&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta10&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-3&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt16&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta11&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-3&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt16&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta12&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-3&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt16&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta13&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-2&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt17&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta2&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-5&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt17&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta3&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-4&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt17&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta4&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-4&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt17&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta5&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-4&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt17&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta6&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-4&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt17&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta7&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-4&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt17&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta8&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-4&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt17&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta9&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-4&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt17&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta10&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-4&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt17&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta11&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-4&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt17&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta12&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-4&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt17&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta13&#39;</span><span class="p">):</span> <span class="s1">&#39;AR-5&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt18&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta2&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-2&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt18&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta13&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-2&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt19&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta2&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-1&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt19&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta3&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt19&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta5&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt19&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta6&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt19&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta7&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt19&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta8&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt19&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta9&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt19&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta10&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt19&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta11&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt19&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta12&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-8&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s1">&#39;Evt19&#39;</span><span class="p">,</span> <span class="s1">&#39;Sta13&#39;</span><span class="p">):</span> <span class="s1">&#39;AA-7&#39;</span><span class="p">}</span>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018-19, pynetdicom contributors

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>