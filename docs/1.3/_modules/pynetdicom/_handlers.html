<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pynetdicom._handlers &mdash; pynetdicom 1.3.1 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/pynetdicom.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/pynetdicom.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> pynetdicom
            <img src="../../_static/pydicom_flat_black.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.3.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../verification_service_class.html">Verification Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../storage_service_class.html">Storage Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../query_retrieve_service_class.html">Query/Retrieve Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../basic_worklist_service_class.html">Basic Worklist Management Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../relevant_patient_service_class.html">Relevant Patient Information Query Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../substance_admin_service_class.html">Substance Administration Query Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../non_patient_service_class.html">Non-Patient Object Storage Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../color_palette_service_class.html">Color Palette Query/Retrieve Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../defined_procedure_service_class.html">Defined Procedure Protocol Query/Retrieve Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hanging_protocol_service_class.html">Hanging Protocol Query/Retrieve Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../implant_template_service_class.html">Implant Template Query/Retrieve Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../display_system_service_class.html">Display System Management Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modality_performed_procedure_step.html">Modality Performed Procedure Step Management</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">User Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">1.3.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html#v1-3-0">1.3.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html#v1-2-0">1.2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html#v1-1-0">1.1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html#v1-0-0">1.0.0</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">pynetdicom</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Module code</a> &raquo;</li>
      <li>pynetdicom._handlers</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for pynetdicom._handlers</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Standard logging event handlers.&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">from</span> <span class="nn">pynetdicom.dimse_messages</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pynetdicom.pdu</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">A_ASSOCIATE_RQ</span><span class="p">,</span> <span class="n">A_ASSOCIATE_AC</span><span class="p">,</span> <span class="n">A_ASSOCIATE_RJ</span><span class="p">,</span> <span class="n">A_RELEASE_RQ</span><span class="p">,</span>
    <span class="n">A_RELEASE_RP</span><span class="p">,</span> <span class="n">A_ABORT_RQ</span><span class="p">,</span> <span class="n">P_DATA_TF</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">pynetdicom.pdu_primitives</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">A_ASSOCIATE</span><span class="p">,</span> <span class="n">A_RELEASE</span><span class="p">,</span> <span class="n">A_ABORT</span><span class="p">,</span> <span class="n">A_P_ABORT</span><span class="p">,</span>
    <span class="n">SOPClassExtendedNegotiation</span><span class="p">,</span>
    <span class="n">SOPClassCommonExtendedNegotiation</span><span class="p">,</span>
    <span class="n">SCP_SCU_RoleSelectionNegotiation</span><span class="p">,</span>
    <span class="n">AsynchronousOperationsWindowNegotiation</span><span class="p">,</span>
    <span class="n">UserIdentityNegotiation</span><span class="p">,</span>
    <span class="n">ImplementationVersionNameNotification</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">pynetdicom.sop_class</span> <span class="kn">import</span> <span class="n">uid_to_service_class</span>
<span class="kn">from</span> <span class="nn">pynetdicom.utils</span> <span class="kn">import</span> <span class="n">pretty_bytes</span>


<span class="n">LOGGER</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;pynetdicom.events&#39;</span><span class="p">)</span>


<span class="c1"># Standard logging handlers</span>
<span class="k">def</span> <span class="nf">standard_pdu_recv_handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Standard handler when a PDU is received and decoded.</span>

<span class="sd">    **Event**</span>

<span class="sd">    ``evt.EVT_PDU_RECV``</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The ``evt.EVT_PDU_RECV`` event corresponding to receiving and decoding</span>
<span class="sd">        a PDU from the peer. ``Event`` attributes are:</span>

<span class="sd">        * ``assoc`` : the</span>
<span class="sd">          :py:class:`association &lt;pynetdicom.association.Association&gt;`</span>
<span class="sd">          that received the PDU.</span>
<span class="sd">        * ``pdu`` : the PDU that was received, one of the ``pdu.PDU``</span>
<span class="sd">          subclasses.</span>
<span class="sd">        * ``timestamp`` : the</span>
<span class="sd">          `date and time &lt;https://docs.python.org/3/library/datetime.html#datetime-objects&gt;`_</span>
<span class="sd">          that the PDU was received.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pdu</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">pdu</span>
    <span class="n">handlers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">A_ASSOCIATE_AC</span> <span class="p">:</span> <span class="n">_receive_associate_ac</span><span class="p">,</span>
        <span class="n">A_ASSOCIATE_RJ</span> <span class="p">:</span> <span class="n">_receive_associate_rj</span><span class="p">,</span>
        <span class="n">A_ASSOCIATE_RQ</span> <span class="p">:</span> <span class="n">_receive_associate_rq</span><span class="p">,</span>
        <span class="n">A_RELEASE_RQ</span> <span class="p">:</span> <span class="n">_receive_release_rq</span><span class="p">,</span>
        <span class="n">A_RELEASE_RP</span> <span class="p">:</span> <span class="n">_receive_release_rp</span><span class="p">,</span>
        <span class="n">A_ABORT_RQ</span> <span class="p">:</span> <span class="n">_receive_abort_pdu</span><span class="p">,</span>
        <span class="n">P_DATA_TF</span> <span class="p">:</span> <span class="n">_receive_data_tf</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="n">handlers</span><span class="p">[</span><span class="nb">type</span><span class="p">(</span><span class="n">pdu</span><span class="p">)]:</span>
        <span class="n">handlers</span><span class="p">[</span><span class="nb">type</span><span class="p">(</span><span class="n">pdu</span><span class="p">)](</span><span class="n">event</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">standard_pdu_sent_handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Standard handler when a PDU is encoded and sent.</span>

<span class="sd">    **Event**</span>

<span class="sd">    ``evt.EVT_PDU_SENT``</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The ``evt.EVT_PDU_SENT`` event corresponding to encoding and sending</span>
<span class="sd">        a PDU to the peer. ``Event`` attributes are:</span>

<span class="sd">        * ``assoc`` : the</span>
<span class="sd">          :py:class:`association &lt;pynetdicom.association.Association&gt;`</span>
<span class="sd">          that sent the PDU.</span>
<span class="sd">        * ``pdu`` : the PDU that was sent, one of the ``pdu.PDU`` subclasses.</span>
<span class="sd">        * ``timestamp`` : the</span>
<span class="sd">          `date and time &lt;https://docs.python.org/3/library/datetime.html#datetime-objects&gt;`_</span>
<span class="sd">          that the PDU was sent.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pdu</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">pdu</span>
    <span class="n">handlers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">A_ASSOCIATE_AC</span> <span class="p">:</span> <span class="n">_send_associate_ac</span><span class="p">,</span>
        <span class="n">A_ASSOCIATE_RJ</span> <span class="p">:</span> <span class="n">_send_associate_rj</span><span class="p">,</span>
        <span class="n">A_ASSOCIATE_RQ</span> <span class="p">:</span> <span class="n">_send_associate_rq</span><span class="p">,</span>
        <span class="n">A_RELEASE_RQ</span> <span class="p">:</span> <span class="n">_send_release_rq</span><span class="p">,</span>
        <span class="n">A_RELEASE_RP</span> <span class="p">:</span> <span class="n">_send_release_rp</span><span class="p">,</span>
        <span class="n">A_ABORT_RQ</span> <span class="p">:</span> <span class="n">_send_abort</span><span class="p">,</span>
        <span class="n">P_DATA_TF</span> <span class="p">:</span> <span class="n">_send_data_tf</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="n">handlers</span><span class="p">[</span><span class="nb">type</span><span class="p">(</span><span class="n">pdu</span><span class="p">)]:</span>
        <span class="n">handlers</span><span class="p">[</span><span class="nb">type</span><span class="p">(</span><span class="n">pdu</span><span class="p">)](</span><span class="n">event</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">standard_dimse_recv_handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Standard handler for the ACSE receiving a primitive from the DUL.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The ``evt.EVT_DIMSE_RECV`` event corresponding to the DIMSE decoding</span>
<span class="sd">        a message received from the peer. ``Event`` attributes are:</span>

<span class="sd">        * ``assoc`` : the</span>
<span class="sd">          :py:class:`association &lt;pynetdicom.association.Association&gt;`</span>
<span class="sd">          that the DIMSE is providing services for.</span>
<span class="sd">        * ``message`` : the DIMSE message that was received.</span>
<span class="sd">        * ``timestamp`` : the</span>
<span class="sd">          `date and time &lt;https://docs.python.org/3/library/datetime.html#datetime-objects&gt;`_</span>
<span class="sd">          that the message was decoded.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">handlers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">C_ECHO_RQ</span><span class="p">:</span> <span class="n">_recv_c_echo_rq</span><span class="p">,</span>
        <span class="n">C_ECHO_RSP</span><span class="p">:</span> <span class="n">_recv_c_echo_rsp</span><span class="p">,</span>
        <span class="n">C_FIND_RQ</span><span class="p">:</span> <span class="n">_recv_c_find_rq</span><span class="p">,</span>
        <span class="n">C_FIND_RSP</span><span class="p">:</span> <span class="n">_recv_c_find_rsp</span><span class="p">,</span>
        <span class="n">C_CANCEL_RQ</span><span class="p">:</span> <span class="n">_recv_c_cancel_rq</span><span class="p">,</span>
        <span class="n">C_GET_RQ</span><span class="p">:</span> <span class="n">_recv_c_get_rq</span><span class="p">,</span>
        <span class="n">C_GET_RSP</span><span class="p">:</span> <span class="n">_recv_c_get_rsp</span><span class="p">,</span>
        <span class="n">C_MOVE_RQ</span><span class="p">:</span> <span class="n">_recv_c_move_rq</span><span class="p">,</span>
        <span class="n">C_MOVE_RSP</span><span class="p">:</span> <span class="n">_recv_c_move_rsp</span><span class="p">,</span>
        <span class="n">C_STORE_RQ</span><span class="p">:</span> <span class="n">_recv_c_store_rq</span><span class="p">,</span>
        <span class="n">C_STORE_RSP</span><span class="p">:</span> <span class="n">_recv_c_store_rsp</span><span class="p">,</span>
        <span class="n">N_EVENT_REPORT_RQ</span><span class="p">:</span> <span class="n">_recv_n_event_report_rq</span><span class="p">,</span>
        <span class="n">N_EVENT_REPORT_RSP</span><span class="p">:</span> <span class="n">_recv_n_event_report_rsp</span><span class="p">,</span>
        <span class="n">N_SET_RQ</span><span class="p">:</span> <span class="n">_recv_n_set_rq</span><span class="p">,</span>
        <span class="n">N_SET_RSP</span><span class="p">:</span> <span class="n">_recv_n_set_rsp</span><span class="p">,</span>
        <span class="n">N_GET_RQ</span><span class="p">:</span> <span class="n">_recv_n_get_rq</span><span class="p">,</span>
        <span class="n">N_GET_RSP</span><span class="p">:</span> <span class="n">_recv_n_get_rsp</span><span class="p">,</span>
        <span class="n">N_ACTION_RQ</span><span class="p">:</span> <span class="n">_recv_n_action_rq</span><span class="p">,</span>
        <span class="n">N_ACTION_RSP</span><span class="p">:</span> <span class="n">_recv_n_action_rsp</span><span class="p">,</span>
        <span class="n">N_CREATE_RQ</span><span class="p">:</span> <span class="n">_recv_n_create_rq</span><span class="p">,</span>
        <span class="n">N_CREATE_RSP</span><span class="p">:</span> <span class="n">_recv_n_create_rsp</span><span class="p">,</span>
        <span class="n">N_DELETE_RQ</span><span class="p">:</span> <span class="n">_recv_n_delete_rq</span><span class="p">,</span>
        <span class="n">N_DELETE_RSP</span><span class="p">:</span> <span class="n">_recv_n_delete_rsp</span>
    <span class="p">}</span>

    <span class="n">handlers</span><span class="p">[</span><span class="nb">type</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">message</span><span class="p">)](</span><span class="n">event</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">standard_dimse_sent_handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Standard handler for the ACSE receiving a primitive from the DUL.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The ``evt.EVT_DIMSE_SENT`` event corresponding to the DIMSE encoding</span>
<span class="sd">        a message to be sent to the peer. ``Event`` attributes are:</span>

<span class="sd">        * ``assoc`` : the</span>
<span class="sd">          :py:class:`association &lt;pynetdicom.association.Association&gt;`</span>
<span class="sd">          that the DIMSE is providing services for.</span>
<span class="sd">        * ``message`` : the DIMSE message to be sent.</span>
<span class="sd">        * ``timestamp`` : the</span>
<span class="sd">          `date and time &lt;https://docs.python.org/3/library/datetime.html#datetime-objects&gt;`_</span>
<span class="sd">          that the message was decoded.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">handlers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">C_ECHO_RQ</span><span class="p">:</span> <span class="n">_send_c_echo_rq</span><span class="p">,</span>
        <span class="n">C_ECHO_RSP</span><span class="p">:</span> <span class="n">_send_c_echo_rsp</span><span class="p">,</span>
        <span class="n">C_FIND_RQ</span><span class="p">:</span> <span class="n">_send_c_find_rq</span><span class="p">,</span>
        <span class="n">C_FIND_RSP</span><span class="p">:</span> <span class="n">_send_c_find_rsp</span><span class="p">,</span>
        <span class="n">C_GET_RQ</span><span class="p">:</span> <span class="n">_send_c_get_rq</span><span class="p">,</span>
        <span class="n">C_GET_RSP</span><span class="p">:</span> <span class="n">_send_c_get_rsp</span><span class="p">,</span>
        <span class="n">C_MOVE_RQ</span><span class="p">:</span> <span class="n">_send_c_move_rq</span><span class="p">,</span>
        <span class="n">C_MOVE_RSP</span><span class="p">:</span> <span class="n">_send_c_move_rsp</span><span class="p">,</span>
        <span class="n">C_STORE_RQ</span><span class="p">:</span> <span class="n">_send_c_store_rq</span><span class="p">,</span>
        <span class="n">C_STORE_RSP</span><span class="p">:</span> <span class="n">_send_c_store_rsp</span><span class="p">,</span>
        <span class="n">C_CANCEL_RQ</span><span class="p">:</span> <span class="n">_send_c_cancel_rq</span><span class="p">,</span>
        <span class="n">N_EVENT_REPORT_RQ</span><span class="p">:</span> <span class="n">_send_n_event_report_rq</span><span class="p">,</span>
        <span class="n">N_EVENT_REPORT_RSP</span><span class="p">:</span> <span class="n">_send_n_event_report_rsp</span><span class="p">,</span>
        <span class="n">N_SET_RQ</span><span class="p">:</span> <span class="n">_send_n_set_rq</span><span class="p">,</span>
        <span class="n">N_SET_RSP</span><span class="p">:</span> <span class="n">_send_n_set_rsp</span><span class="p">,</span>
        <span class="n">N_GET_RQ</span><span class="p">:</span> <span class="n">_send_n_get_rq</span><span class="p">,</span>
        <span class="n">N_GET_RSP</span><span class="p">:</span> <span class="n">_send_n_get_rsp</span><span class="p">,</span>
        <span class="n">N_ACTION_RQ</span><span class="p">:</span> <span class="n">_send_n_action_rq</span><span class="p">,</span>
        <span class="n">N_ACTION_RSP</span><span class="p">:</span> <span class="n">_send_n_action_rsp</span><span class="p">,</span>
        <span class="n">N_CREATE_RQ</span><span class="p">:</span> <span class="n">_send_n_create_rq</span><span class="p">,</span>
        <span class="n">N_CREATE_RSP</span><span class="p">:</span> <span class="n">_send_n_create_rsp</span><span class="p">,</span>
        <span class="n">N_DELETE_RQ</span><span class="p">:</span> <span class="n">_send_n_delete_rq</span><span class="p">,</span>
        <span class="n">N_DELETE_RSP</span><span class="p">:</span> <span class="n">_send_n_delete_rsp</span>
    <span class="p">}</span>

    <span class="n">handlers</span><span class="p">[</span><span class="nb">type</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">message</span><span class="p">)](</span><span class="n">event</span><span class="p">)</span>


<span class="c1"># PDU sub-handlers</span>
<span class="k">def</span> <span class="nf">_receive_abort_pdu</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Standard logging handler for receiving an A-ABORT PDU.&quot;&quot;&quot;</span>
    <span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Abort Parameters:&#39;</span><span class="p">]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; BEGIN A-ABORT PDU &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Abort Source: </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">source_str</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Abort Reason: </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">reason_str</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END A-ABORT PDU &#39;</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_receive_associate_ac</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Standard logging handler for receiving an A-ASSOCIATE-AC PDU.&quot;&quot;&quot;</span>
    <span class="n">assoc_ac</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">pdu</span>

    <span class="n">app_context</span> <span class="o">=</span> <span class="n">assoc_ac</span><span class="o">.</span><span class="n">application_context_name</span><span class="o">.</span><span class="n">title</span><span class="p">()</span>
    <span class="n">pres_contexts</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span>
        <span class="n">assoc_ac</span><span class="o">.</span><span class="n">presentation_context</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">context_id</span>
    <span class="p">)</span>
    <span class="n">user_info</span> <span class="o">=</span> <span class="n">assoc_ac</span><span class="o">.</span><span class="n">user_information</span>
    <span class="n">async_ops</span> <span class="o">=</span> <span class="n">user_info</span><span class="o">.</span><span class="n">async_ops_window</span>
    <span class="n">roles</span> <span class="o">=</span> <span class="n">user_info</span><span class="o">.</span><span class="n">role_selection</span>

    <span class="n">req_contexts</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">assoc</span><span class="o">.</span><span class="n">requestor</span><span class="o">.</span><span class="n">requested_contexts</span>
    <span class="n">req_contexts</span> <span class="o">=</span> <span class="p">{</span><span class="n">ii</span><span class="o">.</span><span class="n">context_id</span><span class="p">:</span><span class="n">ii</span> <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="n">req_contexts</span><span class="p">}</span>

    <span class="n">their_class_uid</span> <span class="o">=</span> <span class="s1">&#39;unknown&#39;</span>
    <span class="n">their_version</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;unknown&#39;</span>

    <span class="k">if</span> <span class="n">user_info</span><span class="o">.</span><span class="n">implementation_class_uid</span><span class="p">:</span>
        <span class="n">their_class_uid</span> <span class="o">=</span> <span class="n">user_info</span><span class="o">.</span><span class="n">implementation_class_uid</span>
    <span class="k">if</span> <span class="n">user_info</span><span class="o">.</span><span class="n">implementation_version_name</span><span class="p">:</span>
        <span class="n">their_version</span> <span class="o">=</span> <span class="n">user_info</span><span class="o">.</span><span class="n">implementation_version_name</span>

    <span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Accept Parameters:&#39;</span><span class="p">]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; BEGIN A-ASSOCIATE-AC PDU &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Their Implementation Class UID:    </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">their_class_uid</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Their Implementation Version Name: </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">their_version</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">)))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Application Context Name:    </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">app_context</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Calling Application Name:    </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">assoc_ac</span><span class="o">.</span><span class="n">calling_ae_title</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">)))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Called Application Name:     </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">assoc_ac</span><span class="o">.</span><span class="n">called_ae_title</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">)))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Their Max PDU Receive Size:  </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">user_info</span><span class="o">.</span><span class="n">maximum_length</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Presentation Contexts:&#39;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">cx</span> <span class="ow">in</span> <span class="n">pres_contexts</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  Context ID:        </span><span class="si">{0!s}</span><span class="s1"> (</span><span class="si">{1!s}</span><span class="s1">)&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cx</span><span class="o">.</span><span class="n">context_id</span><span class="p">,</span> <span class="n">cx</span><span class="o">.</span><span class="n">result_str</span><span class="p">))</span>
        <span class="c1"># Grab the abstract syntax from the requestor</span>
        <span class="n">a_syntax</span> <span class="o">=</span> <span class="n">req_contexts</span><span class="p">[</span><span class="n">cx</span><span class="o">.</span><span class="n">context_id</span><span class="p">]</span><span class="o">.</span><span class="n">abstract_syntax</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;    Abstract Syntax: =</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">a_syntax</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>

        <span class="c1"># Add SCP/SCU Role Selection Negotiation</span>
        <span class="c1"># Roles are: SCU, SCP/SCU, SCP, Default</span>
        <span class="k">if</span> <span class="n">cx</span><span class="o">.</span><span class="n">result</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">role</span> <span class="o">=</span> <span class="n">roles</span><span class="p">[</span><span class="n">a_syntax</span><span class="p">]</span>
                <span class="n">cx_roles</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">if</span> <span class="n">role</span><span class="o">.</span><span class="n">scp_role</span><span class="p">:</span>
                    <span class="n">cx_roles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;SCP&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">role</span><span class="o">.</span><span class="n">scu_role</span><span class="p">:</span>
                    <span class="n">cx_roles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;SCU&#39;</span><span class="p">)</span>
                <span class="n">scp_scu_role</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cx_roles</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">scp_scu_role</span> <span class="o">=</span> <span class="s1">&#39;Default&#39;</span>

            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;    Accepted SCP/SCU Role: </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">scp_scu_role</span><span class="p">))</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="s1">&#39;    Accepted Transfer Syntax: =</span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cx</span><span class="o">.</span><span class="n">transfer_syntax</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="p">)</span>

    <span class="c1">## Extended Negotiation</span>
    <span class="k">if</span> <span class="n">user_info</span><span class="o">.</span><span class="n">ext_neg</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Accepted Extended Negotiation:&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">user_info</span><span class="o">.</span><span class="n">ext_neg</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  SOP Class: =</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">uid</span><span class="p">))</span>
            <span class="n">app_info</span> <span class="o">=</span> <span class="n">pretty_bytes</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">app_info</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">app_info</span><span class="p">:</span>
                <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Accepted Extended Negotiation: None&#39;</span><span class="p">)</span>

    <span class="c1">## Asynchronous Operations</span>
    <span class="k">if</span> <span class="n">async_ops</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="s2">&quot;Accepted Asynchronous Operations Window Negotiation:&quot;</span>
        <span class="p">)</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="s2">&quot;  Maximum Invoked Operations:     </span><span class="si">{}</span><span class="s2">&quot;</span>
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">async_ops</span><span class="o">.</span><span class="n">maximum_number_operations_invoked</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="s2">&quot;  Maximum Performed Operations:   </span><span class="si">{}</span><span class="s2">&quot;</span>
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">async_ops</span><span class="o">.</span><span class="n">maximum_number_operations_performed</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="s2">&quot;Accepted Asynchronous Operations Window Negotiation: None&quot;</span>
        <span class="p">)</span>

    <span class="c1">## User Identity</span>
    <span class="n">usr_id</span> <span class="o">=</span> <span class="s1">&#39;Yes&#39;</span> <span class="k">if</span> <span class="n">user_info</span><span class="o">.</span><span class="n">user_identity</span> <span class="k">else</span> <span class="s1">&#39;None&#39;</span>

    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;User Identity Negotiation Response: </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">usr_id</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END A-ASSOCIATE-AC PDU &#39;</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_receive_associate_rj</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Standard logging handler for receiving an A-ASSOCIATE-RJ PDU.&quot;&quot;&quot;</span>
    <span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Reject Parameters:&#39;</span><span class="p">]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; BEGIN A-ASSOCIATE-RJ PDU &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Result:    </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">result_str</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Source:    </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">source_str</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Reason:    </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">reason_str</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END A-ASSOCIATE-RJ PDU &#39;</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_receive_associate_rq</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Standard logging handler for receiving an A-ASSOCIATE-RQ PDU.&quot;&quot;&quot;</span>
    <span class="n">pdu</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">pdu</span>

    <span class="n">app_context</span> <span class="o">=</span> <span class="n">pdu</span><span class="o">.</span><span class="n">application_context_name</span><span class="o">.</span><span class="n">title</span><span class="p">()</span>
    <span class="n">pres_contexts</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span>
        <span class="n">pdu</span><span class="o">.</span><span class="n">presentation_context</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">context_id</span>
    <span class="p">)</span>
    <span class="n">user_info</span> <span class="o">=</span> <span class="n">pdu</span><span class="o">.</span><span class="n">user_information</span>

    <span class="c1">#responding_ae = &#39;resp. AP Title&#39;</span>
    <span class="n">their_class_uid</span> <span class="o">=</span> <span class="s1">&#39;unknown&#39;</span>
    <span class="n">their_version</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;unknown&#39;</span>

    <span class="k">if</span> <span class="n">user_info</span><span class="o">.</span><span class="n">implementation_class_uid</span><span class="p">:</span>
        <span class="n">their_class_uid</span> <span class="o">=</span> <span class="n">user_info</span><span class="o">.</span><span class="n">implementation_class_uid</span>
    <span class="k">if</span> <span class="n">user_info</span><span class="o">.</span><span class="n">implementation_version_name</span><span class="p">:</span>
        <span class="n">their_version</span> <span class="o">=</span> <span class="n">user_info</span><span class="o">.</span><span class="n">implementation_version_name</span>

    <span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Request Parameters:&#39;</span><span class="p">]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; BEGIN A-ASSOCIATE-RQ PDU &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Their Implementation Class UID:      </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">their_class_uid</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Their Implementation Version Name:   </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">their_version</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">)))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Application Context Name:    </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">app_context</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Calling Application Name:    </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pdu</span><span class="o">.</span><span class="n">calling_ae_title</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">)))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Called Application Name:     </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pdu</span><span class="o">.</span><span class="n">called_ae_title</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">)))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Their Max PDU Receive Size:  </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">user_info</span><span class="o">.</span><span class="n">maximum_length</span><span class="p">))</span>

    <span class="c1">## Presentation Contexts</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pres_contexts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Presentation Context:&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Presentation Contexts:&#39;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">context</span> <span class="ow">in</span> <span class="n">pres_contexts</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  Context ID:        </span><span class="si">{0!s}</span><span class="s1"> &#39;</span>
                 <span class="s1">&#39;(Proposed)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">((</span><span class="n">context</span><span class="o">.</span><span class="n">context_id</span><span class="p">)))</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;    Abstract Syntax: =&#39;</span>
                 <span class="s1">&#39;</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">abstract_syntax</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>

        <span class="c1"># Add SCP/SCU Role Selection Negotiation</span>
        <span class="c1"># Roles are: SCU, SCP/SCU, SCP, Default</span>
        <span class="k">if</span> <span class="n">pdu</span><span class="o">.</span><span class="n">user_information</span><span class="o">.</span><span class="n">role_selection</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">role</span> <span class="o">=</span> <span class="n">pdu</span><span class="o">.</span><span class="n">user_information</span><span class="o">.</span><span class="n">role_selection</span><span class="p">[</span>
                    <span class="n">context</span><span class="o">.</span><span class="n">abstract_syntax</span>
                <span class="p">]</span>
                <span class="n">roles</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">if</span> <span class="n">role</span><span class="o">.</span><span class="n">scp_role</span><span class="p">:</span>
                    <span class="n">roles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;SCP&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">role</span><span class="o">.</span><span class="n">scu_role</span><span class="p">:</span>
                    <span class="n">roles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;SCU&#39;</span><span class="p">)</span>

                <span class="n">scp_scu_role</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">roles</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">scp_scu_role</span> <span class="o">=</span> <span class="s1">&#39;Default&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">scp_scu_role</span> <span class="o">=</span> <span class="s1">&#39;Default&#39;</span>

        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;    Proposed SCP/SCU Role: </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">scp_scu_role</span><span class="p">))</span>

        <span class="c1"># Transfer Syntaxes</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">transfer_syntax</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;    Proposed Transfer Syntax:&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;    Proposed Transfer Syntaxes:&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">ts</span> <span class="ow">in</span> <span class="n">context</span><span class="o">.</span><span class="n">transfer_syntax</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;      =</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ts</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>

    <span class="c1">## Extended Negotiation</span>
    <span class="k">if</span> <span class="n">pdu</span><span class="o">.</span><span class="n">user_information</span><span class="o">.</span><span class="n">ext_neg</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Requested Extended Negotiation:&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">pdu</span><span class="o">.</span><span class="n">user_information</span><span class="o">.</span><span class="n">ext_neg</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  SOP Class: =</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">uid</span><span class="p">))</span>
            <span class="c1">#s.append(&#39;    Application Information, length: %d bytes&#39;</span>
            <span class="c1">#                                       %len(item.app_info))</span>

            <span class="n">app_info</span> <span class="o">=</span> <span class="n">pretty_bytes</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">app_info</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">app_info</span><span class="p">:</span>
                <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Requested Extended Negotiation: None&#39;</span><span class="p">)</span>

    <span class="c1">## Common Extended Negotiation</span>
    <span class="k">if</span> <span class="n">pdu</span><span class="o">.</span><span class="n">user_information</span><span class="o">.</span><span class="n">common_ext_neg</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Requested Common Extended Negotiation:&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">pdu</span><span class="o">.</span><span class="n">user_information</span><span class="o">.</span><span class="n">common_ext_neg</span><span class="p">:</span>

            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  SOP Class: =</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">sop_class_uid</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="s2">&quot;    Service Class: =</span><span class="si">{0!s}</span><span class="s2">&quot;</span>
                <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">service_class_uid</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="p">)</span>

            <span class="n">related_uids</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">related_general_sop_class_identification</span>
            <span class="k">if</span> <span class="n">related_uids</span><span class="p">:</span>
                <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;    Related General SOP Class(es):&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">sub_field</span> <span class="ow">in</span> <span class="n">related_uids</span><span class="p">:</span>
                    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;      =</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sub_field</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;    Related General SOP Classes: None&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Requested Common Extended Negotiation: None&#39;</span><span class="p">)</span>

    <span class="c1">## Asynchronous Operations Window Negotiation</span>
    <span class="n">async_ops</span> <span class="o">=</span> <span class="n">pdu</span><span class="o">.</span><span class="n">user_information</span><span class="o">.</span><span class="n">async_ops_window</span>
    <span class="k">if</span> <span class="n">async_ops</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Requested Asynchronous Operations Window Negotiation:&#39;</span><span class="p">)</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="s2">&quot;  Maximum Invoked Operations:     </span><span class="si">{}</span><span class="s2">&quot;</span>
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">async_ops</span><span class="o">.</span><span class="n">maximum_number_operations_invoked</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="s2">&quot;  Maximum Performed Operations:   </span><span class="si">{}</span><span class="s2">&quot;</span>
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">async_ops</span><span class="o">.</span><span class="n">maximum_number_operations_performed</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="s2">&quot;Requested Asynchronous Operations Window Negotiation: None&quot;</span>
        <span class="p">)</span>

    <span class="c1">## User Identity</span>
    <span class="k">if</span> <span class="n">user_info</span><span class="o">.</span><span class="n">user_identity</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">usid</span> <span class="o">=</span> <span class="n">user_info</span><span class="o">.</span><span class="n">user_identity</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Requested User Identity Negotiation:&#39;</span><span class="p">)</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  Authentication Mode: </span><span class="si">{0:d}</span><span class="s1"> - </span><span class="si">{1!s}</span><span class="s1">&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">usid</span><span class="o">.</span><span class="n">id_type</span><span class="p">,</span> <span class="n">usid</span><span class="o">.</span><span class="n">id_type_str</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">usid</span><span class="o">.</span><span class="n">id_type</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  Username: [</span><span class="si">{0!s}</span><span class="s1">]&#39;</span>
                     <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">usid</span><span class="o">.</span><span class="n">primary</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)))</span>
        <span class="k">elif</span> <span class="n">usid</span><span class="o">.</span><span class="n">id_type</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  Username: [</span><span class="si">{0!s}</span><span class="s1">]&#39;</span>
                     <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">usid</span><span class="o">.</span><span class="n">primary</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)))</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  Password: [</span><span class="si">{0!s}</span><span class="s1">]&#39;</span>
                     <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">usid</span><span class="o">.</span><span class="n">secondary</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)))</span>
        <span class="k">elif</span> <span class="n">usid</span><span class="o">.</span><span class="n">id_type</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  Kerberos Service Ticket (not dumped) length: &#39;</span>
                     <span class="s1">&#39;</span><span class="si">{0:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">usid</span><span class="o">.</span><span class="n">primary</span><span class="p">)))</span>
        <span class="k">elif</span> <span class="n">usid</span><span class="o">.</span><span class="n">id_type</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  SAML Assertion (not dumped) length: &#39;</span>
                     <span class="s1">&#39;</span><span class="si">{0:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">usid</span><span class="o">.</span><span class="n">primary</span><span class="p">)))</span>
        <span class="k">elif</span> <span class="n">usid</span><span class="o">.</span><span class="n">id_type</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  JSON Web Token (not dumped) length: &#39;</span>
                     <span class="s1">&#39;</span><span class="si">{0:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">usid</span><span class="o">.</span><span class="n">primary</span><span class="p">)))</span>

        <span class="k">if</span> <span class="n">usid</span><span class="o">.</span><span class="n">response_requested</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  Positive Response Requested: Yes&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  Positive Response Requested: None&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Requested User Identity Negotiation: None&#39;</span><span class="p">)</span>

    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END A-ASSOCIATE-RQ PDU &#39;</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_receive_data_tf</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Standard logging handler for receiving a P-DATA-TF PDU.&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">_receive_release_rp</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Standard logging handler for receiving an A-RELEASE-RP PDU.&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">_receive_release_rq</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Standard logging handler for receiving an A-RELEASE-RQ PDU.&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">_send_abort</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Standard logging handler for sending an A-ABORT PDU.&quot;&quot;&quot;</span>
    <span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Abort Parameters:&#39;</span><span class="p">]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; BEGIN A-ABORT PDU &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Abort Source: </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">source_str</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Abort Reason: </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">reason_str</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END A-ABORT PDU &#39;</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_send_associate_ac</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Standard logging handler for sending an A-ASSOCIATE-AC PDU.&quot;&quot;&quot;</span>
    <span class="n">assoc_ac</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">pdu</span>

    <span class="n">req_contexts</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">assoc</span><span class="o">.</span><span class="n">requestor</span><span class="o">.</span><span class="n">get_contexts</span><span class="p">(</span><span class="s1">&#39;pcdl&#39;</span><span class="p">)</span>
    <span class="n">req_contexts</span> <span class="o">=</span> <span class="p">{</span><span class="n">ii</span><span class="o">.</span><span class="n">context_id</span><span class="p">:</span><span class="n">ii</span> <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="n">req_contexts</span><span class="p">}</span>

    <span class="c1"># Needs some cleanup</span>
    <span class="n">app_context</span> <span class="o">=</span> <span class="n">assoc_ac</span><span class="o">.</span><span class="n">application_context_name</span><span class="o">.</span><span class="n">title</span><span class="p">()</span>
    <span class="n">pres_contexts</span> <span class="o">=</span> <span class="n">assoc_ac</span><span class="o">.</span><span class="n">presentation_context</span>
    <span class="n">user_info</span> <span class="o">=</span> <span class="n">assoc_ac</span><span class="o">.</span><span class="n">user_information</span>
    <span class="n">async_ops</span> <span class="o">=</span> <span class="n">user_info</span><span class="o">.</span><span class="n">async_ops_window</span>
    <span class="n">roles</span> <span class="o">=</span> <span class="n">user_info</span><span class="o">.</span><span class="n">role_selection</span>

    <span class="n">responding_ae</span> <span class="o">=</span> <span class="s1">&#39;resp. AE Title&#39;</span>

    <span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Accept Parameters:&#39;</span><span class="p">]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; BEGIN A-ASSOCIATE-AC PDU &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Our Implementation Class UID:      &#39;</span>
             <span class="s1">&#39;</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">user_info</span><span class="o">.</span><span class="n">implementation_class_uid</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">user_info</span><span class="o">.</span><span class="n">implementation_version_name</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="s2">&quot;Our Implementation Version Name:   </span><span class="si">{0!s}</span><span class="s2">&quot;</span>
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">user_info</span><span class="o">.</span><span class="n">implementation_version_name</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">))</span>
        <span class="p">)</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Application Context Name:    </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">app_context</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Responding Application Name: </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">responding_ae</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Our Max PDU Receive Size:    &#39;</span>
             <span class="s1">&#39;</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">user_info</span><span class="o">.</span><span class="n">maximum_length</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Presentation Contexts:&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">pres_contexts</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;    (no valid presentation contexts)&#39;</span><span class="p">)</span>

    <span class="c1"># Sort by context ID</span>
    <span class="k">for</span> <span class="n">cx</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">pres_contexts</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">context_id</span><span class="p">):</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  Context ID:        </span><span class="si">{0!s}</span><span class="s1"> (</span><span class="si">{1!s}</span><span class="s1">)&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cx</span><span class="o">.</span><span class="n">context_id</span><span class="p">,</span> <span class="n">cx</span><span class="o">.</span><span class="n">result_str</span><span class="p">))</span>
        <span class="n">a_syntax</span> <span class="o">=</span> <span class="n">req_contexts</span><span class="p">[</span><span class="n">cx</span><span class="o">.</span><span class="n">context_id</span><span class="p">]</span><span class="o">.</span><span class="n">abstract_syntax</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;    Abstract Syntax: =</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">a_syntax</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>

        <span class="c1"># If Presentation Context was accepted</span>
        <span class="k">if</span> <span class="n">cx</span><span class="o">.</span><span class="n">result</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">role</span> <span class="o">=</span> <span class="n">roles</span><span class="p">[</span><span class="n">a_syntax</span><span class="p">]</span>
                <span class="n">cx_roles</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">if</span> <span class="n">role</span><span class="o">.</span><span class="n">scp_role</span><span class="p">:</span>
                    <span class="n">cx_roles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;SCP&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">role</span><span class="o">.</span><span class="n">scu_role</span><span class="p">:</span>
                    <span class="n">cx_roles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;SCU&#39;</span><span class="p">)</span>
                <span class="n">scp_scu_role</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cx_roles</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">scp_scu_role</span> <span class="o">=</span> <span class="s1">&#39;Default&#39;</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;    Accepted SCP/SCU Role: </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">scp_scu_role</span><span class="p">))</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;    Accepted Transfer Syntax: =</span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                     <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cx</span><span class="o">.</span><span class="n">transfer_syntax</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>

    <span class="c1">## Extended Negotiation</span>
    <span class="k">if</span> <span class="n">user_info</span><span class="o">.</span><span class="n">ext_neg</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Accepted Extended Negotiation:&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">user_info</span><span class="o">.</span><span class="n">ext_neg</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  SOP Class: =</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">uid</span><span class="p">))</span>
            <span class="n">app_info</span> <span class="o">=</span> <span class="n">pretty_bytes</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">app_info</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">app_info</span><span class="p">:</span>
                <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Accepted Extended Negotiation: None&#39;</span><span class="p">)</span>

    <span class="c1">## Asynchronous Operations</span>
    <span class="k">if</span> <span class="n">async_ops</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="s2">&quot;Accepted Asynchronous Operations Window Negotiation:&quot;</span>
        <span class="p">)</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="s2">&quot;  Maximum Invoked Operations:     </span><span class="si">{}</span><span class="s2">&quot;</span>
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">async_ops</span><span class="o">.</span><span class="n">maximum_number_operations_invoked</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="s2">&quot;  Maximum Performed Operations:   </span><span class="si">{}</span><span class="s2">&quot;</span>
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">async_ops</span><span class="o">.</span><span class="n">maximum_number_operations_performed</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="s2">&quot;Accepted Asynchronous Operations Window Negotiation: None&quot;</span>
        <span class="p">)</span>

    <span class="c1">## User Identity Negotiation</span>
    <span class="n">usr_id</span> <span class="o">=</span> <span class="s1">&#39;Yes&#39;</span> <span class="k">if</span> <span class="n">user_info</span><span class="o">.</span><span class="n">user_identity</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="s1">&#39;None&#39;</span>


    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;User Identity Negotiation Response: </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">usr_id</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END A-ASSOCIATE-AC PDU &#39;</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_send_associate_rj</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Standard logging handler for sending an A-ASSOCIATE-RJ PDU.&quot;&quot;&quot;</span>
    <span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Reject Parameters:&#39;</span><span class="p">]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; BEGIN A-ASSOCIATE-RJ PDU &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Result:    </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">result_str</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Source:    </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">source_str</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Reason:    </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">pdu</span><span class="o">.</span><span class="n">reason_str</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END A-ASSOCIATE-RJ PDU &#39;</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_send_associate_rq</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Standard logging handler for sending an A-ASSOCIATE-RQ PDU.&quot;&quot;&quot;</span>
    <span class="n">pdu</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">pdu</span>

    <span class="n">app_context</span> <span class="o">=</span> <span class="n">pdu</span><span class="o">.</span><span class="n">application_context_name</span><span class="o">.</span><span class="n">title</span><span class="p">()</span>
    <span class="n">pres_contexts</span> <span class="o">=</span> <span class="n">pdu</span><span class="o">.</span><span class="n">presentation_context</span>
    <span class="n">user_info</span> <span class="o">=</span> <span class="n">pdu</span><span class="o">.</span><span class="n">user_information</span>

    <span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Request Parameters:&#39;</span><span class="p">]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; BEGIN A-ASSOCIATE-RQ PDU &#39;</span><span class="p">))</span>

    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Our Implementation Class UID:      &#39;</span>
             <span class="s1">&#39;</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">user_info</span><span class="o">.</span><span class="n">implementation_class_uid</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">user_info</span><span class="o">.</span><span class="n">implementation_version_name</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="s1">&#39;Our Implementation Version Name:   </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">user_info</span><span class="o">.</span><span class="n">implementation_version_name</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Application Context Name:    </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">app_context</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Calling Application Name:    &#39;</span>
             <span class="s1">&#39;</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pdu</span><span class="o">.</span><span class="n">calling_ae_title</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">)))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Called Application Name:     &#39;</span>
             <span class="s1">&#39;</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pdu</span><span class="o">.</span><span class="n">called_ae_title</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">)))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Our Max PDU Receive Size:    &#39;</span>
             <span class="s1">&#39;</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">user_info</span><span class="o">.</span><span class="n">maximum_length</span><span class="p">))</span>

    <span class="c1">## Presentation Contexts</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pres_contexts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Presentation Context:&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Presentation Contexts:&#39;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">context</span> <span class="ow">in</span> <span class="n">pres_contexts</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  Context ID:        </span><span class="si">{0!s}</span><span class="s1"> &#39;</span>
                 <span class="s1">&#39;(Proposed)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">((</span><span class="n">context</span><span class="o">.</span><span class="n">context_id</span><span class="p">)))</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;    Abstract Syntax: =&#39;</span>
                 <span class="s1">&#39;</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">abstract_syntax</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>

        <span class="c1"># Add SCP/SCU Role Selection Negotiation</span>
        <span class="c1"># Roles are: SCU, SCP/SCU, SCP, Default</span>
        <span class="k">if</span> <span class="n">pdu</span><span class="o">.</span><span class="n">user_information</span><span class="o">.</span><span class="n">role_selection</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">role</span> <span class="o">=</span> <span class="n">pdu</span><span class="o">.</span><span class="n">user_information</span><span class="o">.</span><span class="n">role_selection</span><span class="p">[</span>
                    <span class="n">context</span><span class="o">.</span><span class="n">abstract_syntax</span>
                <span class="p">]</span>
                <span class="n">roles</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">if</span> <span class="n">role</span><span class="o">.</span><span class="n">scp_role</span><span class="p">:</span>
                    <span class="n">roles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;SCP&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">role</span><span class="o">.</span><span class="n">scu_role</span><span class="p">:</span>
                    <span class="n">roles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;SCU&#39;</span><span class="p">)</span>

                <span class="n">scp_scu_role</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">roles</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">scp_scu_role</span> <span class="o">=</span> <span class="s1">&#39;Default&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">scp_scu_role</span> <span class="o">=</span> <span class="s1">&#39;Default&#39;</span>

        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;    Proposed SCP/SCU Role: </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">scp_scu_role</span><span class="p">))</span>

        <span class="c1"># Transfer Syntaxes</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">transfer_syntax</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;    Proposed Transfer Syntax:&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;    Proposed Transfer Syntaxes:&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">ts</span> <span class="ow">in</span> <span class="n">context</span><span class="o">.</span><span class="n">transfer_syntax</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;      =</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ts</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>

    <span class="c1">## Extended Negotiation</span>
    <span class="k">if</span> <span class="n">pdu</span><span class="o">.</span><span class="n">user_information</span><span class="o">.</span><span class="n">ext_neg</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Requested Extended Negotiation:&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">pdu</span><span class="o">.</span><span class="n">user_information</span><span class="o">.</span><span class="n">ext_neg</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  SOP Class: =</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">uid</span><span class="p">))</span>
            <span class="c1">#s.append(&#39;    Application Information, length: %d bytes&#39;</span>
            <span class="c1">#                                       %len(item.app_info))</span>

            <span class="n">app_info</span> <span class="o">=</span> <span class="n">pretty_bytes</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">app_info</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">app_info</span><span class="p">:</span>
                <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;   </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Requested Extended Negotiation: None&#39;</span><span class="p">)</span>

    <span class="c1">## Common Extended Negotiation</span>
    <span class="k">if</span> <span class="n">pdu</span><span class="o">.</span><span class="n">user_information</span><span class="o">.</span><span class="n">common_ext_neg</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Requested Common Extended Negotiation:&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">pdu</span><span class="o">.</span><span class="n">user_information</span><span class="o">.</span><span class="n">common_ext_neg</span><span class="p">:</span>

            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  SOP Class: =</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">sop_class_uid</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="s2">&quot;    Service Class: =</span><span class="si">{0!s}</span><span class="s2">&quot;</span>
                <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">service_class_uid</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="p">)</span>

            <span class="n">related_uids</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">related_general_sop_class_identification</span>
            <span class="k">if</span> <span class="n">related_uids</span><span class="p">:</span>
                <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;    Related General SOP Class(es):&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">sub_field</span> <span class="ow">in</span> <span class="n">related_uids</span><span class="p">:</span>
                    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;      =</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sub_field</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;    Related General SOP Classes: None&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Requested Common Extended Negotiation: None&#39;</span><span class="p">)</span>

    <span class="c1">## Asynchronous Operations Window Negotiation</span>
    <span class="n">async_ops</span> <span class="o">=</span> <span class="n">pdu</span><span class="o">.</span><span class="n">user_information</span><span class="o">.</span><span class="n">async_ops_window</span>
    <span class="k">if</span> <span class="n">async_ops</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Requested Asynchronous Operations Window Negotiation:&#39;</span><span class="p">)</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="s2">&quot;  Maximum Invoked Operations:     </span><span class="si">{}</span><span class="s2">&quot;</span>
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">async_ops</span><span class="o">.</span><span class="n">maximum_number_operations_invoked</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="s2">&quot;  Maximum Performed Operations:   </span><span class="si">{}</span><span class="s2">&quot;</span>
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">async_ops</span><span class="o">.</span><span class="n">maximum_number_operations_performed</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="s2">&quot;Requested Asynchronous Operations Window Negotiation: None&quot;</span>
        <span class="p">)</span>

    <span class="c1">## User Identity</span>
    <span class="k">if</span> <span class="n">user_info</span><span class="o">.</span><span class="n">user_identity</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">usid</span> <span class="o">=</span> <span class="n">user_info</span><span class="o">.</span><span class="n">user_identity</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Requested User Identity Negotiation:&#39;</span><span class="p">)</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  Authentication Mode: </span><span class="si">{0:d}</span><span class="s1"> - &#39;</span>
                 <span class="s1">&#39;</span><span class="si">{1!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">usid</span><span class="o">.</span><span class="n">id_type</span><span class="p">,</span> <span class="n">usid</span><span class="o">.</span><span class="n">id_type_str</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">usid</span><span class="o">.</span><span class="n">id_type</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  Username: &#39;</span>
                     <span class="s1">&#39;[</span><span class="si">{0!s}</span><span class="s1">]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">usid</span><span class="o">.</span><span class="n">primary</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)))</span>
        <span class="k">elif</span> <span class="n">usid</span><span class="o">.</span><span class="n">id_type</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  Username: &#39;</span>
                     <span class="s1">&#39;[</span><span class="si">{0!s}</span><span class="s1">]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">usid</span><span class="o">.</span><span class="n">primary</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)))</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  Password: &#39;</span>
                     <span class="s1">&#39;[</span><span class="si">{0!s}</span><span class="s1">]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">usid</span><span class="o">.</span><span class="n">secondary</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)))</span>
        <span class="k">elif</span> <span class="n">usid</span><span class="o">.</span><span class="n">id_type</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  Kerberos Service Ticket (not dumped) length: &#39;</span>
                     <span class="s1">&#39;</span><span class="si">{0:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">usid</span><span class="o">.</span><span class="n">primary</span><span class="p">)))</span>
        <span class="k">elif</span> <span class="n">usid</span><span class="o">.</span><span class="n">id_type</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  SAML Assertion (not dumped) length: &#39;</span>
                     <span class="s1">&#39;</span><span class="si">{0:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">usid</span><span class="o">.</span><span class="n">primary</span><span class="p">)))</span>
        <span class="k">elif</span> <span class="n">usid</span><span class="o">.</span><span class="n">id_type</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  JSON Web Token (not dumped) length: &#39;</span>
                     <span class="s1">&#39;</span><span class="si">{0:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">usid</span><span class="o">.</span><span class="n">primary</span><span class="p">)))</span>

        <span class="k">if</span> <span class="n">usid</span><span class="o">.</span><span class="n">response_requested</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  Positive Response Requested: Yes&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  Positive Response Requested: No&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Requested User Identity Negotiation: None&#39;</span><span class="p">)</span>

    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END A-ASSOCIATE-RQ PDU &#39;</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_send_data_tf</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Standard logging handler for sending a P-DATA-TF PDU.&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">_send_release_rp</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Standard logging handler for sending an A-RELEASE-RP PDU.&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">_send_release_rq</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Standard logging handler for sending an A-RELEASE-RQ PDU.&quot;&quot;&quot;</span>
    <span class="k">pass</span>


<span class="c1"># DIMSE sub-handlers</span>
<span class="k">def</span> <span class="nf">_send_c_echo_rq</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler for when a C-ECHO-RQ is sent.</span>

<span class="sd">    **C-ECHO Request Parameters**</span>

<span class="sd">    | (M) Message ID</span>
<span class="sd">    | (M) Affected SOP Class UID</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_SENT event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">_send_c_echo_rsp</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler for when a C-ECHO-RSP is sent.</span>

<span class="sd">    **C-ECHO Response Parameters**</span>

<span class="sd">    | (U) Message ID</span>
<span class="sd">    | (M) Message ID Being Responded To</span>
<span class="sd">    | (U) Affected SOP Class UID</span>
<span class="sd">    | (M) Status</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_SENT event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">_send_c_store_rq</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when a C-STORE-RQ is sent.</span>

<span class="sd">    **C-STORE Request Elements**</span>

<span class="sd">    | (M) Message ID</span>
<span class="sd">    | (M) Affected SOP Class UID</span>
<span class="sd">    | (M) Affected SOP Instance UID</span>
<span class="sd">    | (M) Priority</span>
<span class="sd">    | (U) Move Originator Application Entity Title</span>
<span class="sd">    | (U) Move Originator Message ID</span>
<span class="sd">    | (M) Data Set</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_SENT event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">command_set</span>

    <span class="n">priority_str</span> <span class="o">=</span> <span class="p">{</span><span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;Low&#39;</span><span class="p">,</span>
                    <span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;Medium&#39;</span><span class="p">,</span>
                    <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;High&#39;</span><span class="p">}</span>
    <span class="n">priority</span> <span class="o">=</span> <span class="n">priority_str</span><span class="p">[</span><span class="n">cs</span><span class="o">.</span><span class="n">Priority</span><span class="p">]</span>

    <span class="n">dataset</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span> <span class="ow">and</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">dataset</span> <span class="o">=</span> <span class="s1">&#39;Present&#39;</span>

    <span class="k">if</span> <span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPClassUID</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;CT Image Storage&#39;</span><span class="p">:</span>
        <span class="n">dataset_type</span> <span class="o">=</span> <span class="s1">&#39;, (CT)&#39;</span>
    <span class="k">elif</span> <span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPClassUID</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;MR Image Storage&#39;</span><span class="p">:</span>
        <span class="n">dataset_type</span> <span class="o">=</span> <span class="s1">&#39;, (MR)&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">dataset_type</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Sending Store Request: MsgID </span><span class="si">%s%s</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">cs</span><span class="o">.</span><span class="n">MessageID</span><span class="p">,</span> <span class="n">dataset_type</span><span class="p">)</span>

    <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; OUTGOING DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message Type                  : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;C-STORE RQ&#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message ID                    : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">MessageID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Class UID        : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPClassUID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Instance UID     : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPInstanceUID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Data Set                      : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dataset</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Priority                      : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">priority</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_send_c_store_rsp</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when a C-STORE-RSP is sent.</span>

<span class="sd">    **C-STORE Response Elements**</span>

<span class="sd">    | (U) Message ID</span>
<span class="sd">    | (M) Message ID Being Responded To</span>
<span class="sd">    | (U) Affected SOP Class UID</span>
<span class="sd">    | (U) Affected SOP Instance UID</span>
<span class="sd">    | (M) Status</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_SENT event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">_send_c_find_rq</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when a C-FIND-RQ is sent.</span>

<span class="sd">    **C-FIND Request Parameters**</span>

<span class="sd">    | (M) Message ID</span>
<span class="sd">    | (M) Affected SOP Class UID</span>
<span class="sd">    | (M) Priority</span>
<span class="sd">    | (M) Identifier</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_SENT event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">command_set</span>

    <span class="n">priority_str</span> <span class="o">=</span> <span class="p">{</span><span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;Low&#39;</span><span class="p">,</span>
                    <span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;Medium&#39;</span><span class="p">,</span>
                    <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;High&#39;</span><span class="p">}</span>
    <span class="n">priority</span> <span class="o">=</span> <span class="n">priority_str</span><span class="p">[</span><span class="n">cs</span><span class="o">.</span><span class="n">Priority</span><span class="p">]</span>

    <span class="n">dataset</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span> <span class="ow">and</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">dataset</span> <span class="o">=</span> <span class="s1">&#39;Present&#39;</span>

    <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; OUTGOING DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message Type                  : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;C-FIND RQ&#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Presentation Context ID       : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">context_id</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message ID                    : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">MessageID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Class UID        : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPClassUID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Identifier                    : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dataset</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Priority                      : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">priority</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END DIMSE MESSAGE &#39;</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_send_c_find_rsp</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when a C-FIND-RSP is sent.</span>

<span class="sd">    **C-FIND Response Parameters**</span>

<span class="sd">    | (U) Message ID</span>
<span class="sd">    | (M) Message ID Being Responded To</span>
<span class="sd">    | (U) Affected SOP Class UID</span>
<span class="sd">    | (C) Identifier</span>
<span class="sd">    | (M) Status</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_SENT event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">command_set</span>

    <span class="n">dataset</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span> <span class="ow">and</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">dataset</span> <span class="o">=</span> <span class="s1">&#39;Present&#39;</span>

    <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; OUTGOING DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message Type                  : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;C-FIND RSP&#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message ID Being Responded To : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">MessageIDBeingRespondedTo</span><span class="p">))</span>
    <span class="k">if</span> <span class="s1">&#39;AffectedSOPClassUID&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Class UID        : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPClassUID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Identifier                    : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dataset</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;DIMSE Status                  : 0x</span><span class="si">{0:04x}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">Status</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END DIMSE MESSAGE &#39;</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_send_c_get_rq</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when a C-GET-RQ is sent.</span>

<span class="sd">    **C-GET Request Parameters**</span>

<span class="sd">    | (M) Message ID</span>
<span class="sd">    | (M) Affected SOP Class UID</span>
<span class="sd">    | (M) Priority</span>
<span class="sd">    | (M) Identifier</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_SENT event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">command_set</span>

    <span class="n">priority_str</span> <span class="o">=</span> <span class="p">{</span><span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;Low&#39;</span><span class="p">,</span>
                    <span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;Medium&#39;</span><span class="p">,</span>
                    <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;High&#39;</span><span class="p">}</span>
    <span class="n">priority</span> <span class="o">=</span> <span class="n">priority_str</span><span class="p">[</span><span class="n">cs</span><span class="o">.</span><span class="n">Priority</span><span class="p">]</span>

    <span class="n">dataset</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span> <span class="ow">and</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">dataset</span> <span class="o">=</span> <span class="s1">&#39;Present&#39;</span>

    <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; OUTGOING DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message Type                  : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;C-GET RQ&#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message ID                    : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">MessageID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Class UID        : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPClassUID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Identifier                    : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dataset</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Priority                      : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">priority</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_send_c_get_rsp</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when a C-GET-RSP is sent.</span>

<span class="sd">    **C-GET Response Parameters**</span>

<span class="sd">    | (U) Message ID</span>
<span class="sd">    | (M) Message ID Being Responded To</span>
<span class="sd">    | (U) Affected SOP Class UID</span>
<span class="sd">    | (U) Identifier</span>
<span class="sd">    | (M) Status</span>
<span class="sd">    | (C) Number of Remaining Sub-operations</span>
<span class="sd">    | (C) Number of Completed Sub-operations</span>
<span class="sd">    | (C) Number of Failed Sub-operations</span>
<span class="sd">    | (C) Number of Warning Sub-operations</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_SENT event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">command_set</span>

    <span class="n">dataset</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span> <span class="ow">and</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">dataset</span> <span class="o">=</span> <span class="s1">&#39;Present&#39;</span>

    <span class="n">affected_sop</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">cs</span><span class="p">,</span> <span class="s1">&#39;AffectedSOPClassUID&#39;</span><span class="p">,</span> <span class="s1">&#39;None&#39;</span><span class="p">)</span>

    <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; OUTGOING DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message Type                  : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;C-GET RSP&#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message ID Being Responded To : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">MessageIDBeingRespondedTo</span><span class="p">))</span>
    <span class="k">if</span> <span class="s1">&#39;AffectedSOPClassUID&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Class UID        : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">affected_sop</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Identifier                    : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dataset</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;DIMSE Status                  : 0x</span><span class="si">{0:04x}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">Status</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END DIMSE MESSAGE &#39;</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_send_c_move_rq</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when a C-MOVE-RQ is sent.</span>

<span class="sd">    **C-MOVE Request Parameters**</span>

<span class="sd">    | (M) Message ID</span>
<span class="sd">    | (M) Affected SOP Class UID</span>
<span class="sd">    | (M) Priority</span>
<span class="sd">    | (M) Move Destination</span>
<span class="sd">    | (M) Identifier</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_SENT event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">command_set</span>

    <span class="n">priority_str</span> <span class="o">=</span> <span class="p">{</span><span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;Low&#39;</span><span class="p">,</span>
                    <span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;Medium&#39;</span><span class="p">,</span>
                    <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;High&#39;</span><span class="p">}</span>
    <span class="n">priority</span> <span class="o">=</span> <span class="n">priority_str</span><span class="p">[</span><span class="n">cs</span><span class="o">.</span><span class="n">Priority</span><span class="p">]</span>

    <span class="n">identifier</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span> <span class="ow">and</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">identifier</span> <span class="o">=</span> <span class="s1">&#39;Present&#39;</span>

    <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; OUTGOING DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message Type                  : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;C-MOVE RQ&#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message ID                    : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">MessageID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Class UID        : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPClassUID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Move Destination              : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">MoveDestination</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Identifier                    : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">identifier</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Priority                      : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">priority</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span>

<span class="k">def</span> <span class="nf">_send_c_move_rsp</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when a C-MOVE-RSP is sent.</span>

<span class="sd">    **C-MOVE Response Parameters**</span>

<span class="sd">    | (U) Message ID</span>
<span class="sd">    | (M) Message ID Being Responded To</span>
<span class="sd">    | (U) Affected SOP Class UID</span>
<span class="sd">    | (U) Identifier</span>
<span class="sd">    | (M) Status</span>
<span class="sd">    | (C) Number of Remaining Sub-operations</span>
<span class="sd">    | (C) Number of Completed Sub-operations</span>
<span class="sd">    | (C) Number of Failed Sub-operations</span>
<span class="sd">    | (C) Number of Warning Sub-operations</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_SENT event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">command_set</span>

    <span class="n">identifier</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span> <span class="ow">and</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">identifier</span> <span class="o">=</span> <span class="s1">&#39;Present&#39;</span>

    <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; OUTGOING DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message Type                  : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;C-MOVE RSP&#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message ID Being Responded To : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">MessageIDBeingRespondedTo</span><span class="p">))</span>
    <span class="k">if</span> <span class="s1">&#39;AffectedSOPClassUID&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Class UID        : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPClassUID</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Class UID        : None&#39;</span><span class="p">)</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Identifier                    : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">identifier</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Status                        : 0x</span><span class="si">{0:04x}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">Status</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END DIMSE MESSAGE &#39;</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_send_c_cancel_rq</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when a C-CANCEL-RQ is sent.</span>

<span class="sd">    Covers C-CANCEL-FIND-RQ, C-CANCEL-GET-RQ and C-CANCEL-MOVE-RQ.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_SENT event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">_recv_c_echo_rq</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when a C-ECHO-RQ is received.</span>

<span class="sd">    **C-ECHO Request Parameters**</span>

<span class="sd">    | (M) Message ID</span>
<span class="sd">    | (M) Affected SOP Class UID</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_RECV event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">command_set</span>

    <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Received Echo Request (MsgID </span><span class="si">%s</span><span class="s1">)&#39;</span><span class="p">,</span> <span class="n">cs</span><span class="o">.</span><span class="n">MessageID</span><span class="p">)</span>

    <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; INCOMING DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message Type                  : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;C-ECHO RQ&#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Presentation Context ID       : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">context_id</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message ID                    : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">MessageID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Data Set                      : None&#39;</span><span class="p">)</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END DIMSE MESSAGE &#39;</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_recv_c_echo_rsp</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when a C-ECHO-RSP is received.</span>

<span class="sd">    **C-ECHO Response Parameters**</span>

<span class="sd">    | (U) Message ID</span>
<span class="sd">    | (M) Message ID Being Responded To</span>
<span class="sd">    | (U) Affected SOP Class UID</span>
<span class="sd">    | (M) Status</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_RECV event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">command_set</span>
    <span class="c1"># Status is one of the following:</span>
    <span class="c1">#   0x0000 Success</span>
    <span class="c1">#   0x0122 Refused: SOP Class Not Supported</span>
    <span class="c1">#   0x0210 Refused: Duplicate Invocation</span>
    <span class="c1">#   0x0212 Refused: Mistyped Argument</span>
    <span class="c1">#   0x0211 Refused: Unrecognised Operation</span>
    <span class="k">if</span> <span class="n">cs</span><span class="o">.</span><span class="n">Status</span> <span class="o">==</span> <span class="mh">0x0000</span><span class="p">:</span>
        <span class="n">status_str</span> <span class="o">=</span> <span class="s1">&#39;Success&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">status_str</span> <span class="o">=</span> <span class="s1">&#39;0x</span><span class="si">{0:04x}</span><span class="s1"> - Unknown&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">Status</span><span class="p">)</span>
    <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Received Echo Response (Status: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">status_str</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_recv_c_store_rq</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when a C-STORE-RQ is received.</span>

<span class="sd">    **C-STORE Request Elements**</span>

<span class="sd">    | (M) Message ID</span>
<span class="sd">    | (M) Affected SOP Class UID</span>
<span class="sd">    | (M) Affected SOP Instance UID</span>
<span class="sd">    | (M) Priority</span>
<span class="sd">    | (U) Move Originator Application Entity Title</span>
<span class="sd">    | (U) Move Originator Message ID</span>
<span class="sd">    | (M) Data Set</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_RECV event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">command_set</span>

    <span class="n">priority_str</span> <span class="o">=</span> <span class="p">{</span><span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;Low&#39;</span><span class="p">,</span>
                    <span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;Medium&#39;</span><span class="p">,</span>
                    <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;High&#39;</span><span class="p">}</span>
    <span class="n">priority</span> <span class="o">=</span> <span class="n">priority_str</span><span class="p">[</span><span class="n">cs</span><span class="o">.</span><span class="n">Priority</span><span class="p">]</span>

    <span class="n">dataset</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span> <span class="ow">and</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">dataset</span> <span class="o">=</span> <span class="s1">&#39;Present&#39;</span>

    <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Received Store Request&#39;</span><span class="p">)</span>

    <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; INCOMING DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message Type                  : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;C-STORE RQ&#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Presentation Context ID       : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">context_id</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message ID                    : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">MessageID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Class UID        : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPClassUID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Instance UID     : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPInstanceUID</span><span class="p">))</span>
    <span class="k">if</span> <span class="s1">&#39;MoveOriginatorApplicationEntityTitle&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Move Originator               : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">MoveOriginatorApplicationEntityTitle</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Data Set                      : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dataset</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Priority                      : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">priority</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_recv_c_store_rsp</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when a C-STORE-RSP is received.</span>

<span class="sd">    **C-STORE Response Elements**</span>

<span class="sd">    | (U) Message ID</span>
<span class="sd">    | (M) Message ID Being Responded To</span>
<span class="sd">    | (U) Affected SOP Class UID</span>
<span class="sd">    | (U) Affected SOP Instance UID</span>
<span class="sd">    | (M) Status</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_RECV event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">command_set</span>

    <span class="c1"># See PS3.4 Annex B.2.3 for Storage Service Class Statuses</span>
    <span class="n">status_str</span> <span class="o">=</span> <span class="s1">&#39;0x</span><span class="si">{0:04x}</span><span class="s1"> - Unknown&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">Status</span><span class="p">)</span>
    <span class="c1"># Try and get the status from the affected SOP class UID</span>
    <span class="k">if</span> <span class="s1">&#39;AffectedSOPClassUID&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">service_class</span> <span class="o">=</span> <span class="n">uid_to_service_class</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPClassUID</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">cs</span><span class="o">.</span><span class="n">Status</span> <span class="ow">in</span> <span class="n">service_class</span><span class="o">.</span><span class="n">statuses</span><span class="p">:</span>
                <span class="n">status</span> <span class="o">=</span> <span class="n">service_class</span><span class="o">.</span><span class="n">statuses</span><span class="p">[</span><span class="n">cs</span><span class="o">.</span><span class="n">Status</span><span class="p">]</span>
                <span class="n">status_str</span> <span class="o">=</span> <span class="s1">&#39;0x</span><span class="si">{0:04x}</span><span class="s1"> - </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">Status</span><span class="p">,</span> <span class="n">status</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="n">status_str</span> <span class="o">=</span> <span class="s1">&#39;0x</span><span class="si">{0:04x}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">Status</span><span class="p">)</span>

    <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Received Store Response&#39;</span><span class="p">)</span>
    <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; INCOMING DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message Type                  : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;C-STORE RSP&#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Presentation Context ID       : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">context_id</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message ID Being Responded To : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">MessageIDBeingRespondedTo</span><span class="p">))</span>
    <span class="k">if</span> <span class="s1">&#39;AffectedSOPClassUID&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Class UID        : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPClassUID</span><span class="p">))</span>
    <span class="k">if</span> <span class="s1">&#39;AffectedSOPInstanceUID&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Instance UID     : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPInstanceUID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;DIMSE Status                  : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">status_str</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END DIMSE MESSAGE &#39;</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_recv_c_find_rq</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when a C-FIND-RQ is received.</span>

<span class="sd">    **C-FIND Request Parameters**</span>

<span class="sd">    | (M) Message ID</span>
<span class="sd">    | (M) Affected SOP Class UID</span>
<span class="sd">    | (M) Priority</span>
<span class="sd">    | (M) Identifier</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_RECV event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">command_set</span>

    <span class="n">priority_str</span> <span class="o">=</span> <span class="p">{</span><span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;Low&#39;</span><span class="p">,</span>
                    <span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;Medium&#39;</span><span class="p">,</span>
                    <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;High&#39;</span><span class="p">}</span>
    <span class="n">priority</span> <span class="o">=</span> <span class="n">priority_str</span><span class="p">[</span><span class="n">cs</span><span class="o">.</span><span class="n">Priority</span><span class="p">]</span>

    <span class="n">dataset</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span> <span class="ow">and</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">dataset</span> <span class="o">=</span> <span class="s1">&#39;Present&#39;</span>

    <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; INCOMING DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message Type                  : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;C-FIND RQ&#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message ID                    : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">MessageID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Class UID        : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPClassUID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Identifier                    : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dataset</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Priority                      : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">priority</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END DIMSE MESSAGE &#39;</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_recv_c_find_rsp</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when a C-FIND-RSP is received.</span>

<span class="sd">    **C-FIND Response Parameters**</span>

<span class="sd">    | (U) Message ID</span>
<span class="sd">    | (M) Message ID Being Responded To</span>
<span class="sd">    | (U) Affected SOP Class UID</span>
<span class="sd">    | (C) Identifier</span>
<span class="sd">    | (M) Status</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_RECV event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">command_set</span>
    <span class="k">if</span> <span class="n">cs</span><span class="o">.</span><span class="n">Status</span> <span class="o">!=</span> <span class="mh">0x0000</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="n">dataset</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span> <span class="ow">and</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">dataset</span> <span class="o">=</span> <span class="s1">&#39;Present&#39;</span>

    <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; INCOMING DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message Type                  : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;C-FIND RSP&#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message ID Being Responded To : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">MessageIDBeingRespondedTo</span><span class="p">))</span>
    <span class="k">if</span> <span class="s1">&#39;AffectedSOPClassUID&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Class UID        : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPClassUID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Identifier                    : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dataset</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;DIMSE Status                  : 0x</span><span class="si">{0:04x}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">Status</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END DIMSE MESSAGE &#39;</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_recv_c_cancel_rq</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when a C-CANCEL-RQ is received.</span>

<span class="sd">    Covers C-CANCEL-FIND-RQ, C-CANCEL-GET-RQ and C-CANCEL-MOVE-RQ</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_RECV event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">command_set</span>

    <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; INCOMING DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message Type                  : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;C-CANCEL RQ&#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message ID Being Responded To : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">MessageIDBeingRespondedTo</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END DIMSE MESSAGE &#39;</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_recv_c_get_rq</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when a C-GET-RQ is received.</span>

<span class="sd">    **C-GET Request Parameters**</span>

<span class="sd">    | (M) Message ID</span>
<span class="sd">    | (M) Affected SOP Class UID</span>
<span class="sd">    | (M) Priority</span>
<span class="sd">    | (M) Identifier</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_RECV event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">command_set</span>

    <span class="n">priority_str</span> <span class="o">=</span> <span class="p">{</span><span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;Low&#39;</span><span class="p">,</span>
                    <span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;Medium&#39;</span><span class="p">,</span>
                    <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;High&#39;</span><span class="p">}</span>
    <span class="n">priority</span> <span class="o">=</span> <span class="n">priority_str</span><span class="p">[</span><span class="n">cs</span><span class="o">.</span><span class="n">Priority</span><span class="p">]</span>

    <span class="n">dataset</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span> <span class="ow">and</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">dataset</span> <span class="o">=</span> <span class="s1">&#39;Present&#39;</span>

    <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; INCOMING DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message Type                  : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;C-GET RQ&#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message ID                    : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">MessageID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Class UID        : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPClassUID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Identifier                    : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dataset</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Priority                      : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">priority</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END DIMSE MESSAGE &#39;</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_recv_c_get_rsp</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when a C-GET-RSP is received.</span>

<span class="sd">    **C-GET Response Parameters**</span>

<span class="sd">    | (U) Message ID</span>
<span class="sd">    | (M) Message ID Being Responded To</span>
<span class="sd">    | (U) Affected SOP Class UID</span>
<span class="sd">    | (U) Identifier</span>
<span class="sd">    | (M) Status</span>
<span class="sd">    | (C) Number of Remaining Sub-operations</span>
<span class="sd">    | (C) Number of Completed Sub-operations</span>
<span class="sd">    | (C) Number of Failed Sub-operations</span>
<span class="sd">    | (C) Number of Warning Sub-operations</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_RECV event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">command_set</span>

    <span class="n">dataset</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span> <span class="ow">and</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">dataset</span> <span class="o">=</span> <span class="s1">&#39;Present&#39;</span>

    <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; INCOMING DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message Type                  : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;C-GET RSP&#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Presentation Context ID       : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">context_id</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message ID Being Responded To : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">MessageIDBeingRespondedTo</span><span class="p">))</span>
    <span class="k">if</span> <span class="s1">&#39;AffectedSOPClassUID&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Class UID        : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPClassUID</span><span class="p">))</span>
    <span class="k">if</span> <span class="s1">&#39;NumberOfRemainingSuboperations&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Remaining Sub-operations      : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">NumberOfRemainingSuboperations</span><span class="p">))</span>
    <span class="k">if</span> <span class="s1">&#39;NumberOfCompletedSuboperations&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Completed Sub-operations      : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">NumberOfCompletedSuboperations</span><span class="p">))</span>
    <span class="k">if</span> <span class="s1">&#39;NumberOfFailedSuboperations&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Failed Sub-operations         : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">NumberOfFailedSuboperations</span><span class="p">))</span>
    <span class="k">if</span> <span class="s1">&#39;NumberOfWarningSuboperations&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Warning Sub-operations        : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">NumberOfWarningSuboperations</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Identifier                    : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dataset</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;DIMSE Status                  : 0x</span><span class="si">{0:04x}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">Status</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END DIMSE MESSAGE &#39;</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_recv_c_move_rq</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when a C-MOVE-RQ is received.</span>

<span class="sd">    **C-MOVE Request Parameters**</span>

<span class="sd">    | (M) Message ID</span>
<span class="sd">    | (M) Affected SOP Class UID</span>
<span class="sd">    | (M) Priority</span>
<span class="sd">    | (M) Move Destination</span>
<span class="sd">    | (M) Identifier</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_RECV event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">_recv_c_move_rsp</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when a C-MOVE-RSP is received.</span>

<span class="sd">    **C-MOVE Response Parameters**</span>

<span class="sd">    | (U) Message ID</span>
<span class="sd">    | (M) Message ID Being Responded To</span>
<span class="sd">    | (U) Affected SOP Class UID</span>
<span class="sd">    | (U) Identifier</span>
<span class="sd">    | (M) Status</span>
<span class="sd">    | (C) Number of Remaining Sub-operations</span>
<span class="sd">    | (C) Number of Completed Sub-operations</span>
<span class="sd">    | (C) Number of Failed Sub-operations</span>
<span class="sd">    | (C) Number of Warning Sub-operations</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_RECV event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">command_set</span>

    <span class="n">identifier</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span> <span class="ow">and</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">identifier</span> <span class="o">=</span> <span class="s1">&#39;Present&#39;</span>

    <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; INCOMING DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message Type                  : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;C-MOVE RSP&#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message ID Being Responded To : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">MessageIDBeingRespondedTo</span><span class="p">))</span>
    <span class="k">if</span> <span class="s1">&#39;AffectedSOPClassUID&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Class UID        : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPClassUID</span><span class="p">))</span>
    <span class="k">if</span> <span class="s1">&#39;NumberOfRemainingSuboperations&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Remaining Sub-operations      : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">NumberOfRemainingSuboperations</span><span class="p">))</span>
    <span class="k">if</span> <span class="s1">&#39;NumberOfCompletedSuboperations&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Completed Sub-operations      : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">NumberOfCompletedSuboperations</span><span class="p">))</span>
    <span class="k">if</span> <span class="s1">&#39;NumberOfFailedSuboperations&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Failed Sub-operations         : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">NumberOfFailedSuboperations</span><span class="p">))</span>
    <span class="k">if</span> <span class="s1">&#39;NumberOfWarningSuboperations&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Warning Sub-operations        : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">NumberOfWarningSuboperations</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Identifier                    : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">identifier</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;DIMSE Status                  : 0x</span><span class="si">{0:04x}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">Status</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END DIMSE MESSAGE &#39;</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_send_n_event_report_rq</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when an N-EVENT-REPORT-RQ is sent.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_SENT event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">command_set</span>

    <span class="n">evt_info</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span> <span class="ow">and</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">evt_info</span> <span class="o">=</span> <span class="s1">&#39;Present&#39;</span>

    <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; OUTGOING DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message Type                  : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;N-EVENT-REPORT RQ&#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message ID                    : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">MessageID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Class UID        : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPClassUID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Instance UID     : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPInstanceUID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Event Type ID                 : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">EventTypeID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Event Information             : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">evt_info</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_send_n_event_report_rsp</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when an N-EVENT-REPORT-RSP is sent.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_SENT event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">command_set</span>

    <span class="n">evt_reply</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span> <span class="ow">and</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">evt_reply</span> <span class="o">=</span> <span class="s1">&#39;Present&#39;</span>

    <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; OUTGOING DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message Type                  : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;N-EVENT-REPORT RSP&#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message ID Being Responded To : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">MessageIDBeingRespondedTo</span><span class="p">))</span>
    <span class="k">if</span> <span class="s1">&#39;AffectedSOPClassUID&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Class UID        : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPClassUID</span><span class="p">))</span>
    <span class="k">if</span> <span class="s1">&#39;AffectedSOPInstanceUID&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Instance UID     : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPInstanceUID</span><span class="p">))</span>
    <span class="k">if</span> <span class="s1">&#39;EventTypeID&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="s1">&#39;Event Type ID                 : </span><span class="si">{!s}</span><span class="s1">&#39;</span>
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">EventTypeID</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Event Reply                   : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">evt_reply</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Status                        : 0x</span><span class="si">{0:04x}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">Status</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_send_n_get_rq</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when an N-GET-RQ is sent.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_SENT event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">command_set</span>

    <span class="n">nr_attr</span> <span class="o">=</span> <span class="s1">&#39;no identifiers&#39;</span>
    <span class="k">if</span> <span class="s1">&#39;AttributeIdentifierList&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">nr_attr</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AttributeIdentifierList</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">nr_attr</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">nr_attr</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> Attribute Tag&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">nr_attr</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">nr_attr</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> Attribute Tags&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">nr_attr</span><span class="p">)</span>

    <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; OUTGOING DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message Type                  : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;N-GET RQ&#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message ID                    : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">MessageID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Requested SOP Class UID       : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">RequestedSOPClassUID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Requested SOP Instance UID    : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">RequestedSOPInstanceUID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Attribute Identifier List     : (</span><span class="si">{0!s}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">nr_attr</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_send_n_get_rsp</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when an N-GET-RSP is sent.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_SENT event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">command_set</span>

    <span class="n">attr_list</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span> <span class="ow">and</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">attr_list</span> <span class="o">=</span> <span class="s1">&#39;Present&#39;</span>

    <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; OUTGOING DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message Type                  : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;N-GET RSP&#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message ID Being Responded To : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">MessageIDBeingRespondedTo</span><span class="p">))</span>
    <span class="k">if</span> <span class="s1">&#39;AffectedSOPClassUID&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Class UID        : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPClassUID</span><span class="p">))</span>
    <span class="k">if</span> <span class="s1">&#39;AffectedSOPInstanceUID&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Instance UID     : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPInstanceUID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Attribute List                : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">attr_list</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Status                        : 0x</span><span class="si">{0:04x}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">Status</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_send_n_set_rq</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when an N-SET-RQ is sent.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_SENT event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">command_set</span>

    <span class="n">mod_list</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span> <span class="ow">and</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">mod_list</span> <span class="o">=</span> <span class="s1">&#39;Present&#39;</span>

    <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; OUTGOING DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message Type                  : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;N-SET RQ&#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message ID                    : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">MessageID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Requested SOP Class UID       : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">RequestedSOPClassUID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Requested SOP Instance UID    : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">RequestedSOPInstanceUID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Modification List             : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mod_list</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_send_n_set_rsp</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when an N-SET-RSP is sent.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_SENT event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">command_set</span>

    <span class="n">attr_list</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span> <span class="ow">and</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">attr_list</span> <span class="o">=</span> <span class="s1">&#39;Present&#39;</span>

    <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; OUTGOING DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message Type                  : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;N-SET RSP&#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message ID Being Responded To : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">MessageIDBeingRespondedTo</span><span class="p">))</span>
    <span class="k">if</span> <span class="s1">&#39;AffectedSOPClassUID&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Class UID        : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPClassUID</span><span class="p">))</span>
    <span class="k">if</span> <span class="s1">&#39;AffectedSOPInstanceUID&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Instance UID     : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPInstanceUID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Attribute List                : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">attr_list</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Status                        : 0x</span><span class="si">{0:04x}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">Status</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_send_n_action_rq</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when an N-ACTION-RQ is sent.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_SENT event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">_send_n_action_rsp</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when an N-ACTION-RSP is sent.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_SENT event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">_send_n_create_rq</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when an N-CREATE-RQ is sent.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_SENT event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">_send_n_create_rsp</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when an N-CREATE-RSP is sent.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_SENT event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">_send_n_delete_rq</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when an N-DELETE-RQ is sent.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_SENT event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">command_set</span>

    <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; OUTGOING DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message Type                  : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;N-DELETE RQ&#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message ID                    : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">MessageID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Requested SOP Class UID       : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">RequestedSOPClassUID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Requested SOP Instance UID    : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">RequestedSOPInstanceUID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_send_n_delete_rsp</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when an N-DELETE-RSP is sent.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_SENT event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">command_set</span>

    <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; OUTGOING DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message Type                  : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;N-DELETE RSP&#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message ID Being Responded To : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">MessageIDBeingRespondedTo</span><span class="p">))</span>
    <span class="k">if</span> <span class="s1">&#39;AffectedSOPClassUID&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Class UID        : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPClassUID</span><span class="p">))</span>
    <span class="k">if</span> <span class="s1">&#39;AffectedSOPInstanceUID&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Instance UID     : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPInstanceUID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Status                        : 0x</span><span class="si">{0:04x}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">Status</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_recv_n_event_report_rq</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when an N-EVENT-REPORT-RQ is received.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_RECV event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">_recv_n_event_report_rsp</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when an N-EVENT-REPORT-RSP is received.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_RECV event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">_recv_n_get_rq</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when an N-GET-RQ is received.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_RECV event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">_recv_n_get_rsp</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when an N-GET-RSP is received.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_RECV event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">command_set</span>

    <span class="n">dataset</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span> <span class="ow">and</span> <span class="n">msg</span><span class="o">.</span><span class="n">data_set</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">dataset</span> <span class="o">=</span> <span class="s1">&#39;Present&#39;</span>

    <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Received Get Response&#39;</span><span class="p">)</span>
    <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; INCOMING DIMSE MESSAGE &#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message Type                  : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;N-GET RSP&#39;</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Presentation Context ID       : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">context_id</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Message ID Being Responded To : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">MessageIDBeingRespondedTo</span><span class="p">))</span>
    <span class="k">if</span> <span class="s1">&#39;AffectedSOPClassUID&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Class UID        : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPClassUID</span><span class="p">))</span>
    <span class="k">if</span> <span class="s1">&#39;AffectedSOPInstanceUID&#39;</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Affected SOP Instance UID     : </span><span class="si">{0!s}</span><span class="s1">&#39;</span>
                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">AffectedSOPInstanceUID</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Attribute List                : </span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dataset</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Status                        : 0x</span><span class="si">{0:04x}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">Status</span><span class="p">))</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:=^76}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; END DIMSE MESSAGE &#39;</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_recv_n_set_rq</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when an N-SET-RQ is received.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_RECV event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">_recv_n_set_rsp</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when an N-SET-RSP is received.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_RECV event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">_recv_n_action_rq</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when an N-ACTION-RQ is received.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_RECV event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">_recv_n_action_rsp</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when an N-ACTION-RSP is received.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_RECV event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">_recv_n_create_rq</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when an N-CREATE-RQ is received.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_RECV event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">_recv_n_create_rsp</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when an N-CREATE-RSP is received.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_RECV event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">_recv_n_delete_rq</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when an N-DELETE-RQ is received.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_RECV event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">_recv_n_delete_rsp</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Logging handler when an N-DELETE-RSP is received.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The evt.EVT_DIMSE_RECV event that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>


<span class="c1"># Example handlers used for the documentation</span>
<span class="c1"># Intervention event handler documentation</span>
<div class="viewcode-block" id="doc_handle_echo"><a class="viewcode-back" href="../../reference/generated/pynetdicom._handlers.doc_handle_echo.html#pynetdicom._handlers.doc_handle_echo">[docs]</a><span class="k">def</span> <span class="nf">doc_handle_echo</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Documentation for handlers bound to ``evt.EVT_C_ECHO``.</span>

<span class="sd">    User implementation of this event handler is optional. If a handler is</span>
<span class="sd">    not implemented and bound to ``evt.EVT_C_ECHO`` then the C-ECHO request</span>
<span class="sd">    will be responded to using a  *Status* value of ``0x0000`` - Success.</span>

<span class="sd">    **Event**</span>

<span class="sd">    `evt.EVT_C_ECHO`</span>

<span class="sd">    **Supported Service Classes**</span>

<span class="sd">    * *Verification Service Class*</span>

<span class="sd">    **Status**</span>

<span class="sd">    Success</span>
<span class="sd">      | ``0x0000`` Success</span>

<span class="sd">    Failure</span>
<span class="sd">      | ``0x0122`` Refused: SOP Class Not Supported</span>
<span class="sd">      | ``0x0210`` Refused: Duplicate Invocation</span>
<span class="sd">      | ``0x0211`` Refused: Unrecognised Operation</span>
<span class="sd">      | ``0x0212`` Refused: Mistyped Argument</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The event representing a service class receiving a C-ECHO</span>
<span class="sd">        request message. ``Event`` attributes are:</span>

<span class="sd">        * ``assoc`` : the</span>
<span class="sd">          :py:class:`association &lt;pynetdicom.association.Association&gt;`</span>
<span class="sd">          that is running the DICOM service that received the C-ECHO request.</span>
<span class="sd">        * ``context`` : the presentation context the request was sent under</span>
<span class="sd">          as a ``presentation.PresentationContextTuple``.</span>
<span class="sd">        * ``description`` : a description of the event that occurred as str.</span>
<span class="sd">        * ``name`` : the name of the event that occurred as str.</span>
<span class="sd">        * ``request`` : the received</span>
<span class="sd">          :py:class:`C-ECHO request &lt;pynetdicom.dimse_primitives.C_ECHO&gt;`</span>
<span class="sd">        * ``timestamp`` : the</span>
<span class="sd">          `date and time &lt;https://docs.python.org/3/library/datetime.html#datetime-objects&gt;`_</span>
<span class="sd">          that the C-ECHO request was processed by the service.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    status : pydicom.dataset.Dataset or int</span>
<span class="sd">        The status returned to the peer AE in the C-ECHO response. Must be</span>
<span class="sd">        a valid C-ECHO status value for the applicable Service Class as</span>
<span class="sd">        either an ``int`` or a ``Dataset`` object containing (at a minimum)</span>
<span class="sd">        a (0000,0900) *Status* element. If returning a ``Dataset`` object</span>
<span class="sd">        then it may also contain optional elements related to the *Status*</span>
<span class="sd">        (as in the DICOM Standard Part 7, Annex C).</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>

<span class="sd">    :py:meth:`send_c_echo() &lt;pynetdicom.association.Association.send_c_echo&gt;`</span>
<span class="sd">    :py:class:`C_ECHO&lt;pynetdicom.dimse_primitives.C_ECHO&gt;`</span>
<span class="sd">    :py:class:`VerificationServiceClass&lt;pynetdicom.service_class.VerificationServiceClass&gt;`</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>

<span class="sd">    * DICOM Standard Part 4, `Annex A &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_A&gt;`_</span>
<span class="sd">    * DICOM Standard Part 7, Sections</span>
<span class="sd">      `9.1.5 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part07.html#sect_9.1.5&gt;`_,</span>
<span class="sd">      `9.3.5 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part07.html#sect_9.3.5&gt;`_</span>
<span class="sd">      and `Annex C &lt;http://dicom.nema.org/medical/dicom/current/output/html/part07.html#chapter_C&gt;`_</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="doc_handle_find"><a class="viewcode-back" href="../../reference/generated/pynetdicom._handlers.doc_handle_find.html#pynetdicom._handlers.doc_handle_find">[docs]</a><span class="k">def</span> <span class="nf">doc_handle_find</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Documentation for handlers bound to ``evt.EVT_C_FIND``.</span>

<span class="sd">    User implementation of this event handler is required if one or more</span>
<span class="sd">    services that use C-FIND are to be supported. If a handler is</span>
<span class="sd">    not implemented and bound to ``evt.EVT_C_FIND`` then the C-FIND request</span>
<span class="sd">    will be responded to using a  *Status* value of ``0xC311`` - Failure.</span>

<span class="sd">    Yields ``(status, identifier)`` pairs, where *status* is either an</span>
<span class="sd">    ``int`` or pydicom ``Dataset`` containing a (0000,0900) *Status*</span>
<span class="sd">    element and *identifier* is a C-FIND *Identifier* ``Dataset``.</span>

<span class="sd">    **Event**</span>

<span class="sd">    ``evt.EVT_C_FIND``</span>

<span class="sd">    **Supported Service Classes**</span>

<span class="sd">    * *Query/Retrieve Service Class*</span>
<span class="sd">    * *Basic Worklist Management Service*</span>
<span class="sd">    * *Relevant Patient Information Query Service*</span>
<span class="sd">    * *Substance Administration Query Service*</span>
<span class="sd">    * *Hanging Protocol Query/Retrieve Service*</span>
<span class="sd">    * *Defined Procedure Protocol Query/Retrieve Service*</span>
<span class="sd">    * *Color Palette Query/Retrieve Service*</span>
<span class="sd">    * *Implant Template Query/Retrieve Service*</span>

<span class="sd">    **Status**</span>

<span class="sd">    Success</span>
<span class="sd">      | ``0x0000`` Success</span>

<span class="sd">    Failure</span>
<span class="sd">      | ``0xA700`` Out of resources</span>
<span class="sd">      | ``0xA900`` Identifier does not match SOP class</span>
<span class="sd">      | ``0xC000`` to ``0xCFFF`` Unable to process</span>

<span class="sd">    Cancel</span>
<span class="sd">      | ``0xFE00`` Matching terminated due to Cancel request</span>

<span class="sd">    Pending</span>
<span class="sd">      | ``0xFF00`` Matches are continuing: current match is supplied and</span>
<span class="sd">         any Optional Keys were supported in the same manner as Required</span>
<span class="sd">         Keys</span>
<span class="sd">      | ``0xFF01`` Matches are continuing: warning that one or more Optional</span>
<span class="sd">        Keys were not supported for existence and/or matching for this</span>
<span class="sd">        Identifier</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The event representing a service class receiving a C-FIND</span>
<span class="sd">        request message. ``Event`` attributes are:</span>

<span class="sd">        * ``assoc`` : the</span>
<span class="sd">          :py:class:`association &lt;pynetdicom.association.Association&gt;`</span>
<span class="sd">          that is running the service that received the C-FIND request.</span>
<span class="sd">        * ``context`` : the presentation context the request was sent under</span>
<span class="sd">          as a ``presentation.PresentationContextTuple``.</span>
<span class="sd">        * ``description`` : a description of the event that occurred as str.</span>
<span class="sd">        * ``name`` : the name of the event that occurred as str.</span>
<span class="sd">        * ``request`` : the received</span>
<span class="sd">          :py:class:`C-FIND request &lt;pynetdicom.dimse_primitives.C_FIND&gt;`</span>
<span class="sd">        * ``timestamp`` : the</span>
<span class="sd">          `date and time &lt;https://docs.python.org/3/library/datetime.html#datetime-objects&gt;`_</span>
<span class="sd">          that the C-FIND request was processed by the service.</span>

<span class="sd">        Event properties are:</span>

<span class="sd">        * ``identifier`` : the decoded</span>
<span class="sd">          :py:class:`Dataset &lt;pydicom.dataset.Dataset&gt;` contained within the</span>
<span class="sd">          C-FIND request&#39;s *Identifier* parameter. Because *pydicom* uses</span>
<span class="sd">          a deferred read when decoding data, if the decode fails the returned</span>
<span class="sd">          ``Dataset`` will only raise an exception at the time of use.</span>
<span class="sd">        * ``is_cancelled`` : returns ``True`` if a</span>
<span class="sd">          C-CANCEL request has been received, False otherwise. If a C-CANCEL</span>
<span class="sd">          is received then the handler should ``yield (0xFE00, None)`` and</span>
<span class="sd">          return.</span>

<span class="sd">    Yields</span>
<span class="sd">    ------</span>
<span class="sd">    status : pydicom.dataset.Dataset or int</span>
<span class="sd">        The status returned to the peer AE in the C-FIND response. Must be</span>
<span class="sd">        a valid C-FIND status vuale for the applicable Service Class as</span>
<span class="sd">        either an ``int`` or a ``Dataset`` object containing (at a minimum)</span>
<span class="sd">        a (0000,0900) *Status* element. If returning a ``Dataset`` object then</span>
<span class="sd">        it may also contain optional elements related to the *Status* (as in</span>
<span class="sd">        DICOM Standard Part 7, Annex C).</span>
<span class="sd">    identifier : pydicom.dataset.Dataset or None</span>
<span class="sd">        If the status category is &#39;Pending&#39; then the *Identifier* ``Dataset``</span>
<span class="sd">        for a matching SOP Instance. The exact requirements for the C-FIND</span>
<span class="sd">        response *Identifier* are Service Class specific (see the</span>
<span class="sd">        DICOM Standard, Part 4).</span>

<span class="sd">        If the status category is &#39;Failure&#39; or &#39;Cancel&#39; then yield ``None``.</span>

<span class="sd">        If the status category is &#39;Success&#39; then yield ``None``, however</span>
<span class="sd">        yielding a final &#39;Success&#39; status is not required and will be ignored</span>
<span class="sd">        if necessary.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    :py:meth:`send_c_find()&lt;pynetdicom.association.Association.send_c_find&gt;`</span>
<span class="sd">    :py:class:`C_FIND&lt;pynetdicom.dimse_primitives.C_FIND&gt;`</span>
<span class="sd">    :py:class:`QueryRetrieveServiceClass&lt;pynetdicom.service_class.QueryRetrieveServiceClass&gt;`</span>
<span class="sd">    :py:class:`BasicWorklistManagementServiceClass&lt;pynetdicom.service_class.BasicWorklistManagementServiceClass&gt;`</span>
<span class="sd">    :py:class:`RelevantPatientInformationQueryServiceClass&lt;pynetdicom.service_class.RelevantPatientInformationQueryServiceClass&gt;`</span>
<span class="sd">    :py:class:`SubstanceAdministrationQueryServiceClass&lt;pynetdicom.service_class.SubstanceAdministrationQueryServiceClass&gt;`</span>
<span class="sd">    :py:class:`HangingProtocolQueryRetrieveServiceClass&lt;pynetdicom.service_class.HangingProtocolQueryRetrieveServiceClass&gt;`</span>
<span class="sd">    :py:class:`DefinedProcedureProtocolQueryRetrieveServiceClass&lt;pynetdicom.service_class.DefinedProcedureProtocolQueryRetrieveServiceClass&gt;`</span>
<span class="sd">    :py:class:`ColorPaletteQueryRetrieveServiceClass&lt;pynetdicom.service_class.ColorPaletteQueryRetrieveServiceClass&gt;`</span>
<span class="sd">    :py:class:`ImplantTemplateQueryRetrieveServiceClass&lt;pynetdicom.service_class.ImplantTemplateQueryRetrieveServiceClass&gt;`</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>

<span class="sd">    * DICOM Standard Part 4, Annexes</span>
<span class="sd">      `C &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_C&gt;`_,</span>
<span class="sd">      `K &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_K&gt;`_,</span>
<span class="sd">      `Q &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_Q&gt;`_,</span>
<span class="sd">      `U &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_U&gt;`_,</span>
<span class="sd">      `V &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_V&gt;`_,</span>
<span class="sd">      `X &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_X&gt;`_,</span>
<span class="sd">      `BB &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_BB&gt;`_,</span>
<span class="sd">      `CC &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_CC&gt;`_</span>
<span class="sd">      and `HH &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_HH&gt;`_</span>
<span class="sd">    * DICOM Standard Part 7, Sections</span>
<span class="sd">      `9.1.2 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part07.html#sect_9.1.2&gt;`_,</span>
<span class="sd">      `9.3.2 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part07.html#sect_9.3.2&gt;`_</span>
<span class="sd">      and `Annex C &lt;http://dicom.nema.org/medical/dicom/current/output/html/part07.html#chapter_C&gt;`_</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="doc_handle_c_get"><a class="viewcode-back" href="../../reference/generated/pynetdicom._handlers.doc_handle_c_get.html#pynetdicom._handlers.doc_handle_c_get">[docs]</a><span class="k">def</span> <span class="nf">doc_handle_c_get</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Documentation for handlers bound to ``evt.EVT_C_GET``.</span>

<span class="sd">    User implementation of this event handler is required if one or more</span>
<span class="sd">    services that use C-GET are to be supported. If a handler is</span>
<span class="sd">    not implemented and bound to ``evt.EVT_C_GET`` then the C-GET request</span>
<span class="sd">    will be responded to using a  *Status* value of ``0xC411`` - Failure.</span>

<span class="sd">    Yields an ``int`` containing the total number of C-STORE sub-operations,</span>
<span class="sd">    then yields ``(status, dataset)`` pairs.</span>

<span class="sd">    **Event**</span>

<span class="sd">    ``evt.EVT_C_GET``</span>

<span class="sd">    **Supported Service Classes**</span>

<span class="sd">    * *Query/Retrieve Service Class*</span>
<span class="sd">    * *Hanging Protocol Query/Retrieve Service*</span>
<span class="sd">    * *Defined Procedure Protocol Query/Retrieve Service*</span>
<span class="sd">    * *Color Palette Query/Retrieve Service*</span>
<span class="sd">    * *Implant Template Query/Retrieve Service*</span>

<span class="sd">    **Status**</span>

<span class="sd">    Success</span>
<span class="sd">      | ``0x0000`` Sub-operations complete, no failures or warnings</span>

<span class="sd">    Failure</span>
<span class="sd">      | ``0xA701`` Out of resources: unable to calculate the number of</span>
<span class="sd">        matches</span>
<span class="sd">      | ``0xA702`` Out of resources: unable to perform sub-operations</span>
<span class="sd">      | ``0xA900`` Identifier does not match SOP class</span>
<span class="sd">      | ``0xAA00`` None of the frames requested were found in the SOP</span>
<span class="sd">        instance</span>
<span class="sd">      | ``0xAA01`` Unable to create new object for this SOP class</span>
<span class="sd">      | ``0xAA02`` Unable to extract frames</span>
<span class="sd">      | ``0xAA03`` Time-based request received for a non-time-based</span>
<span class="sd">        original SOP Instance</span>
<span class="sd">      | ``0xAA04`` Invalid request</span>
<span class="sd">      | ``0xC000`` to ``0xCFFF`` Unable to process</span>

<span class="sd">    Cancel</span>
<span class="sd">      | ``0xFE00`` Sub-operations terminated due to Cancel request</span>

<span class="sd">    Warning</span>
<span class="sd">      | ``0xB000`` Sub-operations complete, one or more failures or</span>
<span class="sd">        warnings</span>

<span class="sd">    Pending</span>
<span class="sd">      | ``0xFF00`` Matches are continuing - Current Match is supplied and</span>
<span class="sd">        any Optional Keys were supported in the same manner as Required</span>
<span class="sd">        Keys</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The event representing a service class receiving a C-GET</span>
<span class="sd">        request message. ``Event`` attributes are:</span>

<span class="sd">        * ``assoc`` : the</span>
<span class="sd">          :py:class:`association &lt;pynetdicom.association.Association&gt;`</span>
<span class="sd">          that is running the service that received the C-GET request.</span>
<span class="sd">        * ``context`` : the presentation context the request was sent under</span>
<span class="sd">          as a ``presentation.PresentationContextTuple``.</span>
<span class="sd">        * ``description`` : a description of the event that occurred as str.</span>
<span class="sd">        * ``name`` : the name of the event that occurred as str.</span>
<span class="sd">        * ``request`` : the received</span>
<span class="sd">          :py:class:`C-GET request &lt;pynetdicom.dimse_primitives.C_GET&gt;`</span>
<span class="sd">        * ``timestamp`` : the</span>
<span class="sd">          `date and time &lt;https://docs.python.org/3/library/datetime.html#datetime-objects&gt;`_</span>
<span class="sd">          that the C-GET request was processed by the service.</span>

<span class="sd">        Event properties are:</span>

<span class="sd">        * ``identifier`` : the decoded</span>
<span class="sd">          :py:class:`Dataset &lt;pydicom.dataset.Dataset&gt;` contained within the</span>
<span class="sd">          C-GET request&#39;s *Identifier* parameter. Because *pydicom* uses</span>
<span class="sd">          a deferred read when decoding data, if the decode fails the returned</span>
<span class="sd">          ``Dataset`` will only raise an exception at the time of use.</span>
<span class="sd">        * ``is_cancelled`` : returns ``True`` if a</span>
<span class="sd">          C-CANCEL request has been received, False otherwise. If a C-CANCEL</span>
<span class="sd">          is received then the handler should ``yield (0xFE00, None)`` and</span>
<span class="sd">          return.</span>

<span class="sd">    Yields</span>
<span class="sd">    ------</span>
<span class="sd">    int</span>
<span class="sd">        The first yielded value should be the total number of C-STORE</span>
<span class="sd">        sub-operations necessary to complete the C-GET operation. In other</span>
<span class="sd">        words, this is the number of matching SOP Instances to be sent to</span>
<span class="sd">        the peer.</span>
<span class="sd">    status : pydicom.dataset.Dataset or int</span>
<span class="sd">        The status returned to the peer AE in the C-GET response. Must be a</span>
<span class="sd">        valid C-GET status value for the applicable Service Class as either</span>
<span class="sd">        an ``int`` or a ``Dataset`` object containing (at a minimum) a</span>
<span class="sd">        (0000,0900) *Status* element. If returning a ``Dataset`` object then</span>
<span class="sd">        it may also contain optional elements related to the *Status* (as in</span>
<span class="sd">        DICOM Standard Part 7, Annex C).</span>
<span class="sd">    dataset : pydicom.dataset.Dataset or None</span>
<span class="sd">        If the status category is &#39;Pending&#39; then yield the ``Dataset`` to send</span>
<span class="sd">        to the peer via a C-STORE sub-operation over the current association.</span>

<span class="sd">        If the status category is &#39;Failed&#39;, &#39;Warning&#39; or &#39;Cancel&#39; then yield a</span>
<span class="sd">        ``Dataset`` with a (0008,0058) *Failed SOP Instance UID List*</span>
<span class="sd">        element containing a list of the C-STORE sub-operation SOP Instance</span>
<span class="sd">        UIDs for which the C-GET operation has failed.</span>

<span class="sd">        If the status category is &#39;Success&#39; then yield ``None``, although</span>
<span class="sd">        yielding a final &#39;Success&#39; status is not required and will be ignored</span>
<span class="sd">        if necessary.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    :py:meth:`send_c_get()&lt;pynetdicom.association.Association.send_c_get&gt;`</span>
<span class="sd">    :py:class:`C_GET&lt;pynetdicom.dimse_primitives.C_GET&gt;`</span>
<span class="sd">    :py:class:`QueryRetrieveServiceClass&lt;pynetdicom.service_class.QueryRetrieveServiceClass&gt;`</span>
<span class="sd">    :py:class:`HangingProtocolQueryRetrieveServiceClass&lt;pynetdicom.service_class.HangingProtocolQueryRetrieveServiceClass&gt;`</span>
<span class="sd">    :py:class:`DefinedProcedureProtocolQueryRetrieveServiceClass&lt;pynetdicom.service_class.DefinedProcedureProtocolQueryRetrieveServiceClass&gt;`</span>
<span class="sd">    :py:class:`ColorPaletteQueryRetrieveServiceClass&lt;pynetdicom.service_class.ColorPaletteQueryRetrieveServiceClass&gt;`</span>
<span class="sd">    :py:class:`ImplantTemplateQueryRetrieveServiceClass&lt;pynetdicom.service_class.ImplantTemplateQueryRetrieveServiceClass&gt;`</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>

<span class="sd">    * DICOM Standard Part 4, Annexes</span>
<span class="sd">      `C &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_C&gt;`_,</span>
<span class="sd">      `U &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_U&gt;`_,</span>
<span class="sd">      `X &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_X&gt;`_,</span>
<span class="sd">      `Y &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_Y&gt;`_,</span>
<span class="sd">      `Z &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_Z&gt;`_,</span>
<span class="sd">      `BB &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_BB&gt;`_</span>
<span class="sd">      and `HH &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_HH&gt;`_</span>
<span class="sd">    * DICOM Standard Part 7, Sections</span>
<span class="sd">      `9.1.3 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part07.html#sect_9.1.3&gt;`_,</span>
<span class="sd">      `9.3.3 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part07.html#sect_9.3.3&gt;`_</span>
<span class="sd">      and `Annex C &lt;http://dicom.nema.org/medical/dicom/current/output/html/part07.html#chapter_C&gt;`_</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="doc_handle_move"><a class="viewcode-back" href="../../reference/generated/pynetdicom._handlers.doc_handle_move.html#pynetdicom._handlers.doc_handle_move">[docs]</a><span class="k">def</span> <span class="nf">doc_handle_move</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Documentation for handlers bound to ``evt.EVT_C_MOVE``.</span>

<span class="sd">    User implementation of this event handler is required if one or more</span>
<span class="sd">    services that use C-MOVE are to be supported. If a handler is</span>
<span class="sd">    not implemented and bound to ``evt.EVT_C_MOVE`` then the C-MOVE request</span>
<span class="sd">    will be responded to using a  *Status* value of ``0xC511`` - Failure.</span>

<span class="sd">    The first yield should be the ``(addr, port)`` of the move destination,</span>
<span class="sd">    the second yield the number of required C-STORE sub-operations as an</span>
<span class="sd">    ``int``, and the remaining yields the ``(status, dataset)`` pairs.</span>

<span class="sd">    Matching SOP Instances will be sent to the peer AE with AE title</span>
<span class="sd">    ``move_aet`` over a new association. If ``move_aet`` is unknown then</span>
<span class="sd">    the SCP will send a response with a &#39;Failure&#39; status of ``0xA801``</span>
<span class="sd">    &#39;Move Destination Unknown&#39;.</span>

<span class="sd">    **Event**</span>

<span class="sd">    ``evt.EVT_C_MOVE``</span>

<span class="sd">    **Supported Service Classes**</span>

<span class="sd">    * *Query/Retrieve Service*</span>
<span class="sd">    * *Hanging Protocol Query/Retrieve Service*</span>
<span class="sd">    * *Defined Procedure Protocol Query/Retrieve Service*</span>
<span class="sd">    * *Color Palette Query/Retrieve Service*</span>
<span class="sd">    * *Implant Template Query/Retrieve Service*</span>

<span class="sd">    **Status**</span>

<span class="sd">    Success</span>
<span class="sd">      | ``0x0000`` Sub-operations complete, no failures</span>

<span class="sd">    Pending</span>
<span class="sd">      | ``0xFF00`` Sub-operations are continuing</span>

<span class="sd">    Cancel</span>
<span class="sd">      | ``0xFE00`` Sub-operations terminated due to Cancel indication</span>

<span class="sd">    Failure</span>
<span class="sd">      | ``0x0122`` SOP class not supported</span>
<span class="sd">      | ``0x0124`` Not authorised</span>
<span class="sd">      | ``0x0210`` Duplicate invocation</span>
<span class="sd">      | ``0x0211`` Unrecognised operation</span>
<span class="sd">      | ``0x0212`` Mistyped argument</span>
<span class="sd">      | ``0xA701`` Out of resources: unable to calculate number of matches</span>
<span class="sd">      | ``0xA702`` Out of resources: unable to perform sub-operations</span>
<span class="sd">      | ``0xA801`` Move destination unknown</span>
<span class="sd">      | ``0xA900`` Identifier does not match SOP class</span>
<span class="sd">      | ``0xAA00`` None of the frames requested were found in the SOP</span>
<span class="sd">        instance</span>
<span class="sd">      | ``0xAA01`` Unable to create new object for this SOP class</span>
<span class="sd">      | ``0xAA02`` Unable to extract frames</span>
<span class="sd">      | ``0xAA03`` Time-based request received for a non-time-based</span>
<span class="sd">        original SOP Instance</span>
<span class="sd">      | ``0xAA04`` Invalid request</span>
<span class="sd">      | ``0xC000`` to ``0xCFFF`` Unable to process</span>


<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The event representing a service class receiving a C-MOVE</span>
<span class="sd">        request message. ``Event`` attributes are:</span>

<span class="sd">        * ``assoc`` : the</span>
<span class="sd">          :py:class:`association &lt;pynetdicom.association.Association&gt;`</span>
<span class="sd">          that is running the service that received the C-MOVE request.</span>
<span class="sd">        * ``context`` : the presentation context the request was sent under</span>
<span class="sd">          as a ``presentation.PresentationContextTuple``.</span>
<span class="sd">        * ``description`` : a description of the event that occurred as str.</span>
<span class="sd">        * ``name`` : the name of the event that occurred as str.</span>
<span class="sd">        * ``request`` : the received</span>
<span class="sd">          :py:class:`C-MOVE request &lt;pynetdicom.dimse_primitives.C_MOVE&gt;`</span>
<span class="sd">        * ``timestamp`` : the</span>
<span class="sd">          `date and time &lt;https://docs.python.org/3/library/datetime.html#datetime-objects&gt;`_</span>
<span class="sd">          that the C-MOVE request was processed by the service.</span>

<span class="sd">        Event properties are:</span>

<span class="sd">        * ``identifier`` : the decoded</span>
<span class="sd">          :py:class:`Dataset &lt;pydicom.dataset.Dataset&gt;` contained within the</span>
<span class="sd">          C-MOVE request&#39;s *Identifier* parameter. Because *pydicom* uses</span>
<span class="sd">          a deferred read when decoding data, if the decode fails the returned</span>
<span class="sd">          ``Dataset`` will only raise an exception at the time of use.</span>
<span class="sd">        * ``is_cancelled`` : returns ``True`` if a</span>
<span class="sd">          C-CANCEL request has been received, False otherwise. If a C-CANCEL</span>
<span class="sd">          is received then the handler should yield a ``(0xFE00, None)``</span>
<span class="sd">          status/dataset pair and return.</span>

<span class="sd">    Yields</span>
<span class="sd">    ------</span>
<span class="sd">    addr, port : str, int or None, None</span>
<span class="sd">        The first yield should be the TCP/IP address and port number of the</span>
<span class="sd">        destination AE (if known) or ``(None, None)`` if unknown. If</span>
<span class="sd">        ``(None, None)`` is yielded then the SCP will send a C-MOVE</span>
<span class="sd">        response with a &#39;Failure&#39; Status of ``0xA801`` (move destination</span>
<span class="sd">        unknown), in which case nothing more needs to be yielded.</span>
<span class="sd">    int</span>
<span class="sd">        The second yield should be the number of C-STORE sub-operations</span>
<span class="sd">        required to complete the C-MOVE operation. In other words, this is</span>
<span class="sd">        the number of matching SOP Instances to be sent to the peer.</span>
<span class="sd">    status : pydiom.dataset.Dataset or int</span>
<span class="sd">        The status returned to the peer AE in the C-MOVE response. Must be</span>
<span class="sd">        a valid C-MOVE status value for the applicable Service Class as</span>
<span class="sd">        either an ``int`` or a ``Dataset`` containing (at a minimum) a</span>
<span class="sd">        (0000,0900) *Status* element. If returning a ``Dataset`` then it</span>
<span class="sd">        may also contain optional elements related to the *Status* (as in</span>
<span class="sd">        DICOM Standard Part 7, Annex C).</span>
<span class="sd">    dataset : pydicom.dataset.Dataset or None</span>
<span class="sd">        If the status is &#39;Pending&#39; then yield the ``Dataset``</span>
<span class="sd">        to send to the peer via a C-STORE sub-operation over a new</span>
<span class="sd">        association.</span>

<span class="sd">        If the status is &#39;Failed&#39;, &#39;Warning&#39; or &#39;Cancel&#39; then yield a</span>
<span class="sd">        ``Dataset`` with a (0008,0058) *Failed SOP Instance UID List*</span>
<span class="sd">        element containing the list of the C-STORE sub-operation SOP</span>
<span class="sd">        Instance UIDs for which the C-MOVE operation has failed.</span>

<span class="sd">        If the status is &#39;Success&#39; then yield ``None``, although yielding a</span>
<span class="sd">        final &#39;Success&#39; status is not required and will be ignored if</span>
<span class="sd">        necessary.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    :py:meth:`send_c_move()&lt;pynetdicom.association.Association.send_c_move&gt;`</span>
<span class="sd">    :py:class:`C_MOVE&lt;pynetdicom.dimse_primitives.C_MOVE&gt;`</span>
<span class="sd">    :py:class:`QueryRetrieveServiceClass&lt;pynetdicom.service_class.QueryRetrieveServiceClass&gt;`</span>
<span class="sd">    :py:class:`HangingProtocolQueryRetrieveServiceClass&lt;pynetdicom.service_class.HangingProtocolQueryRetrieveServiceClass&gt;`</span>
<span class="sd">    :py:class:`DefinedProcedureProtocolQueryRetrieveServiceClass&lt;pynetdicom.service_class.DefinedProcedureProtocolQueryRetrieveServiceClass&gt;`</span>
<span class="sd">    :py:class:`ColorPaletteQueryRetrieveServiceClass&lt;pynetdicom.service_class.ColorPaletteQueryRetrieveServiceClass&gt;`</span>
<span class="sd">    :py:class:`ImplantTemplateQueryRetrieveServiceClass&lt;pynetdicom.service_class.ImplantTemplateQueryRetrieveServiceClass&gt;`</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>

<span class="sd">    * DICOM Standard Part 4, Annexes</span>
<span class="sd">      `C &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_C&gt;`_,</span>
<span class="sd">      `U &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_U&gt;`_,</span>
<span class="sd">      `X &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_X&gt;`_,</span>
<span class="sd">      `Y &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_Y&gt;`_,</span>
<span class="sd">      `BB &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_BB&gt;`_</span>
<span class="sd">      and `HH &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_HH&gt;`_</span>
<span class="sd">    * DICOM Standard Part 7, Sections</span>
<span class="sd">      `9.1.4 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part07.html#sect_9.1.4&gt;`_,</span>
<span class="sd">      `9.3.4 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part07.html#sect_9.3.4&gt;`_</span>
<span class="sd">      and `Annex C &lt;http://dicom.nema.org/medical/dicom/current/output/html/part07.html#chapter_C&gt;`_</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="doc_handle_store"><a class="viewcode-back" href="../../reference/generated/pynetdicom._handlers.doc_handle_store.html#pynetdicom._handlers.doc_handle_store">[docs]</a><span class="k">def</span> <span class="nf">doc_handle_store</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Documentation for handlers bound to ``evt.EVT_C_STORE``.</span>

<span class="sd">    User implementation of this event handler is required if one or more</span>
<span class="sd">    services that use C-STORE are to be supported. If a handler is</span>
<span class="sd">    not implemented and bound to ``evt.EVT_C_STORE`` then the C-STORE request</span>
<span class="sd">    will be responded to using a  *Status* value of ``0xC211`` - Failure.</span>

<span class="sd">    If the user is storing the dataset in the DICOM File Format (as in the</span>
<span class="sd">    DICOM Standard Part 10, Section 7) then they are responsible for adding</span>
<span class="sd">    the DICOM File Meta Information.</span>

<span class="sd">    **Event**</span>

<span class="sd">    ``evt.EVT_C_STORE``</span>

<span class="sd">    **Supported Service Classes**</span>

<span class="sd">    * *Storage Service Class*</span>
<span class="sd">    * *Non-Patient Object Storage Service Class*</span>

<span class="sd">    **Status**</span>

<span class="sd">    Success</span>
<span class="sd">      | ``0x0000`` - Success</span>

<span class="sd">    Warning</span>
<span class="sd">      | ``0xB000`` Coercion of data elements</span>
<span class="sd">      | ``0xB006`` Elements discarded</span>
<span class="sd">      | ``0xB007`` Dataset does not match SOP class</span>

<span class="sd">    Failure</span>
<span class="sd">      | ``0x0117`` Invalid SOP instance</span>
<span class="sd">      | ``0x0122`` SOP class not supported</span>
<span class="sd">      | ``0x0124`` Not authorised</span>
<span class="sd">      | ``0x0210`` Duplicate invocation</span>
<span class="sd">      | ``0x0211`` Unrecognised operation</span>
<span class="sd">      | ``0x0212`` Mistyped argument</span>
<span class="sd">      | ``0xA700`` to ``0xA7FF`` Out of resources</span>
<span class="sd">      | ``0xA900`` to ``0xA9FF`` Dataset does not match SOP class</span>
<span class="sd">      | ``0xC000`` to ``0xCFFF`` Cannot understand</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The event representing a service class receiving a C-STORE</span>
<span class="sd">        request message. ``Event`` attributes are:</span>

<span class="sd">        * ``assoc`` : the</span>
<span class="sd">          :py:class:`association &lt;pynetdicom.association.Association&gt;`</span>
<span class="sd">          that is running the service that received the C-STORE request.</span>
<span class="sd">        * ``context`` : the presentation context the request was sent under</span>
<span class="sd">          as a ``presentation.PresentationContextTuple``.</span>
<span class="sd">        * ``description`` : a description of the event that occurred as str.</span>
<span class="sd">        * ``name`` : the name of the event that occurred as str.</span>
<span class="sd">        * ``request`` : the received</span>
<span class="sd">          :py:class:`C-STORE request &lt;pynetdicom.dimse_primitives.C_STORE&gt;`</span>
<span class="sd">        * ``timestamp`` : the</span>
<span class="sd">          `date and time &lt;https://docs.python.org/3/library/datetime.html#datetime-objects&gt;`_</span>
<span class="sd">          that the C-STORE request was processed by the service.</span>

<span class="sd">        Event properties are:</span>

<span class="sd">        * ``dataset`` : the decoded</span>
<span class="sd">          :py:class:`Dataset &lt;pydicom.dataset.Dataset&gt;` contained within the</span>
<span class="sd">          C-STORE request&#39;s *Data Set* parameter. Because *pydicom* uses</span>
<span class="sd">          a deferred read when decoding data, if the decode fails the returned</span>
<span class="sd">          ``Dataset`` will only raise an exception at the time of use.</span>
<span class="sd">        * ``file_meta`` : a</span>
<span class="sd">          :py:class:`Dataset &lt;pydicom.dataset.Dataset&gt;` containing DICOM</span>
<span class="sd">          conformant File Meta Information that can be used with the decoded</span>
<span class="sd">          dataset when saving to file: `event.dataset.file_meta =</span>
<span class="sd">          event.file_meta`.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    status : pydicom.dataset.Dataset or int</span>
<span class="sd">        The status returned to the requesting AE in the C-STORE response. Must</span>
<span class="sd">        be a valid C-STORE status value for the applicable Service Class as</span>
<span class="sd">        either an ``int`` or a ``Dataset`` object containing (at a</span>
<span class="sd">        minimum) a (0000,0900) *Status* element. If returning a ``Dataset``</span>
<span class="sd">        object then it may also contain optional elements related to the</span>
<span class="sd">        *Status* (as in the DICOM Standard Part 7, Annex C).</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    NotImplementedError</span>
<span class="sd">        If the handler has not been implemented and bound to</span>
<span class="sd">        ``evt.EVT_C_STORE`` by the user.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    :py:meth:`send_c_store()&lt;pynetdicom.association.Association.send_c_store&gt;`</span>
<span class="sd">    :py:class:`C_STORE&lt;pynetdicom.dimse_primitives.C_STORE&gt;`</span>
<span class="sd">    :py:class:`StorageServiceClass&lt;pynetdicom.service_class.StorageServiceClass&gt;`</span>
<span class="sd">    :py:class:`NonPatientObjectStorageServiceClass&lt;pynetdicom.service_class.NonPatientObjectStorageServiceClass&gt;`</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>

<span class="sd">    * DICOM Standard Part 4, Annexes</span>
<span class="sd">      `B &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_B&gt;`_,</span>
<span class="sd">      `AA &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_AA&gt;`_,</span>
<span class="sd">      `FF &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_FF&gt;`_</span>
<span class="sd">      and `GG &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_GG&gt;`_</span>
<span class="sd">    * DICOM Standard Part 7, Sections</span>
<span class="sd">      `9.1.1 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part07.html#sect_9.1.1&gt;`_,</span>
<span class="sd">      `9.3.1 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part07.html#sect_9.3.1&gt;`_</span>
<span class="sd">      and `Annex C &lt;http://dicom.nema.org/medical/dicom/current/output/html/part07.html#chapter_C&gt;`_</span>
<span class="sd">    * DICOM Standard Part 10,</span>
<span class="sd">      `Section 7 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part10.html#chapter_7&gt;`_</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="doc_handle_action"><a class="viewcode-back" href="../../reference/generated/pynetdicom._handlers.doc_handle_action.html#pynetdicom._handlers.doc_handle_action">[docs]</a><span class="k">def</span> <span class="nf">doc_handle_action</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Documentation for handlers bound to ``evt.EVT_N_ACTION``.</span>

<span class="sd">    Use of handlers for ``evt.EVT_N_ACTION`` is not yet supported.</span>

<span class="sd">    User implementation of this event handler is required if one or more</span>
<span class="sd">    services that use N-ACTION are to be supported. If a handler is</span>
<span class="sd">    not implemented and bound to ``evt.EVT_N_ACTION`` then the N-ACTION request</span>
<span class="sd">    will be responded to using a  *Status* value of FIXME.</span>

<span class="sd">    **Event**</span>

<span class="sd">    ``evt.EVT_N_ACTION``</span>

<span class="sd">    **Supported Service Classes**</span>

<span class="sd">    **Status**</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The event representing a service class receiving a N-ACTION</span>
<span class="sd">        request message. ``Event`` attributes are:</span>

<span class="sd">        * ``assoc`` : the</span>
<span class="sd">          :py:class:`association &lt;pynetdicom.association.Association&gt;`</span>
<span class="sd">          that is running the service that received the N-ACTION request.</span>
<span class="sd">        * ``context`` : the presentation context the request was sent under</span>
<span class="sd">          as a ``presentation.PresentationContextTuple``.</span>
<span class="sd">        * ``description`` : a description of the event that occurred as str.</span>
<span class="sd">        * ``name`` : the name of the event that occurred as str.</span>
<span class="sd">        * ``request`` : the received</span>
<span class="sd">          :py:class:`N-ACTION request &lt;pynetdicom.dimse_primitives.N_ACTION&gt;`</span>
<span class="sd">        * ``timestamp`` : the</span>
<span class="sd">          `date and time &lt;https://docs.python.org/3/library/datetime.html#datetime-objects&gt;`_</span>
<span class="sd">          that the N-ACTION request was processed by the service.</span>

<span class="sd">        Event properties are:</span>

<span class="sd">        * ``action_information`` : the decoded</span>
<span class="sd">          :py:class:`Dataset &lt;pydicom.dataset.Dataset&gt;` contained within the</span>
<span class="sd">          N-ACTION request&#39;s *Action Information* parameter. Because *pydicom*</span>
<span class="sd">          uses a deferred read when decoding data, if the decode fails the</span>
<span class="sd">          returned ``Dataset`` will only raise an exception at the time of use.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    status : pydicom.dataset.Dataset or int</span>
<span class="sd">        The status returned to the peer AE in the N-ACTION response. Must be a</span>
<span class="sd">        valid N-ACTION status value for the applicable Service Class as either</span>
<span class="sd">        an ``int`` or a ``Dataset`` object containing (at a minimum) a</span>
<span class="sd">        (0000,0900) *Status* element. If returning a ``Dataset`` object then</span>
<span class="sd">        it may also contain optional elements related to the *Status* (as in</span>
<span class="sd">        DICOM Standard Part 7, Annex C).</span>
<span class="sd">    dataset : pydicom.dataset.Dataset or None</span>
<span class="sd">        If the status category is &#39;Success&#39; or &#39;Warning&#39; then a ``Dataset``</span>
<span class="sd">        containing elements for the response&#39;s *Action Reply*</span>
<span class="sd">        conformant to the specifications in the corresponding Service</span>
<span class="sd">        Class.</span>

<span class="sd">        If the status category is not &#39;Success&#39; or &#39;Warning&#39; then ``None``.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    NotImplementedError</span>
<span class="sd">        If the handler has not been implemented and bound to</span>
<span class="sd">        ``evt.EVT_N_ACTION`` by the user.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    :py:meth:`send_n_action()&lt;pynetdicom.association.Association.send_n_action&gt;`</span>
<span class="sd">    :py:class:`N_ACTION&lt;pynetdicom.dimse_primitives.N_ACTION&gt;`</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    DICOM Standard Part 4, Annexes H, J, P, S, CC and DD</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="doc_handle_create"><a class="viewcode-back" href="../../reference/generated/pynetdicom._handlers.doc_handle_create.html#pynetdicom._handlers.doc_handle_create">[docs]</a><span class="k">def</span> <span class="nf">doc_handle_create</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Documentation for handlers bound to ``evt.EVT_N_CREATE``.</span>

<span class="sd">    User implementation of this event handler is required if one or more</span>
<span class="sd">    services that use N-CREATE are to be supported. If a handler is</span>
<span class="sd">    not implemented and bound to ``evt.EVT_N_CREATE`` then the N-CREATE request</span>
<span class="sd">    will be responded to using a  *Status* value of ``0x0110`` - Processing</span>
<span class="sd">    Failure.</span>

<span class="sd">    Management of the SOP Instances created in response to an N-CREATE request</span>
<span class="sd">    is the responsibility of the user.</span>

<span class="sd">    **Event**</span>

<span class="sd">    ``evt.EVT_N_CREATE``</span>

<span class="sd">    **Supported Service Classes**</span>

<span class="sd">    * *Modality Performed Procedure Step Management*</span>

<span class="sd">    **Status**</span>

<span class="sd">    Success</span>
<span class="sd">      | ``0x0000`` - Success</span>

<span class="sd">    Failure</span>
<span class="sd">      | ``0x0105`` - No such attribute</span>
<span class="sd">      | ``0x0106`` - Invalid attribute value</span>
<span class="sd">      | ``0x0107`` - Attribute list error</span>
<span class="sd">      | ``0x0110`` - Processing failure</span>
<span class="sd">      | ``0x0111`` - Duplicate SOP Instance</span>
<span class="sd">      | ``0x0116`` - Attribute value out of range</span>
<span class="sd">      | ``0x0117`` - Invalid object instance</span>
<span class="sd">      | ``0x0118`` - No such SOP Class</span>
<span class="sd">      | ``0x0120`` - Missing attribute</span>
<span class="sd">      | ``0x0121`` - Missing attribute value</span>
<span class="sd">      | ``0x0124`` - Refused: not authorised</span>
<span class="sd">      | ``0x0210`` - Duplicate invocation</span>
<span class="sd">      | ``0x0211`` - Unrecognised operation</span>
<span class="sd">      | ``0x0212`` - Mistyped argument</span>
<span class="sd">      | ``0x0213`` - Resource limitation</span>
<span class="sd">      | ``0xA510`` - Failed: an initiate media creation action has already been</span>
<span class="sd">        received for this SOP Instance</span>
<span class="sd">      | ``0xC221`` - The Referenced Fraction Group Number does not exist in the</span>
<span class="sd">        referenced plan</span>
<span class="sd">      | ``0xC222`` - No beams exist within the referenced fraction group</span>
<span class="sd">      | ``0xC223`` - SCU already verifying and cannot currently process this</span>
<span class="sd">        request</span>
<span class="sd">      | ``0xC227`` - No such object instance - Referenced RT Plan not found</span>
<span class="sd">      | ``0xC309`` - The provided value of UPS State was not &#39;SCHEDULED&#39;</span>
<span class="sd">      | ``0xC616`` - There is an existing Film Box that has not been</span>
<span class="sd">        printed and N-ACTION at the Film Session level is not supported.</span>
<span class="sd">        A new Film Box will not be created when a previous Film Box has</span>
<span class="sd">        not been printed</span>

<span class="sd">    Warning</span>
<span class="sd">      | ``0xB300`` - THE UPS was created with modifications</span>
<span class="sd">      | ``0xB600`` - Memory allocation not supported</span>
<span class="sd">      | ``0xB605`` - Requested Min Density or Max Density outside of</span>
<span class="sd">        printer&#39;s operating range. The printer will use its respective</span>
<span class="sd">        minimum or maximum density value instead</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The event representing a service class receiving a N-CREATE</span>
<span class="sd">        request message. ``Event`` attributes are:</span>

<span class="sd">        * ``assoc`` : the</span>
<span class="sd">          :py:class:`association &lt;pynetdicom.association.Association&gt;`</span>
<span class="sd">          that is running the service that received the N-CREATE request.</span>
<span class="sd">        * ``context`` : the presentation context the request was sent under</span>
<span class="sd">          as a ``presentation.PresentationContextTuple``.</span>
<span class="sd">        * ``description`` : a description of the event that occurred as str.</span>
<span class="sd">        * ``name`` : the name of the event that occurred as str.</span>
<span class="sd">        * ``request`` : the received</span>
<span class="sd">          :py:class:`N-CREATE request &lt;pynetdicom.dimse_primitives.N_CREATE&gt;`</span>
<span class="sd">        * ``timestamp`` : the</span>
<span class="sd">          `date and time &lt;https://docs.python.org/3/library/datetime.html#datetime-objects&gt;`_</span>
<span class="sd">          that the N-CREATE request was processed by the service.</span>

<span class="sd">        Event properties are:</span>

<span class="sd">        * ``attribute_list`` : the decoded</span>
<span class="sd">          :py:class:`Dataset &lt;pydicom.dataset.Dataset&gt;` contained within the</span>
<span class="sd">          N-CREATE request&#39;s *Attribute List* parameter. Because *pydicom*</span>
<span class="sd">          uses a deferred read when decoding data, if the decode fails the</span>
<span class="sd">          returned ``Dataset`` will only raise an exception at the time of use.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    status : pydicom.dataset.Dataset or int</span>
<span class="sd">        The status returned to the peer AE in the N-CREATE response. Must be a</span>
<span class="sd">        valid N-CREATE status value for the applicable Service Class as either</span>
<span class="sd">        an ``int`` or a ``Dataset`` object containing (at a minimum) a</span>
<span class="sd">        (0000,0900) *Status* element. If returning a ``Dataset`` object then</span>
<span class="sd">        it may also contain optional elements related to the *Status* (as in</span>
<span class="sd">        DICOM Standard Part 7, Annex C).</span>
<span class="sd">    dataset : pydicom.dataset.Dataset or None</span>
<span class="sd">        If the status category is &#39;Success&#39; or &#39;Warning&#39; then a ``Dataset``</span>
<span class="sd">        containing elements of the response&#39;s *Attribute List* conformant to</span>
<span class="sd">        the specifications in the corresponding Service Class.</span>

<span class="sd">        If the status category is not &#39;Success&#39; or &#39;Warning&#39; then ``None``.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    NotImplementedError</span>
<span class="sd">        If the handler has not been implemented and bound to</span>
<span class="sd">        ``evt.EVT_N_CREATE`` by the user.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    :py:meth:`send_n_create()&lt;pynetdicom.association.Association.send_n_create&gt;`</span>
<span class="sd">    :py:class:`N_CREATE&lt;pynetdicom.dimse_primitives.N_CREATE&gt;`</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    DICOM Standard Part 4, Annexes F, H, R, S, CC and DD</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="doc_handle_delete"><a class="viewcode-back" href="../../reference/generated/pynetdicom._handlers.doc_handle_delete.html#pynetdicom._handlers.doc_handle_delete">[docs]</a><span class="k">def</span> <span class="nf">doc_handle_delete</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Documentation for handlers bound to ``evt.EVT_N_DELETE``.</span>

<span class="sd">    Use of handlers for ``evt.EVT_N_DELETE`` is not yet supported.</span>

<span class="sd">    User implementation of this event handler is required if one or more</span>
<span class="sd">    services that use N-DELETE are to be supported. If a handler is</span>
<span class="sd">    not implemented and bound to ``evt.EVT_N_DELETE`` then the N-DELETE request</span>
<span class="sd">    will be responded to using a  *Status* value of FIXME.</span>

<span class="sd">    **Event**</span>

<span class="sd">    ``evt.EVT_N_DELETE``</span>

<span class="sd">    **Supported Service Classes**</span>

<span class="sd">    **Status**</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The event representing a service class receiving a N-DELETE</span>
<span class="sd">        request message. ``Event`` attributes are:</span>

<span class="sd">        * ``assoc`` : the</span>
<span class="sd">          :py:class:`association &lt;pynetdicom.association.Association&gt;`</span>
<span class="sd">          that is running the service that received the N-DELETE request.</span>
<span class="sd">        * ``context`` : the presentation context the request was sent under</span>
<span class="sd">          as a ``presentation.PresentationContextTuple``.</span>
<span class="sd">        * ``description`` : a description of the event that occurred as str.</span>
<span class="sd">        * ``name`` : the name of the event that occurred as str.</span>
<span class="sd">        * ``request`` : the received</span>
<span class="sd">          :py:class:`N-DELETE request &lt;pynetdicom.dimse_primitives.N_DELETE&gt;`</span>
<span class="sd">        * ``timestamp`` : the</span>
<span class="sd">          `date and time &lt;https://docs.python.org/3/library/datetime.html#datetime-objects&gt;`_</span>
<span class="sd">          that the N-DELETE request was processed by the service.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    status : pydicom.dataset.Dataset or int</span>
<span class="sd">        The status returned to the peer AE in the N-DELETE response. Must be a</span>
<span class="sd">        valid N-DELETE status value for the applicable Service Class as either</span>
<span class="sd">        an ``int`` or a ``Dataset`` object containing (at a minimum) a</span>
<span class="sd">        (0000,0900) *Status* element. If returning a ``Dataset`` object then</span>
<span class="sd">        it may also contain optional elements related to the *Status* (as in</span>
<span class="sd">        DICOM Standard Part 7, Annex C).</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    NotImplementedError</span>
<span class="sd">        If the handler has not been implemented and bound to</span>
<span class="sd">        ``evt.EVT_N_DELETE`` by the user.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    :py:meth:`send_n_delete()&lt;pynetdicom.association.Association.send_n_delete&gt;`</span>
<span class="sd">    :py:class:`N_DELETE&lt;pynetdicom.dimse_primitives.N_DELETE&gt;`</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    DICOM Standard Part 4, Annexes H and DD</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="doc_handle_event_report"><a class="viewcode-back" href="../../reference/generated/pynetdicom._handlers.doc_handle_event_report.html#pynetdicom._handlers.doc_handle_event_report">[docs]</a><span class="k">def</span> <span class="nf">doc_handle_event_report</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Documentation for handlers bound to ``evt.EVT_N_EVENT_REPORT``.</span>

<span class="sd">    User implementation of this event handler is required if one or more</span>
<span class="sd">    services that use N-EVENT-REPORT are to be supported. If a handler is</span>
<span class="sd">    not implemented and bound to ``evt.EVT_N_EVENT_REPORT`` then the</span>
<span class="sd">    N-EVENT-REPORT request will be responded to using a  *Status* value</span>
<span class="sd">    of ``0x0110`` - Processing Failure.</span>

<span class="sd">    **Event**</span>

<span class="sd">    ``evt.EVT_N_EVENT_REPORT``</span>

<span class="sd">    **Supported Service Classes**</span>

<span class="sd">    * *Modality Performed Procedure Step Management*</span>

<span class="sd">    **Status**</span>

<span class="sd">    Success</span>
<span class="sd">      | ``0x0000`` Success</span>

<span class="sd">    Failure</span>
<span class="sd">      | ``0x0110`` Processing failure</span>
<span class="sd">      | ``0x0112`` No such SOP Instance</span>
<span class="sd">      | ``0x0113`` No such event type</span>
<span class="sd">      | ``0x0114`` No such argument</span>
<span class="sd">      | ``0x0115`` Invalid argument value</span>
<span class="sd">      | ``0x0117`` Invalid object Instance</span>
<span class="sd">      | ``0x0118`` No such SOP Class</span>
<span class="sd">      | ``0x0119`` Class-Instance conflict</span>
<span class="sd">      | ``0x0210`` Duplicate invocation</span>
<span class="sd">      | ``0x0211`` Unrecognised operation</span>
<span class="sd">      | ``0x0212`` Mistyped argument</span>
<span class="sd">      | ``0x0213`` Resource limitation</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The event representing a service class receiving a N-EVENT-REPORT</span>
<span class="sd">        request message. ``Event`` attributes are:</span>

<span class="sd">        * ``assoc`` : the</span>
<span class="sd">          :py:class:`association &lt;pynetdicom.association.Association&gt;`</span>
<span class="sd">          that is running the service that received the N-EVENT-REPORT request.</span>
<span class="sd">        * ``context`` : the presentation context the request was sent under</span>
<span class="sd">          as a ``presentation.PresentationContextTuple``.</span>
<span class="sd">        * ``description`` : a description of the event that occurred as str.</span>
<span class="sd">        * ``name`` : the name of the event that occurred as str.</span>
<span class="sd">        * ``request`` : the received</span>
<span class="sd">          :py:class:`N-EVENT-REPORT request &lt;pynetdicom.dimse_primitives.N_EVENT_REPORT&gt;`</span>
<span class="sd">        * ``timestamp`` : the</span>
<span class="sd">          `date and time &lt;https://docs.python.org/3/library/datetime.html#datetime-objects&gt;`_</span>
<span class="sd">          that the N-EVENT-REPORT request was processed by the service.</span>

<span class="sd">        Event properties are:</span>

<span class="sd">        * ``event_information`` : the decoded</span>
<span class="sd">          :py:class:`Dataset &lt;pydicom.dataset.Dataset&gt;` contained within the</span>
<span class="sd">          N-EVENT-REPORT request&#39;s *Event Information* parameter. Because</span>
<span class="sd">          *pydicom* uses a deferred read when decoding data, if the decode</span>
<span class="sd">          fails the returned ``Dataset`` will only raise an exception at the</span>
<span class="sd">          time of use.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    status : pydicom.dataset.Dataset or int</span>
<span class="sd">        The status returned to the peer AE in the N-EVENT-REPORT response.</span>
<span class="sd">        Must be a valid N-EVENT-REPORT status value for the applicable Service</span>
<span class="sd">        Class as either an ``int`` or a ``Dataset`` object containing (at a</span>
<span class="sd">        minimum) a (0000,0900) *Status* element. If returning a Dataset</span>
<span class="sd">        object then it may also contain optional elements related to the</span>
<span class="sd">        Status (as in DICOM Standard Part 7, Annex C).</span>
<span class="sd">    dataset : pydicom.dataset.Dataset or None</span>
<span class="sd">        If the status category is &#39;Success&#39; or &#39;Warning&#39; then a ``Dataset``</span>
<span class="sd">        containing elements of the response&#39;s *Event Reply*</span>
<span class="sd">        conformant to the specifications in the corresponding Service</span>
<span class="sd">        Class.</span>

<span class="sd">        If the status category is not &#39;Success&#39; or &#39;Warning&#39; then ``None``.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    NotImplementedError</span>
<span class="sd">        If the handler has not been implemented and bound to</span>
<span class="sd">        ``evt.EVT_N_EVENT_REPORT`` by the user.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    :py:meth:`send_n_event_report()&lt;pynetdicom.association.Association.send_n_event_report&gt;`</span>
<span class="sd">    :py:class:`N_EVENT_REPORT&lt;pynetdicom.dimse_primitives.N_EVENT_REPORT&gt;`</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    DICOM Standard Part 4, Annexes F, H, J, CC and DD</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="doc_handle_n_get"><a class="viewcode-back" href="../../reference/generated/pynetdicom._handlers.doc_handle_n_get.html#pynetdicom._handlers.doc_handle_n_get">[docs]</a><span class="k">def</span> <span class="nf">doc_handle_n_get</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Documentation for handlers bound to ``evt.EVT_N_GET``.</span>

<span class="sd">    User implementation of this event handler is required if one or more</span>
<span class="sd">    services that use N-GET are to be supported. If a handler is</span>
<span class="sd">    not implemented and bound to ``evt.EVT_N_GET`` then the N_GET request</span>
<span class="sd">    will be responded to using a  *Status* value of ``0x0110`` - Processing</span>
<span class="sd">    Failure.</span>

<span class="sd">    **Event**</span>

<span class="sd">    ``evt.EVT_N_GET``</span>

<span class="sd">    **Supported Service Classes**</span>

<span class="sd">    * *Display System Management Service Class*</span>
<span class="sd">    * *Modality Performed Procedure Step Management*</span>

<span class="sd">    **Status**</span>

<span class="sd">    Success</span>
<span class="sd">      | ``0x0000`` - Success</span>

<span class="sd">    Failure</span>
<span class="sd">      | ``0x0107`` - Attribute list error</span>
<span class="sd">      | ``0x0110`` - Processing failure</span>
<span class="sd">      | ``0x0112`` - No such SOP Instance</span>
<span class="sd">      | ``0x0117`` - Invalid object Instance</span>
<span class="sd">      | ``0x0118`` - No such SOP Class</span>
<span class="sd">      | ``0x0119`` - Class-Instance conflict</span>
<span class="sd">      | ``0x0124`` - Not authorised</span>
<span class="sd">      | ``0x0210`` - Duplicate invocation</span>
<span class="sd">      | ``0x0211`` - Unrecognised operation</span>
<span class="sd">      | ``0x0212`` - Mistyped argument</span>
<span class="sd">      | ``0x0213`` - Resource limitation</span>
<span class="sd">      | ``0xC112`` - Applicable Machine Verification Instance not found</span>
<span class="sd">      | ``0xC307`` - Specified SOP Instance UID doesn&#39;t exist or is not</span>
<span class="sd">        a UPS Instance managed by this SCP</span>

<span class="sd">    Warning</span>
<span class="sd">      | ``0x0001`` - Requested optional Attributes are not supported</span>
<span class="sd">      | ``0x0107`` Attribute list error</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The event representing a service class receiving an N-GET</span>
<span class="sd">        request message. ``Event`` attributes are:</span>

<span class="sd">        * ``assoc`` : the</span>
<span class="sd">          :py:class:`association &lt;pynetdicom.association.Association&gt;`</span>
<span class="sd">          that is running the service that received the N-GET request.</span>
<span class="sd">        * ``context`` : the presentation context the request was sent under</span>
<span class="sd">          as a ``presentation.PresentationContextTuple``.</span>
<span class="sd">        * ``description`` : a description of the event that occurred as str.</span>
<span class="sd">        * ``name`` : the name of the event that occurred as str.</span>
<span class="sd">        * ``request`` : the received</span>
<span class="sd">          :py:class:`N-GET request &lt;pynetdicom.dimse_primitives.N_GET&gt;`</span>
<span class="sd">        * ``timestamp`` : the</span>
<span class="sd">          `date and time &lt;https://docs.python.org/3/library/datetime.html#datetime-objects&gt;`_</span>
<span class="sd">          that the N-GET request was processed by the service.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    status : pydicom.dataset.Dataset or int</span>
<span class="sd">        The status returned to the peer AE in the N-GET response. Must be a</span>
<span class="sd">        valid N-GET status value for the applicable Service Class as either</span>
<span class="sd">        an ``int`` or a ``Dataset`` object containing (at a minimum) a</span>
<span class="sd">        (0000,0900) *Status* element. If returning a ``Dataset`` object then</span>
<span class="sd">        it may also contain optional elements related to the *Status* (as in</span>
<span class="sd">        DICOM Standard Part 7, Annex C).</span>
<span class="sd">    dataset : pydicom.dataset.Dataset or None</span>
<span class="sd">        If the status category is &#39;Success&#39; or &#39;Warning&#39; then a ``Dataset``</span>
<span class="sd">        containing elements matching the request&#39;s *Attribute List*</span>
<span class="sd">        conformant to the specifications in the corresponding Service</span>
<span class="sd">        Class.</span>

<span class="sd">        If the status category is not &#39;Success&#39; or &#39;Warning&#39; then ``None``.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    :py:meth:`send_n_get()&lt;pynetdicom.association.Association.send_n_get&gt;`</span>
<span class="sd">    :py:class:`N_GET&lt;pynetdicom.dimse_primitives.N_GET&gt;`</span>
<span class="sd">    :py:class:`DisplaySystemManagementServiceClass&lt;pynetdicom.service_class_n.DisplaySystemManagementServiceClass&gt;`</span>
<span class="sd">    :py:class:`ModalityPerformedProcedureStepServiceClass&lt;pynetdicom.service_class_n.ModalityPerformedProcedureStepServiceClass&gt;`</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>

<span class="sd">    * DICOM Standart Part 4, `Annex F &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_F&gt;`_</span>
<span class="sd">    * DICOM Standart Part 4, `Annex H &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_H&gt;`_</span>
<span class="sd">    * DICOM Standard Part 4, `Annex S &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_S&gt;`_</span>
<span class="sd">    * DICOM Standard Part 4, `Annex CC &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_CC&gt;`_</span>
<span class="sd">    * DICOM Standard Part 4, `Annex DD &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_DD&gt;`_</span>
<span class="sd">    * DICOM Standard Part 4, `Annex EE &lt;http://dicom.nema.org/medical/dicom/current/output/html/part04.html#chapter_EE&gt;`_</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="doc_handle_set"><a class="viewcode-back" href="../../reference/generated/pynetdicom._handlers.doc_handle_set.html#pynetdicom._handlers.doc_handle_set">[docs]</a><span class="k">def</span> <span class="nf">doc_handle_set</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Documentation for handlers bound to ``evt.EVT_N_SET``.</span>

<span class="sd">    User implementation of this event handler is required if one or more</span>
<span class="sd">    services that use N-SET are to be supported. If a handler is</span>
<span class="sd">    not implemented and bound to ``evt.EVT_N_SET`` then the N-SET request</span>
<span class="sd">    will be responded to using a  *Status* value of ``0x0110`` - Processing</span>
<span class="sd">    Failure.</span>

<span class="sd">    **Event**</span>

<span class="sd">    ``evt.EVT_N_SET``</span>

<span class="sd">    **Supported Service Classes**</span>

<span class="sd">    * *Modality Performed Procedure Step Management*</span>

<span class="sd">    **Status**</span>

<span class="sd">    Success</span>
<span class="sd">      | ``0x0000`` - Success</span>

<span class="sd">    Failure</span>
<span class="sd">      | ``0x0105`` - No such attribute</span>
<span class="sd">      | ``0x0106`` - Invalid attribute value</span>
<span class="sd">      | ``0x0110`` - Processing failure</span>
<span class="sd">      | ``0x0112`` - SOP Instance not recognised</span>
<span class="sd">      | ``0x0116`` - Attribute value out of range</span>
<span class="sd">      | ``0x0117`` - Invalid object instance</span>
<span class="sd">      | ``0x0118`` - No such SOP Class</span>
<span class="sd">      | ``0x0119`` - Class-Instance conflict</span>
<span class="sd">      | ``0x0121`` - Missing attribute value</span>
<span class="sd">      | ``0x0124`` - Refused: not authorised</span>
<span class="sd">      | ``0x0210`` - Duplicate invocation</span>
<span class="sd">      | ``0x0211`` - Unrecognised operation</span>
<span class="sd">      | ``0x0212`` - Mistyped argument</span>
<span class="sd">      | ``0x0213`` - Resource limitation</span>
<span class="sd">      | ``0xC112`` - Applicable Machine Verification Instance not found</span>
<span class="sd">      | ``0xC224`` - Reference Beam Number not found within the</span>
<span class="sd">        referenced Fraction Group</span>
<span class="sd">      | ``0xC225`` - Referenced device or accessory not supported</span>
<span class="sd">      | ``0xC226`` - Referenced device or accessory not found with the</span>
<span class="sd">        referenced beam</span>
<span class="sd">      | ``0xC300`` - The UPS may no longer be updated</span>
<span class="sd">      | ``0xC301`` - The correct Transaction UID was not provided</span>
<span class="sd">      | ``0xC307`` - Specified SOP Instance UID does not exist or is not a UPS</span>
<span class="sd">        Instance managed by this SCP</span>
<span class="sd">      | ``0xC310`` - The UPS is not in the &#39;IN PROGRESS&#39; state</span>
<span class="sd">      | ``0xC603`` - Image size is larger than image box size</span>
<span class="sd">      | ``0xC605`` - Insufficient memory in printer to store the image</span>
<span class="sd">      | ``0xC613`` - Combined Print Image size is larger than the Image Box</span>
<span class="sd">        size</span>
<span class="sd">      | ``0xC616`` - There is an existing Film Box that has not been</span>
<span class="sd">        printed and N-ACTION at the Film Session level is not supported.</span>
<span class="sd">        A new Film Box will not be created when a previous Film Box has</span>
<span class="sd">        not been printed</span>

<span class="sd">    Warning</span>
<span class="sd">      | ``0x0001`` - Requested optional attributes are not supported</span>
<span class="sd">      | ``0xB305`` - Coerced invalid values to valid values</span>
<span class="sd">      | ``0xB600`` - Memory allocation not supported</span>
<span class="sd">      | ``0xB604`` - Image size larger than image box size, the image has been</span>
<span class="sd">        demagnified</span>
<span class="sd">      | ``0xB605`` - Requested Min Density or Max Density outside of</span>
<span class="sd">        printer&#39;s operating range. The printer will use its respective</span>
<span class="sd">        minimum or maximum density value instead</span>
<span class="sd">      | ``0xB609`` - Image size is larger than the Image Box. The Image has</span>
<span class="sd">        been cropped to fit</span>
<span class="sd">      | ``0xB60A`` - Image size or Combined Print Image size is larger than the</span>
<span class="sd">        Image Box size. The Image or Combined Print Image has been decimated</span>
<span class="sd">        to fit</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The event representing a service class receiving a N-SET</span>
<span class="sd">        request message. ``Event`` attributes are:</span>

<span class="sd">        * ``assoc`` : the</span>
<span class="sd">          :py:class:`association &lt;pynetdicom.association.Association&gt;`</span>
<span class="sd">          that is running the service that received the N-SET request.</span>
<span class="sd">        * ``context`` : the presentation context the request was sent under</span>
<span class="sd">          as a ``presentation.PresentationContextTuple``.</span>
<span class="sd">        * ``description`` : a description of the event that occurred as str.</span>
<span class="sd">        * ``name`` : the name of the event that occurred as str.</span>
<span class="sd">        * ``request`` : the received</span>
<span class="sd">          :py:class:`N-SET request &lt;pynetdicom.dimse_primitives.N_SET&gt;`</span>
<span class="sd">        * ``timestamp`` : the</span>
<span class="sd">          `date and time &lt;https://docs.python.org/3/library/datetime.html#datetime-objects&gt;`_</span>
<span class="sd">          that the N-SET request was processed by the service.</span>

<span class="sd">        Event properties are:</span>

<span class="sd">        * ``modification_list`` : the decoded</span>
<span class="sd">          :py:class:`Dataset &lt;pydicom.dataset.Dataset&gt;` contained within the</span>
<span class="sd">          N-SET request&#39;s *Modification List* parameter. Because *pydicom*</span>
<span class="sd">          uses a deferred read when decoding data, if the decode fails the</span>
<span class="sd">          returned ``Dataset`` will only raise an exception at the time of use.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    status : pydicom.dataset.Dataset or int</span>
<span class="sd">        The status returned to the peer AE in the N-SET response. Must be a</span>
<span class="sd">        valid N-SET status value for the applicable Service Class as either</span>
<span class="sd">        an ``int`` or a ``Dataset`` object containing (at a minimum) a</span>
<span class="sd">        (0000,0900) *Status* element. If returning a ``Dataset`` object then</span>
<span class="sd">        it may also contain optional elements related to the *Status* (as in</span>
<span class="sd">        DICOM Standard Part 7, Annex C).</span>
<span class="sd">    dataset : pydicom.dataset.Dataset or None</span>
<span class="sd">        If the status category is &#39;Success&#39; or &#39;Warning&#39; then a ``Dataset``</span>
<span class="sd">        containing elements of the response&#39;s *Attribute List*</span>
<span class="sd">        conformant to the specifications in the corresponding Service</span>
<span class="sd">        Class.</span>

<span class="sd">        If the status category is not &#39;Success&#39; or &#39;Warning&#39; then ``None``.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    NotImplementedError</span>
<span class="sd">        If the handler has not been implemented and bound to</span>
<span class="sd">        ``evt.EVT_N_SET`` by the user.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    :py:meth:`send_n_set()&lt;pynetdicom.association.Association.send_n_set&gt;`</span>
<span class="sd">    :py:class:`N_SET&lt;pynetdicom.dimse_primitives.N_SET&gt;`</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    DICOM Standard Part 4, Annexes H, J, P, S, CC and DD</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="doc_handle_async"><a class="viewcode-back" href="../../reference/generated/pynetdicom._handlers.doc_handle_async.html#pynetdicom._handlers.doc_handle_async">[docs]</a><span class="k">def</span> <span class="nf">doc_handle_async</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Documentation for handlers bound to ``evt.EVT_ASYNC_OPS``.</span>

<span class="sd">    User implementation of this event handler is optional. If a handler is</span>
<span class="sd">    not implemented and bound to ``evt.EVT_ASYNC_OPS`` then no response to the</span>
<span class="sd">    Asynchronous Operations Window</span>
<span class="sd">    Negotiation item will be sent in reply to the association requestor.</span>

<span class="sd">    Because *pynetdicom* doesn&#39;t support asynchronous operations if the</span>
<span class="sd">    handler is implemented then the response to the asynchronous</span>
<span class="sd">    operations window negotiation request will always return the default</span>
<span class="sd">    number of operations invoked/performed, (1, 1), regardless of what</span>
<span class="sd">    values are returned by the handler.</span>

<span class="sd">    **Event**</span>

<span class="sd">    ``evt.EVT_ASYNC_OPS``</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The event representing an association request being received which</span>
<span class="sd">        contains an Asynchronous Operations Window Negotiation item. Event</span>
<span class="sd">        attributes are:</span>

<span class="sd">        * ``assoc`` : the</span>
<span class="sd">          :py:class:`association &lt;pynetdicom.association.Association&gt;`</span>
<span class="sd">          that received the Asynchronous Operations Window Negotiation request.</span>
<span class="sd">        * ``description`` : a description of the event that occurred as str.</span>
<span class="sd">        * ``invoked`` : the *Maximum Number Operations Invoked* parameter</span>
<span class="sd">          value of the Asynchronous Operations Window Negotiation request as</span>
<span class="sd">          an ``int``. If the value is 0 then an unlimited number of</span>
<span class="sd">          invocations are requested.</span>
<span class="sd">        * ``name`` : the name of the event that occurred as str.</span>
<span class="sd">        * ``performed`` : the *Maximum Number Operations Performed*</span>
<span class="sd">          parameter value of the Asynchronous Operations Window Negotiation</span>
<span class="sd">          request as an ``int``. If the value is 0 then an unlimited number</span>
<span class="sd">          of performances are requested.</span>
<span class="sd">        * ``timestamp`` : the</span>
<span class="sd">          `date and time &lt;https://docs.python.org/3/library/datetime.html#datetime-objects&gt;`_</span>
<span class="sd">          that the negotiation request was processed by the ACSE.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    int, int</span>
<span class="sd">        The (maximum number operations invoked, maximum number operations</span>
<span class="sd">        performed). A value of 0 indicates that an unlimited number of</span>
<span class="sd">        operations is supported. As asynchronous operations are not</span>
<span class="sd">        supported the returned values will be ignored and (1, 1) sent in</span>
<span class="sd">        response.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="doc_handle_sop_common"><a class="viewcode-back" href="../../reference/generated/pynetdicom._handlers.doc_handle_sop_common.html#pynetdicom._handlers.doc_handle_sop_common">[docs]</a><span class="k">def</span> <span class="nf">doc_handle_sop_common</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Documentation for handlers bound to ``evt.EVT_SOP_COMMON``.</span>

<span class="sd">    User implementation of this event handler is required only if SOP Class</span>
<span class="sd">    Common Extended Negotiation is to be supported by the association.</span>

<span class="sd">    **Event**</span>

<span class="sd">    ``evt.EVT_SOP_COMMON``</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The event representing an association request being received which</span>
<span class="sd">        contains one or more SOP Class Common Extended Negotiation items. Event</span>
<span class="sd">        attributes are:</span>

<span class="sd">        * ``assoc`` : the</span>
<span class="sd">          :py:class:`association &lt;pynetdicom.association.Association&gt;`</span>
<span class="sd">          that received the SOP Class Common Extended Negotiation request.</span>
<span class="sd">        * ``description`` : a description of the event that occurred as str.</span>
<span class="sd">        * ``items`` : the {*SOP Class UID* :</span>
<span class="sd">          :py:class:`SOP Class Common Extended Negotiation</span>
<span class="sd">          &lt;pynetdicom.pdu_primitives.SOPClassCommonExtendedNegotiation&gt;`}</span>
<span class="sd">          items sent by the requestor.</span>
<span class="sd">        * ``name`` : the name of the event that occurred as str.</span>
<span class="sd">        * ``timestamp`` : the</span>
<span class="sd">          `date and time &lt;https://docs.python.org/3/library/datetime.html#datetime-objects&gt;`_</span>
<span class="sd">          that the negotiation request was processed by the ACSE.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    dict</span>
<span class="sd">        The {*SOP Class UID* :</span>
<span class="sd">        :py:class:`SOP Class Common Extended Negotiation</span>
<span class="sd">        &lt;pynetdicom.pdu_primitives.SOPClassCommonExtendedNegotiation&gt;`} items</span>
<span class="sd">        accepted by the acceptor. When receiving DIMSE messages containing</span>
<span class="sd">        datasets corresponding to the *SOP Class UID* in an accepted item</span>
<span class="sd">        the corresponding Service Class will be used (if available).</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>

<span class="sd">    * DICOM Standard Part 7, `Annex D.3.3.6 &lt;http://dicom.nema.org/medical/dicom/current/output/chtml/part07/sect_D.3.3.6.html&gt;`_</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="doc_handle_sop_extended"><a class="viewcode-back" href="../../reference/generated/pynetdicom._handlers.doc_handle_sop_extended.html#pynetdicom._handlers.doc_handle_sop_extended">[docs]</a><span class="k">def</span> <span class="nf">doc_handle_sop_extended</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Documentation for handlers bound to ``evt.EVT_SOP_EXTENDED``.</span>

<span class="sd">    User implementation of this event handler is required only if SOP Class</span>
<span class="sd">    Extended Negotiation is to be supported by the association. If a handler</span>
<span class="sd">    is not implemented and bound to ``evt.EVT_SOP_EXTENDED`` then no response</span>
<span class="sd">    will be sent to the SOP Class Extended Negotiation request.</span>

<span class="sd">    **Event**</span>

<span class="sd">    ``evt.EVT_SOP_EXTENDED``</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The event representing an association request being received which</span>
<span class="sd">        contains one or more SOP Class Extended Negotiation item. Event</span>
<span class="sd">        attributes are:</span>

<span class="sd">        * ``app_info`` : the {*SOP Class UID* : *Service Class Application</span>
<span class="sd">          Information*} parameter values for the included items, with the</span>
<span class="sd">          service class application information being the raw encoded data sent</span>
<span class="sd">          by the requestor (as ``bytes``).</span>
<span class="sd">        * ``assoc`` : the</span>
<span class="sd">          :py:class:`association &lt;pynetdicom.association.Association&gt;`</span>
<span class="sd">          that is running the service that received the user identity</span>
<span class="sd">          negotiation request.</span>
<span class="sd">        * ``description`` : a description of the event that occurred as str.</span>
<span class="sd">        * ``name`` : the name of the event that occurred as str.</span>
<span class="sd">        * ``timestamp`` : the</span>
<span class="sd">          `date and time &lt;https://docs.python.org/3/library/datetime.html#datetime-objects&gt;`_</span>
<span class="sd">          that the negotiation request was processed by the ACSE.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    dict of pydicom.uid.UID, bytes</span>
<span class="sd">        The {*SOP Class UID* : *Service Class Application Information*}</span>
<span class="sd">        parameter values to be sent in response to the request, with the</span>
<span class="sd">        service class application information being the encoded data that</span>
<span class="sd">        will be sent to the peer as-is. Return an empty ``dict`` if no</span>
<span class="sd">        response is to be sent.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>

<span class="sd">    * DICOM Standard Part 7, `Annex D.3.3.5 &lt;http://dicom.nema.org/medical/dicom/current/output/chtml/part07/sect_D.3.3.5.html&gt;`_</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="doc_handle_userid"><a class="viewcode-back" href="../../reference/generated/pynetdicom._handlers.doc_handle_userid.html#pynetdicom._handlers.doc_handle_userid">[docs]</a><span class="k">def</span> <span class="nf">doc_handle_userid</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Documentation for handlers bound to ``evt.EVT_USER_ID``.</span>

<span class="sd">    User implementation of this handler is required if User Identity</span>
<span class="sd">    Negotiation is to be supported by the association. If no handler is</span>
<span class="sd">    implemented and bound to ``evt.EVT_USER_ID``</span>
<span class="sd">    then the association will be accepted (provided there&#39;s no other reason</span>
<span class="sd">    to reject it) and no User Identity Negotiation response will be sent in</span>
<span class="sd">    reply even if one is requested.</span>

<span class="sd">    **Event**</span>

<span class="sd">    ``evt.EVT_USER_ID``</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        The event representing an association request being received which</span>
<span class="sd">        contains a User Identity Negotiation item. ``Event`` attributes are:</span>

<span class="sd">        * ``assoc`` : the</span>
<span class="sd">          :py:class:`association &lt;pynetdicom.association.Association&gt;`</span>
<span class="sd">          that is running the service that received the user identity</span>
<span class="sd">          negotiation request.</span>
<span class="sd">        * ``description`` : a description of the event that occurred as str.</span>
<span class="sd">        * ``name`` : the name of the event that occurred as str.</span>
<span class="sd">        * ``primary_field`` : the *Primary Field* value (as ``bytes``),</span>
<span class="sd">          contains the username, the encoded Kerberos ticket or the JSON web</span>
<span class="sd">          token, depending on the value of ``user_id_type``.</span>
<span class="sd">        * ``secondary_field`` : the *Secondary Field* value. Will be ``None``</span>
<span class="sd">          unless the ``user_id_type`` is ``2`` in which case it will be</span>
<span class="sd">          ``bytes``.</span>
<span class="sd">        * ``timestamp`` : the</span>
<span class="sd">          `date and time &lt;https://docs.python.org/3/library/datetime.html#datetime-objects&gt;`_</span>
<span class="sd">          that the negotiation request was processed by the ACSE.</span>
<span class="sd">        * ``user_id_type`` : the *User Identity Type* value (as an ``int``),</span>
<span class="sd">          which indicates the form of user identity being provided:</span>

<span class="sd">          * 1 - Username as a UTF-8 string</span>
<span class="sd">          * 2 - Username as a UTF-8 string and passcode</span>
<span class="sd">          * 3 - Kerberos Service ticket</span>
<span class="sd">          * 4 - SAML Assertion</span>
<span class="sd">          * 5 - JSON Web Token</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    is_verified : bool</span>
<span class="sd">        Return True if the user identity has been confirmed and you wish</span>
<span class="sd">        to proceed with association establishment, False otherwise.</span>
<span class="sd">    response : bytes or None</span>
<span class="sd">        If ``user_id_type`` is:</span>

<span class="sd">        * 1 or 2, then return ``None``</span>
<span class="sd">        * 3 then return the Kerberos Server ticket as ``bytes``</span>
<span class="sd">        * 4 then return the SAML response as ``bytes``</span>
<span class="sd">        * 5 then return the JSON web token as ``bytes``</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>

<span class="sd">    * DICOM Standard Part 7, `Annex D.3.3.7 &lt;http://dicom.nema.org/medical/dicom/current/output/chtml/part07/sect_D.3.3.7.html&gt;`_</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>

<span class="c1"># Notification event handler documentation</span>
<div class="viewcode-block" id="doc_handle_acse"><a class="viewcode-back" href="../../reference/generated/pynetdicom._handlers.doc_handle_acse.html#pynetdicom._handlers.doc_handle_acse">[docs]</a><span class="k">def</span> <span class="nf">doc_handle_acse</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Documentation for handlers bound to ``evt.EVT_ACSE_RECV`` or</span>
<span class="sd">    ``evt.EVT_ACSE_SENT``.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        Represents the ACSE service provider receiving or sending an</span>
<span class="sd">        association related primitive to/from the DUL service provider.</span>
<span class="sd">        ``Event`` attributes are:</span>

<span class="sd">        * ``assoc`` : the</span>
<span class="sd">          :py:class:`association &lt;pynetdicom.association.Association&gt;`</span>
<span class="sd">          that is running the service that received the user identity</span>
<span class="sd">          negotiation request.</span>
<span class="sd">        * ``description`` : a description of the event that occurred as str.</span>
<span class="sd">        * ``name`` : the name of the event that occurred as str.</span>
<span class="sd">        * ``primitive`` : the ACSE primitive sent to or received from the</span>
<span class="sd">          DUL service provider. One of</span>
<span class="sd">          :py:class:`A_ASSOCIATE&lt;pynetdicom.pdu_primitives.A_ASSOCIATE&gt;`,</span>
<span class="sd">          :py:class:`A_RELEASE&lt;pynetdicom.pdu_primitives.A_RELEASE&gt;`,</span>
<span class="sd">          :py:class:`A_ABORT&lt;pynetdicom.pdu_primitives.A_ABORT&gt;` or</span>
<span class="sd">          :py:class:`A_P_ABORT&lt;pynetdicom.pdu_primitives.A_P_ABORT&gt;`.</span>
<span class="sd">        * ``timestamp`` : the</span>
<span class="sd">          `date and time &lt;https://docs.python.org/3/library/datetime.html#datetime-objects&gt;`_</span>
<span class="sd">          that the negotiation request was processed by the ACSE.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="doc_handle_dimse"><a class="viewcode-back" href="../../reference/generated/pynetdicom._handlers.doc_handle_dimse.html#pynetdicom._handlers.doc_handle_dimse">[docs]</a><span class="k">def</span> <span class="nf">doc_handle_dimse</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Documentation for handlers bound to ``evt.EVT_DIMSE_RECV`` or</span>
<span class="sd">    ``evt.EVT_DIMSE_SENT``.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        Represents the DIMSE service provider decoding a DIMSE message after</span>
<span class="sd">        receiving the final P-DATA primitive that contained it, or encoding</span>
<span class="sd">        and converting a DIMSE message into P-DATA primitives. Event</span>
<span class="sd">        attributes are:</span>

<span class="sd">        * ``assoc`` : the</span>
<span class="sd">          :py:class:`association &lt;pynetdicom.association.Association&gt;`</span>
<span class="sd">          that is running the service that received the user identity</span>
<span class="sd">          negotiation request.</span>
<span class="sd">        * ``description`` : a description of the event that occurred as str.</span>
<span class="sd">        * ``message`` : the DIMSE message encoding or decoded. One of</span>
<span class="sd">          :py:class:`C_ECHO_RQ&lt;pynetdicom.dimse_messages.C_ECHO_RQ&gt;`,</span>
<span class="sd">          :py:class:`C_ECHO_RQ&lt;pynetdicom.dimse_messages.C_ECHO_RSP&gt;`,</span>
<span class="sd">          :py:class:`C_FIND_RQ&lt;pynetdicom.dimse_messages.C_FIND_RQ&gt;`,</span>
<span class="sd">          :py:class:`C_FIND_RSP&lt;pynetdicom.dimse_messages.C_FIND_RSP&gt;`,</span>
<span class="sd">          :py:class:`C_GET_RQ&lt;pynetdicom.dimse_messages.C_GET_RQ&gt;`,</span>
<span class="sd">          :py:class:`C_GET_RSP&lt;pynetdicom.dimse_messages.C_GET_RSP&gt;`,</span>
<span class="sd">          :py:class:`C_MOVE_RQ&lt;pynetdicom.dimse_messages.C_MOVE_RQ&gt;`,</span>
<span class="sd">          :py:class:`C_MOVE_RSP&lt;pynetdicom.dimse_messages.C_MOVE_RSP&gt;`,</span>
<span class="sd">          :py:class:`C_STORE_RQ&lt;pynetdicom.dimse_messages.C_STORE_RQ&gt;`,</span>
<span class="sd">          :py:class:`C_STORE_RSP&lt;pynetdicom.dimse_messages.C_STORE_RSP&gt;`,</span>
<span class="sd">          :py:class:`N_ACTION_RQ&lt;pynetdicom.dimse_messages.N_ACTION_RQ&gt;`,</span>
<span class="sd">          :py:class:`N_ACTION_RSP&lt;pynetdicom.dimse_messages.N_ACTION_RSP&gt;`,</span>
<span class="sd">          :py:class:`N_CREATE_RQ&lt;pynetdicom.dimse_messages.N_CREATE_RQ&gt;`,</span>
<span class="sd">          :py:class:`N_CREATE_RSP&lt;pynetdicom.dimse_messages.N_CREATE_RSP&gt;`,</span>
<span class="sd">          :py:class:`N_DELETE_RQ&lt;pynetdicom.dimse_messages.N_DELETE_RQ&gt;`,</span>
<span class="sd">          :py:class:`N_DELETE_RSP&lt;pynetdicom.dimse_messages.N_DELETE_RSP&gt;`,</span>
<span class="sd">          :py:class:`N_EVENT_REPORT_RQ&lt;pynetdicom.dimse_messages.N_EVENT_REPORT_RQ&gt;`,</span>
<span class="sd">          :py:class:`N_EVENT_REPORT_RSP&lt;pynetdicom.dimse_messages.N_EVENT_REPORT_RSP&gt;`,</span>
<span class="sd">          :py:class:`N_GET_RQ&lt;pynetdicom.dimse_messages.N_GET_RQ&gt;`,</span>
<span class="sd">          :py:class:`N_GET_RSP&lt;pynetdicom.dimse_messages.N_GET_RSP&gt;`,</span>
<span class="sd">          :py:class:`N_SET_RQ&lt;pynetdicom.dimse_messages.N_SET_RQ&gt;` or</span>
<span class="sd">          :py:class:`N_SET_RSP&lt;pynetdicom.dimse_messages.N_SET_RSP&gt;`</span>
<span class="sd">        * ``name`` : the name of the event that occurred as str.</span>
<span class="sd">        * ``timestamp`` : the</span>
<span class="sd">          `date and time &lt;https://docs.python.org/3/library/datetime.html#datetime-objects&gt;`_</span>
<span class="sd">          that the negotiation request was processed by the ACSE.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="doc_handle_data"><a class="viewcode-back" href="../../reference/generated/pynetdicom._handlers.doc_handle_data.html#pynetdicom._handlers.doc_handle_data">[docs]</a><span class="k">def</span> <span class="nf">doc_handle_data</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Documentation for handlers bound to ``evt.EVT_DATA_RECV`` or</span>
<span class="sd">    ``evt.EVT_DATA_SENT``.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        Represents data being sent to or received from the remote over the</span>
<span class="sd">        socket. ``Event`` attributes are:</span>

<span class="sd">        * ``assoc`` : the</span>
<span class="sd">          :py:class:`association &lt;pynetdicom.association.Association&gt;`</span>
<span class="sd">          that is running the service that received the user identity</span>
<span class="sd">          negotiation request.</span>
<span class="sd">        * ``data`` : the data sent to or received from the remote (as</span>
<span class="sd">          ``bytes``).</span>
<span class="sd">        * ``description`` : a description of the event that occurred as str.</span>
<span class="sd">        * ``name`` : the name of the event that occurred as str.</span>
<span class="sd">        * ``timestamp`` : the</span>
<span class="sd">          `date and time &lt;https://docs.python.org/3/library/datetime.html#datetime-objects&gt;`_</span>
<span class="sd">          that the negotiation request was processed by the ACSE.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="doc_handle_pdu"><a class="viewcode-back" href="../../reference/generated/pynetdicom._handlers.doc_handle_pdu.html#pynetdicom._handlers.doc_handle_pdu">[docs]</a><span class="k">def</span> <span class="nf">doc_handle_pdu</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Documentation for handlers bound to ``evt.EVT_PDU_RECV`` or</span>
<span class="sd">    ``evt.EVT_PDU_SENT``.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        Represents the DUL service provider sending or receiving a PDU.</span>
<span class="sd">        ``Event`` attributes are:</span>

<span class="sd">        * ``assoc`` : the</span>
<span class="sd">          :py:class:`association &lt;pynetdicom.association.Association&gt;`</span>
<span class="sd">          that is running the service that received the user identity</span>
<span class="sd">          negotiation request.</span>
<span class="sd">        * ``description`` : a description of the event that occurred as str.</span>
<span class="sd">        * ``name`` : the name of the event that occurred as str.</span>
<span class="sd">        * ``pdu`` : the PDU sent to or received from the peer. One of:</span>
<span class="sd">          :py:class:`A_ASSOCIATE_RQ&lt;pynetdicom.pdu.A_ASSOCIATE_RQ&gt;`,</span>
<span class="sd">          :py:class:`A_ASSOCIATE_RJ&lt;pynetdicom.pdu.A_ASSOCIATE_RJ&gt;`,</span>
<span class="sd">          :py:class:`A_ASSOCIATE_AC&lt;pynetdicom.pdu.A_ASSOCIATE_AC&gt;`,</span>
<span class="sd">          :py:class:`A_RELEASE_RQ&lt;pynetdicom.pdu.A_RELEASE_RQ&gt;`,</span>
<span class="sd">          :py:class:`A_RELEASE_RP&lt;pynetdicom.pdu.A_RELEASE_RP&gt;`,</span>
<span class="sd">          :py:class:`A_ABORT_RQ&lt;pynetdicom.pdu.A_ABORT_RQ&gt;` or</span>
<span class="sd">          :py:class:`P_DATA_TF&lt;pynetdicom.pdu.P_DATA_TF&gt;`.</span>
<span class="sd">        * ``timestamp`` : the</span>
<span class="sd">          `date and time &lt;https://docs.python.org/3/library/datetime.html#datetime-objects&gt;`_</span>
<span class="sd">          that the negotiation request was processed by the ACSE.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="doc_handle_transport"><a class="viewcode-back" href="../../reference/generated/pynetdicom._handlers.doc_handle_transport.html#pynetdicom._handlers.doc_handle_transport">[docs]</a><span class="k">def</span> <span class="nf">doc_handle_transport</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Documentation for handlers bound to ``evt.EVT_CONN_OPEN`` or</span>
<span class="sd">    ``evt.EVT_CONN_CLOSE``.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        Represents opening or closing a transport connection. Event</span>
<span class="sd">        attributes are:</span>

<span class="sd">        * ``address`` : the (host, port) of the remote as (str, int).</span>
<span class="sd">        * ``assoc`` : the</span>
<span class="sd">          :py:class:`association &lt;pynetdicom.association.Association&gt;`</span>
<span class="sd">          that is running the service that received the user identity</span>
<span class="sd">          negotiation request.</span>
<span class="sd">        * ``description`` : a description of the event that occurred as str.</span>
<span class="sd">        * ``name`` : the name of the event that occurred as str.</span>
<span class="sd">        * ``timestamp`` : the</span>
<span class="sd">          `date and time &lt;https://docs.python.org/3/library/datetime.html#datetime-objects&gt;`_</span>
<span class="sd">          that the negotiation request was processed by the ACSE.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="doc_handle_assoc"><a class="viewcode-back" href="../../reference/generated/pynetdicom._handlers.doc_handle_assoc.html#pynetdicom._handlers.doc_handle_assoc">[docs]</a><span class="k">def</span> <span class="nf">doc_handle_assoc</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Documentation for handlers bound to ``evt.EVT_ACCEPTED``,</span>
<span class="sd">    ``evt.EVT_ESTABLISHED``, ``evt.EVT_REJECTED``, ``evt.EVT_REQUESTED``,</span>
<span class="sd">    ``evt.EVT_RELEASED`` or ``evt.EVT_ABORTED``.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        Represents moving to one of the main association states. Event</span>
<span class="sd">        attributes are:</span>

<span class="sd">        * ``assoc`` : the</span>
<span class="sd">          :py:class:`association &lt;pynetdicom.association.Association&gt;`</span>
<span class="sd">          that is running the service that received the user identity</span>
<span class="sd">          negotiation request.</span>
<span class="sd">        * ``description`` : a description of the event that occurred as str.</span>
<span class="sd">        * ``name`` : the name of the event that occurred as str.</span>
<span class="sd">        * ``timestamp`` : the</span>
<span class="sd">          `date and time &lt;https://docs.python.org/3/library/datetime.html#datetime-objects&gt;`_</span>
<span class="sd">          that the negotiation request was processed by the ACSE.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="doc_handle_fsm"><a class="viewcode-back" href="../../reference/generated/pynetdicom._handlers.doc_handle_fsm.html#pynetdicom._handlers.doc_handle_fsm">[docs]</a><span class="k">def</span> <span class="nf">doc_handle_fsm</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Documentation for handlers bound to ``evt.EVT_FSM_TRANSITION``.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : events.Event</span>
<span class="sd">        Represents the state machine receiving a triggering event and being</span>
<span class="sd">        about to perform the action that will take it to the next state.</span>
<span class="sd">        ``Event`` attributes are:</span>

<span class="sd">        * ``action`` : the name of the action that&#39;s to be performed.</span>
<span class="sd">        * ``assoc`` : the</span>
<span class="sd">          :py:class:`association &lt;pynetdicom.association.Association&gt;`</span>
<span class="sd">          that is running the service that received the user identity</span>
<span class="sd">          negotiation request.</span>
<span class="sd">        * ``current_state`` : the current state of the state machine as str.</span>
<span class="sd">        * ``description`` : a description of the event that occurred as str.</span>
<span class="sd">        * ``fsm_event`` : the name of the state machine event that occurred,</span>
<span class="sd">          triggering the transition.</span>
<span class="sd">        * ``name`` : the name of the event that occurred as str.</span>
<span class="sd">        * ``next_state`` : the state the state machine will be in after the</span>
<span class="sd">          action has been performed.</span>
<span class="sd">        * ``timestamp`` : the</span>
<span class="sd">          `date and time &lt;https://docs.python.org/3/library/datetime.html#datetime-objects&gt;`_</span>
<span class="sd">          that the negotiation request was processed by the ACSE.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018-19, pynetdicom contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>