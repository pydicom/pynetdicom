<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pynetdicom.pdu &mdash; pynetdicom 1.3.1 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/pynetdicom.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/pynetdicom.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> pynetdicom
            <img src="../../_static/pydicom_flat_black.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.3.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../verification_service_class.html">Verification Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../storage_service_class.html">Storage Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../query_retrieve_service_class.html">Query/Retrieve Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../basic_worklist_service_class.html">Basic Worklist Management Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../relevant_patient_service_class.html">Relevant Patient Information Query Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../substance_admin_service_class.html">Substance Administration Query Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../non_patient_service_class.html">Non-Patient Object Storage Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../color_palette_service_class.html">Color Palette Query/Retrieve Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../defined_procedure_service_class.html">Defined Procedure Protocol Query/Retrieve Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hanging_protocol_service_class.html">Hanging Protocol Query/Retrieve Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../implant_template_service_class.html">Implant Template Query/Retrieve Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../display_system_service_class.html">Display System Management Service Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modality_performed_procedure_step.html">Modality Performed Procedure Step Management</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">User Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">1.3.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html#v1-3-0">1.3.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html#v1-2-0">1.2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html#v1-1-0">1.1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html#v1-0-0">1.0.0</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">pynetdicom</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Module code</a> &raquo;</li>
      <li>pynetdicom.pdu</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for pynetdicom.pdu</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;DICOM Upper Layer Protocol Data Units (PDUs).</span>

<span class="sd">There are seven different PDUs:</span>

<span class="sd">- A_ASSOCIATE_RQ</span>
<span class="sd">- A_ASSOCIATE_AC</span>
<span class="sd">- A_ASSOCIATE_RJ</span>
<span class="sd">- P_DATA_TF</span>
<span class="sd">- A_RELEASE_RQ</span>
<span class="sd">- A_RELEASE_RP</span>
<span class="sd">- A_ABORT_RQ</span>

<span class="sd">::</span>

<span class="sd">                  from_primitive               encode</span>
<span class="sd">  +----------------+  ------&gt;  +------------+  -----&gt;  +-------------+</span>
<span class="sd">  | DUL Primitive  |           |    PDU     |          |   Peer AE   |</span>
<span class="sd">  +----------------+  &lt;------  +------------+  &lt;-----  +-------------+</span>
<span class="sd">                    to_primitive               decode</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">codecs</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">struct</span> <span class="kn">import</span> <span class="n">Struct</span>

<span class="kn">from</span> <span class="nn">pynetdicom.pdu_items</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">ApplicationContextItem</span><span class="p">,</span>
    <span class="n">PresentationContextItemRQ</span><span class="p">,</span>
    <span class="n">PresentationContextItemAC</span><span class="p">,</span>
    <span class="n">UserInformationItem</span><span class="p">,</span>
    <span class="n">PresentationDataValueItem</span><span class="p">,</span>
    <span class="n">PDU_ITEM_TYPES</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">pynetdicom.utils</span> <span class="kn">import</span> <span class="n">validate_ae_title</span>


<span class="n">LOGGER</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;pynetdicom.pdu&#39;</span><span class="p">)</span>

<span class="c1"># Predefine some structs to make decoding and encoding faster</span>
<span class="n">UCHAR</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">)</span>
<span class="n">UINT2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="s1">&#39;&gt;H&#39;</span><span class="p">)</span>
<span class="n">UINT4</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="s1">&#39;&gt;I&#39;</span><span class="p">)</span>

<span class="n">UNPACK_UCHAR</span> <span class="o">=</span> <span class="n">UCHAR</span><span class="o">.</span><span class="n">unpack</span>
<span class="n">UNPACK_UINT2</span> <span class="o">=</span> <span class="n">UINT2</span><span class="o">.</span><span class="n">unpack</span>
<span class="n">UNPACK_UINT4</span> <span class="o">=</span> <span class="n">UINT4</span><span class="o">.</span><span class="n">unpack</span>

<span class="n">PACK_UCHAR</span> <span class="o">=</span> <span class="n">UCHAR</span><span class="o">.</span><span class="n">pack</span>
<span class="n">PACK_UINT2</span> <span class="o">=</span> <span class="n">UINT2</span><span class="o">.</span><span class="n">pack</span>
<span class="n">PACK_UINT4</span> <span class="o">=</span> <span class="n">UINT4</span><span class="o">.</span><span class="n">pack</span>


<span class="k">class</span> <span class="nc">PDU</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for PDUs.</span>

<span class="sd">    Protocol Data Units (PDUs) are the message formats exchanged between peer</span>
<span class="sd">    entities within a layer. A PDU consists of protocol control information</span>
<span class="sd">    and user data. PDUs are constructed by mandatory fixed fields followed by</span>
<span class="sd">    optional variable fields that contain one or more items and/or sub-items.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    DICOM Standard, Part 8, `Section 9.3 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part08.html#sect_9.3&gt;`_</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytestream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Decode `bytestream` and use the result to set the field values of</span>
<span class="sd">        the PDU.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bytestream : bytes</span>
<span class="sd">            The PDU data to be decoded.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">length</span><span class="p">),</span> <span class="n">attr_name</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">args</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_decoders</span><span class="p">:</span>
            <span class="c1"># Allow us to use None as a `length`</span>
            <span class="k">if</span> <span class="n">length</span><span class="p">:</span>
                <span class="n">sl</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">length</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">sl</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

            <span class="nb">setattr</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">,</span> <span class="n">func</span><span class="p">(</span><span class="n">bytestream</span><span class="p">[</span><span class="n">sl</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
            <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_decoders</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return an iterable of tuples that contain field decoders.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the encoded PDU as bytes.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytes</span>
<span class="sd">            The encoded PDU.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">bytestream</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">attr_name</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">args</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_encoders</span><span class="p">:</span>
            <span class="c1"># If attr_name is None then the field is usually reserved</span>
            <span class="k">if</span> <span class="n">attr_name</span><span class="p">:</span>
                <span class="n">bytestream</span> <span class="o">+=</span> <span class="n">func</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">),</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">bytestream</span> <span class="o">+=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">bytestream</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_encoders</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return an iterable of tuples that contain field encoders.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return True if `self` equals `other`.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="c1"># pylint: disable=protected-access</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">):</span>
            <span class="n">self_dict</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">enc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">for</span> <span class="n">enc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_encoders</span> <span class="k">if</span> <span class="n">enc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="p">}</span>
            <span class="n">other_dict</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">enc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">enc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">for</span> <span class="n">enc</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">_encoders</span> <span class="k">if</span> <span class="n">enc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="n">self_dict</span> <span class="o">==</span> <span class="n">other_dict</span>

        <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_generate_items</span><span class="p">(</span><span class="n">bytestream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Yield PDU item data from `bytestream`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bytestream : bytes</span>
<span class="sd">            The encoded PDU variable item data.</span>

<span class="sd">        Yields</span>
<span class="sd">        ------</span>
<span class="sd">        int, bytes</span>
<span class="sd">            The variable item&#39;s &#39;Item Type&#39; parameter as int, and the item&#39;s</span>
<span class="sd">            entire encoded data as bytes.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Can be used with the following PDU items/sub-items:</span>

<span class="sd">        - Application Context Item</span>
<span class="sd">        - Presentation Context Item (RQ/AC)</span>

<span class="sd">          - Abstract Syntax Sub-item</span>
<span class="sd">          - Transfer Syntax Sub-item</span>
<span class="sd">        - User Information Item</span>

<span class="sd">          - Implementation Class UID Sub-item (RQ/AC)</span>
<span class="sd">          - Implementation Version Name Sub-item (RQ/AC)</span>
<span class="sd">          - Asynchronous Operations Window Sub-item (RQ/AC)</span>
<span class="sd">          - SCP/SCU Role Selection Sub-item (RQ/AC)</span>
<span class="sd">          - SOP Class Extended Negotiation Sub-item (RQ/AC)</span>
<span class="sd">          - SOP Class Common Extended Negotiation Sub-item (RQ/AC)</span>
<span class="sd">          - User Identity Sub-item (RQ/AC)</span>

<span class="sd">        **Encoding**</span>
<span class="sd">        When encoded, PDU item and sub-item data for the above has the</span>
<span class="sd">        following structure, taken from various tables in [1]_ (offsets shown</span>
<span class="sd">        with Python indexing). Items are always encoded using Big Endian [2]_.</span>

<span class="sd">        +--------+-------------+-------------+</span>
<span class="sd">        | Offset | Length      | Description |</span>
<span class="sd">        +========+=============+=============+</span>
<span class="sd">        | 0      | 1           | Item type   |</span>
<span class="sd">        +--------+-------------+-------------+</span>
<span class="sd">        | 1      | 1           | Reserved    |</span>
<span class="sd">        +--------+-------------+-------------+</span>
<span class="sd">        | 2      | 2           | Item length |</span>
<span class="sd">        +--------+-------------+-------------+</span>
<span class="sd">        | 4      | Item length | Item data   |</span>
<span class="sd">        +--------+-------------+-------------+</span>

<span class="sd">        References</span>
<span class="sd">        ----------</span>
<span class="sd">        .. [1] DICOM Standard, Part 8, Section</span>
<span class="sd">           `9.3 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part08.html#sect_9.3&gt;`_</span>
<span class="sd">        .. [2] DICOM Standard, Part 8, Section</span>
<span class="sd">           `9.3.1 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part08.html#sect_9.3.1&gt;`_</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">bytestream</span><span class="p">[</span><span class="n">offset</span><span class="p">:</span><span class="n">offset</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]:</span>
            <span class="n">item_type</span> <span class="o">=</span> <span class="n">UNPACK_UCHAR</span><span class="p">(</span><span class="n">bytestream</span><span class="p">[</span><span class="n">offset</span><span class="p">:</span><span class="n">offset</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">item_length</span> <span class="o">=</span> <span class="n">UNPACK_UINT2</span><span class="p">(</span><span class="n">bytestream</span><span class="p">[</span><span class="n">offset</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span><span class="n">offset</span> <span class="o">+</span> <span class="mi">4</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">item_data</span> <span class="o">=</span> <span class="n">bytestream</span><span class="p">[</span><span class="n">offset</span><span class="p">:</span><span class="n">offset</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">+</span> <span class="n">item_length</span><span class="p">]</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">item_data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span> <span class="o">+</span> <span class="n">item_length</span>
            <span class="k">yield</span> <span class="n">item_type</span><span class="p">,</span> <span class="n">item_data</span>
            <span class="c1"># Move `offset` to the start of the next item</span>
            <span class="n">offset</span> <span class="o">+=</span> <span class="mi">4</span> <span class="o">+</span> <span class="n">item_length</span>

    <span class="c1"># Python 2: Classes defining __eq__ should flag themselves as unhashable</span>
    <span class="fm">__hash__</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the total length of the encoded PDU as an int.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">6</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return True if `self` does not equal `other`.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">other</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pdu_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the *PDU Length* field value as an int.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pdu_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the *PDU Type* field value an int.&quot;&quot;&quot;</span>
        <span class="n">key_val</span> <span class="o">=</span> <span class="n">PDU_TYPES</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="p">[</span><span class="n">key</span> <span class="k">for</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span> <span class="ow">in</span> <span class="n">key_val</span><span class="p">]</span>
        <span class="n">vals</span> <span class="o">=</span> <span class="p">[</span><span class="n">val</span> <span class="k">for</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span> <span class="ow">in</span> <span class="n">key_val</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">keys</span><span class="p">[</span><span class="n">vals</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)]</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_wrap_bytes</span><span class="p">(</span><span class="n">bytestream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return `bytestream` without changing it.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">bytestream</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_wrap_encode_items</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return `items` encoded as bytes.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        items : list of PDU items</span>
<span class="sd">            The items to encode.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytes</span>
<span class="sd">            The encoded items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">bytestream</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
            <span class="n">bytestream</span> <span class="o">+=</span> <span class="n">item</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">bytestream</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_wrap_encode_uid</span><span class="p">(</span><span class="n">uid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return `uid` as bytes encoded using ASCII.</span>

<span class="sd">        Each component of Application Context, Abstract Syntax and Transfer</span>
<span class="sd">        Syntax UIDs should be encoded as a ISO 646:1990-Basic G0 Set Numeric</span>
<span class="sd">        String (characters 0-9), with each component separated by &#39;.&#39; (0x2e)</span>
<span class="sd">        [1]_.</span>

<span class="sd">        &#39;ascii&#39; is chosen because this is the codec Python uses for ISO 646</span>
<span class="sd">        [2]_ [3]_.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        uid : pydicom.uid.UID</span>
<span class="sd">            The UID to encode using ASCII.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytes</span>
<span class="sd">            The encoded `uid`.</span>

<span class="sd">        References</span>
<span class="sd">        ----------</span>
<span class="sd">        .. [1] DICOM Standard, part 8,</span>
<span class="sd">           `Annex F &lt;http://dicom.nema.org/medical/dicom/current/output/html/part08.html#chapter_F&gt;`_.</span>
<span class="sd">        .. [2] `Python 2 codecs module &lt;https://docs.python.org/3/library/codecs.html#standard-encodings&gt;`_</span>
<span class="sd">        .. [3] `Python 3 codecs module &lt;https://docs.python.org/2/library/codecs.html#standard-encodings&gt;`_</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">uid</span><span class="p">,</span> <span class="s1">&#39;ascii&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_wrap_generate_items</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytestream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a list of encoded PDU items generated from `bytestream`.&quot;&quot;&quot;</span>
        <span class="n">item_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">item_type</span><span class="p">,</span> <span class="n">item_bytes</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_items</span><span class="p">(</span><span class="n">bytestream</span><span class="p">):</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">PDU_ITEM_TYPES</span><span class="p">[</span><span class="n">item_type</span><span class="p">]()</span>
            <span class="n">item</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">item_bytes</span><span class="p">)</span>
            <span class="n">item_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">item_list</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_wrap_pack</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">packer</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return `value` encoded as bytes using `packer`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        value</span>
<span class="sd">            The value to encode.</span>
<span class="sd">        packer : callable</span>
<span class="sd">            A callable function to use to pack the data as bytes. The</span>
<span class="sd">            `packer` should return the packed bytes. Example:</span>
<span class="sd">            struct.Struct(&#39;&gt;I&#39;).pack</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytes</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">packer</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_wrap_unpack</span><span class="p">(</span><span class="n">bytestream</span><span class="p">,</span> <span class="n">unpacker</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the first value when `unpacker` is run on `bytestream`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bytestream : bytes</span>
<span class="sd">            The encoded data to unpack.</span>
<span class="sd">        unpacker : callable</span>
<span class="sd">            A callable function to use to unpack the data in `bytestream`. The</span>
<span class="sd">            `unpacker` should return a tuple containing unpacked values.</span>
<span class="sd">            Example: struct.Struct(&#39;&gt;I&#39;).unpack.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">unpacker</span><span class="p">(</span><span class="n">bytestream</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>


<div class="viewcode-block" id="A_ASSOCIATE_RQ"><a class="viewcode-back" href="../../reference/generated/pynetdicom.pdu.A_ASSOCIATE_RQ.html#pynetdicom.pdu.A_ASSOCIATE_RQ">[docs]</a><span class="k">class</span> <span class="nc">A_ASSOCIATE_RQ</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An A-ASSOCIATE-RQ PDU.</span>

<span class="sd">    An A-ASSOCIATE-RQ PDU is sent by an association requestor to initiate</span>
<span class="sd">    association negotiation with an acceptor.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    application_context_name : pydicom.uid.UID or None</span>
<span class="sd">        The Application Context Item&#39;s *Application Context Name* field value</span>
<span class="sd">        (if available).</span>
<span class="sd">    called_ae_title : bytes</span>
<span class="sd">        The *Called AE Title* field value, which is the destination DICOM</span>
<span class="sd">        application name as a fixed length 16-byte value (padded with trailing</span>
<span class="sd">        spaces 0x20). Leading and trailing spaces are non-significant and a</span>
<span class="sd">        value of 16 spaces is not allowed.</span>
<span class="sd">    calling_ae_title : bytes</span>
<span class="sd">        The *Calling AE Title* field value, which is the destination DICOM</span>
<span class="sd">        application name as a fixed length 16-byte value (padded with trailing</span>
<span class="sd">        spaces 0x20). Leading and trailing spaces are non-significant and a</span>
<span class="sd">        value of 16 spaces is not allowed.</span>
<span class="sd">    pdu_length : int</span>
<span class="sd">        The number of bytes from the first byte following the *PDU Length*</span>
<span class="sd">        field to the last byte of the PDU.</span>
<span class="sd">    pdu_type : int</span>
<span class="sd">        The *PDU Type* field value (0x01).</span>
<span class="sd">    presentation_context : list of pdu_items.PresentationContextItemRQ</span>
<span class="sd">        The *Presentation Context Item(s)*.</span>
<span class="sd">    protocol_version : int</span>
<span class="sd">        The *Protocol Version* field value (default 0x01).</span>
<span class="sd">    user_information : pdu_items.UserInformationItem</span>
<span class="sd">        The *User Information Item* (if available).</span>
<span class="sd">    variable_items : list</span>
<span class="sd">        A list containing the A-ASSOCIATE-RQ&#39;s *Variable Items*. Contains</span>
<span class="sd">        one Application Context item, one or more Presentation Context items</span>
<span class="sd">        and one User Information item. The order of the items is not</span>
<span class="sd">        guaranteed.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    An A-ASSOCIATE-RQ PDU requires the following parameters:</span>

<span class="sd">    * PDU type (1, fixed value, 0x01)</span>
<span class="sd">    * PDU length (1)</span>
<span class="sd">    * Protocol version (1, default value, 0x01)</span>
<span class="sd">    * Called AE title (1)</span>
<span class="sd">    * Calling AE title (1)</span>
<span class="sd">    * Variable items (1)</span>

<span class="sd">      * Application Context Item (1)</span>

<span class="sd">        * Item type (1, fixed value, 0x10)</span>
<span class="sd">        * Item length (1)</span>
<span class="sd">        * Application Context Name (1, fixed in an application)</span>
<span class="sd">      * Presentation Context Item(s) (1 or more)</span>

<span class="sd">        * Item type (1, fixed value, 0x21)</span>
<span class="sd">        * Item length (1)</span>
<span class="sd">        * Context ID (1)</span>
<span class="sd">        * Abstract/Transfer Syntax Sub-items (1)</span>

<span class="sd">          * Abstract Syntax Sub-item (1)</span>

<span class="sd">            * Item type (1, fixed, 0x30)</span>
<span class="sd">            * Item length (1)</span>
<span class="sd">            * Abstract syntax name (1)</span>
<span class="sd">          * Transfer Syntax Sub-items (1 or more)</span>

<span class="sd">            * Item type (1, fixed, 0x40)</span>
<span class="sd">            * Item length (1)</span>
<span class="sd">            * Transfer syntax name(s) (1 or more)</span>
<span class="sd">      * User Information Item (1)</span>

<span class="sd">        * Item type (1, fixed, 0x50)</span>
<span class="sd">        * Item length (1)</span>
<span class="sd">        * User data Sub-items (2 or more)</span>

<span class="sd">            * Maximum Length Received Sub-item (1)</span>
<span class="sd">            * Implementation Class UID Sub-item (1)</span>
<span class="sd">            * Optional User Data Sub-items (0 or more)</span>

<span class="sd">    **Encoding**</span>

<span class="sd">    When encoded, an A-ASSOCIATE-RQ PDU has the following structure, taken</span>
<span class="sd">    from Table 9-11 [1]_ (offsets shown with Python indexing). PDUs are always</span>
<span class="sd">    encoded using Big Endian [2]_.</span>

<span class="sd">    +--------+-------------+------------------+</span>
<span class="sd">    | Offset | Length      | Description      |</span>
<span class="sd">    +========+=============+==================+</span>
<span class="sd">    | 0      | 1           | PDU type         |</span>
<span class="sd">    +--------+-------------+------------------+</span>
<span class="sd">    | 1      | 1           | Reserved         |</span>
<span class="sd">    +--------+-------------+------------------+</span>
<span class="sd">    | 2      | 4           | PDU length       |</span>
<span class="sd">    +--------+-------------+------------------+</span>
<span class="sd">    | 6      | 2           | Protocol version |</span>
<span class="sd">    +--------+-------------+------------------+</span>
<span class="sd">    | 8      | 2           | Reserved         |</span>
<span class="sd">    +--------+-------------+------------------+</span>
<span class="sd">    | 10     | 16          | Called AE title  |</span>
<span class="sd">    +--------+-------------+------------------+</span>
<span class="sd">    | 26     | 16          | Calling AE title |</span>
<span class="sd">    +--------+-------------+------------------+</span>
<span class="sd">    | 42     | 32          | Reserved         |</span>
<span class="sd">    +--------+-------------+------------------+</span>
<span class="sd">    | 74     | Variable    | Variable items   |</span>
<span class="sd">    +--------+-------------+------------------+</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    .. [1] DICOM Standard, Part 8, Section</span>
<span class="sd">       `9.3.2 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part08.html#sect_9.3.2&gt;`_</span>
<span class="sd">    .. [2] DICOM Standard, Part 8, Section</span>
<span class="sd">       `9.3.1 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part08.html#sect_9.3.1&gt;`_</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="A_ASSOCIATE_RQ.__init__"><a class="viewcode-back" href="../../reference/generated/pynetdicom.pdu.A_ASSOCIATE_RQ.html#pynetdicom.pdu.A_ASSOCIATE_RQ.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialise a new A-ASSOCIATE-RQ PDU.&quot;&quot;&quot;</span>
        <span class="c1"># We allow the user to modify the protocol version if so desired</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">protocol_version</span> <span class="o">=</span> <span class="mh">0x01</span>
        <span class="c1"># Set some default values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">called_ae_title</span> <span class="o">=</span> <span class="s2">&quot;Default&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">calling_ae_title</span> <span class="o">=</span> <span class="s2">&quot;Default&quot;</span>

        <span class="c1"># `variable_items` is a list containing the following:</span>
        <span class="c1">#   1 ApplicationContextItem</span>
        <span class="c1">#   1 or more PresentationContextItemRQ</span>
        <span class="c1">#   1 UserInformationItem</span>
        <span class="c1"># The order of the items in the list may not be as given above</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span> <span class="o">=</span> <span class="p">[]</span></div>

    <span class="k">def</span> <span class="nf">from_primitive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primitive</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Setup the current PDU using an A-ASSOCIATE (request) primitive.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : pdu_primitives.A_ASSOCIATE</span>
<span class="sd">            The primitive to use to set the current PDU field values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">calling_ae_title</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">calling_ae_title</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">called_ae_title</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">called_ae_title</span>

        <span class="c1"># Add Application Context</span>
        <span class="n">application_context</span> <span class="o">=</span> <span class="n">ApplicationContextItem</span><span class="p">()</span>
        <span class="n">application_context</span><span class="o">.</span><span class="n">application_context_name</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">primitive</span><span class="o">.</span><span class="n">application_context_name</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">application_context</span><span class="p">)</span>

        <span class="c1"># Add Presentation Context(s)</span>
        <span class="k">for</span> <span class="n">contexts</span> <span class="ow">in</span> <span class="n">primitive</span><span class="o">.</span><span class="n">presentation_context_definition_list</span><span class="p">:</span>
            <span class="n">presentation_context</span> <span class="o">=</span> <span class="n">PresentationContextItemRQ</span><span class="p">()</span>
            <span class="n">presentation_context</span><span class="o">.</span><span class="n">from_primitive</span><span class="p">(</span><span class="n">contexts</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">presentation_context</span><span class="p">)</span>

        <span class="c1"># Add User Information</span>
        <span class="n">user_information</span> <span class="o">=</span> <span class="n">UserInformationItem</span><span class="p">()</span>
        <span class="n">user_information</span><span class="o">.</span><span class="n">from_primitive</span><span class="p">(</span><span class="n">primitive</span><span class="o">.</span><span class="n">user_information</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">user_information</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_primitive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return an A-ASSOCIATE (request) primitive from the current PDU.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pdu_primitives.A_ASSOCIATE</span>
<span class="sd">            The primitive representation of the current PDU.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pynetdicom.pdu_primitives</span> <span class="kn">import</span> <span class="n">A_ASSOCIATE</span>

        <span class="n">primitive</span> <span class="o">=</span> <span class="n">A_ASSOCIATE</span><span class="p">()</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">calling_ae_title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calling_ae_title</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">called_ae_title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">called_ae_title</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">application_context_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">application_context_name</span>

        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="p">:</span>
            <span class="c1"># Add presentation contexts</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">PresentationContextItemRQ</span><span class="p">):</span>
                <span class="n">primitive</span><span class="o">.</span><span class="n">presentation_context_definition_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">item</span><span class="o">.</span><span class="n">to_primitive</span><span class="p">())</span>

            <span class="c1"># Add user information</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">UserInformationItem</span><span class="p">):</span>
                <span class="n">primitive</span><span class="o">.</span><span class="n">user_information</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">to_primitive</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">primitive</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">application_context_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the *Application Context Name*, if available.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pydicom.uid.UID or None</span>
<span class="sd">            The requestor&#39;s *Application Context Name* or None if not</span>
<span class="sd">            available.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">ApplicationContextItem</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">item</span><span class="o">.</span><span class="n">application_context_name</span>

        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">called_ae_title</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the *Called AE Title* field value as bytes.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_called_aet</span>

    <span class="nd">@called_ae_title</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">called_ae_title</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ae_title</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the *Called AE Title* field value.</span>

<span class="sd">        Will be converted to a fixed length 16-byte value (padded with trailing</span>
<span class="sd">        spaces 0x20). Leading and trailing spaces are non-significant and a</span>
<span class="sd">        value of 16 spaces is not allowed.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ae_title : str or bytes</span>
<span class="sd">            The value you wish to set. A value consisting of spaces is not</span>
<span class="sd">            allowed and values longer than 16 characters will be truncated.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=attribute-defined-outside-init</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ae_title</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">ae_title</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">ae_title</span><span class="p">,</span> <span class="s1">&#39;ascii&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_called_aet</span> <span class="o">=</span> <span class="n">validate_ae_title</span><span class="p">(</span><span class="n">ae_title</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">calling_ae_title</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the *Calling AE Title* field value as bytes.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calling_aet</span>

    <span class="nd">@calling_ae_title</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">calling_ae_title</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ae_title</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the *Calling AE Title* field value.</span>

<span class="sd">        Will be converted to a fixed length 16-byte value (padded with trailing</span>
<span class="sd">        spaces 0x20). Leading and trailing spaces are non-significant and a</span>
<span class="sd">        value of 16 spaces is not allowed.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ae_title : str or bytes</span>
<span class="sd">            The value you wish to set. A value consisting of spaces is not</span>
<span class="sd">            allowed and values longer than 16 characters will be truncated.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=attribute-defined-outside-init</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ae_title</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">ae_title</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">ae_title</span><span class="p">,</span> <span class="s1">&#39;ascii&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_calling_aet</span> <span class="o">=</span> <span class="n">validate_ae_title</span><span class="p">(</span><span class="n">ae_title</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_decoders</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return an iterable of tuples that contain field decoders.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list of tuple</span>
<span class="sd">            A list of ((offset, length), attr_name, callable, [args]), where</span>

<span class="sd">            - offset is the byte offset to start at</span>
<span class="sd">            - length is how many bytes to slice (if None then will slice to the</span>
<span class="sd">              end of the data),</span>
<span class="sd">            - attr_name is the name of the attribute corresponding to the field</span>
<span class="sd">            - callable is a decoding function that returns the decoded value,</span>
<span class="sd">            - args is a list of arguments to pass callable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="s1">&#39;protocol_version&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_unpack</span><span class="p">,</span> <span class="p">[</span><span class="n">UNPACK_UINT2</span><span class="p">]),</span>
            <span class="p">((</span><span class="mi">10</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="s1">&#39;called_ae_title&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_bytes</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="p">((</span><span class="mi">26</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="s1">&#39;calling_ae_title&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_bytes</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="p">((</span><span class="mi">74</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="s1">&#39;variable_items&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_generate_items</span><span class="p">,</span> <span class="p">[])</span>
        <span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_encoders</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return an iterable of tuples that contain field decoders.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list of tuple</span>
<span class="sd">            A list of (attr_name, callable, [args]), where</span>

<span class="sd">            - attr_name is the name of the attribute corresponding to the field</span>
<span class="sd">            - callable is an encoding function that returns bytes</span>
<span class="sd">            - args is a list of arguments to pass callable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="p">(</span><span class="s1">&#39;pdu_type&#39;</span><span class="p">,</span> <span class="n">PACK_UCHAR</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">PACK_UCHAR</span><span class="p">]),</span>
            <span class="p">(</span><span class="s1">&#39;pdu_length&#39;</span><span class="p">,</span> <span class="n">PACK_UINT4</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="p">(</span><span class="s1">&#39;protocol_version&#39;</span><span class="p">,</span> <span class="n">PACK_UINT2</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x0000</span><span class="p">,</span> <span class="n">PACK_UINT2</span><span class="p">]),</span>
            <span class="p">(</span><span class="s1">&#39;called_ae_title&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_bytes</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="p">(</span><span class="s1">&#39;calling_ae_title&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_bytes</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">PACK_UINT4</span><span class="p">]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">PACK_UINT4</span><span class="p">]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">PACK_UINT4</span><span class="p">]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">PACK_UINT4</span><span class="p">]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">PACK_UINT4</span><span class="p">]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">PACK_UINT4</span><span class="p">]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">PACK_UINT4</span><span class="p">]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">PACK_UINT4</span><span class="p">]),</span>
            <span class="p">(</span><span class="s1">&#39;variable_items&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_encode_items</span><span class="p">,</span> <span class="p">[])</span>
        <span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pdu_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the *PDU Length* field value as an int.&quot;&quot;&quot;</span>
        <span class="n">length</span> <span class="o">=</span> <span class="mi">68</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="p">:</span>
            <span class="n">length</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">length</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">presentation_context</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a list of the Presentation Context Items.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list of pdu_items.PresentationContextItemRQ</span>
<span class="sd">            The Presentation Context Items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span> <span class="k">if</span>
                <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">PresentationContextItemRQ</span><span class="p">)]</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a string representation of the PDU.&quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;A-ASSOCIATE-RQ PDU</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;==================</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  PDU type: 0x</span><span class="si">{0:02x}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  PDU length: </span><span class="si">{0:d}</span><span class="s1"> bytes</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  Protocol version: </span><span class="si">{0:d}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">protocol_version</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  Called AET:  </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">called_ae_title</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  Calling AET: </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">calling_ae_title</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  Variable Items:</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  ---------------</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  * Application Context Item</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;    - Context name: =</span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">application_context_name</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  * Presentation Context Item(s):</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">presentation_context</span><span class="p">:</span>
            <span class="n">item_str</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ii</span><span class="p">)</span>
            <span class="n">item_str_list</span> <span class="o">=</span> <span class="n">item_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;    - </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">item_str_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">jj</span> <span class="ow">in</span> <span class="n">item_str_list</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;      </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">jj</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  * User Information Item(s):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_information</span><span class="o">.</span><span class="n">user_data</span><span class="p">:</span>
            <span class="n">item_str</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ii</span><span class="p">)</span>
            <span class="n">item_str_list</span> <span class="o">=</span> <span class="n">item_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;    - </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">item_str_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">jj</span> <span class="ow">in</span> <span class="n">item_str_list</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;      </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">jj</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">s</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">user_information</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the User Information Item, if available.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pdu_items.UserInformationItem or None</span>
<span class="sd">            The requestor&#39;s User Information object or None, if not available.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">UserInformationItem</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">item</span>

        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="A_ASSOCIATE_AC"><a class="viewcode-back" href="../../reference/generated/pynetdicom.pdu.A_ASSOCIATE_AC.html#pynetdicom.pdu.A_ASSOCIATE_AC">[docs]</a><span class="k">class</span> <span class="nc">A_ASSOCIATE_AC</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An A-ASSOCIATE-AC PDU.</span>

<span class="sd">    An A-ASSOCIATE-AC PDU is sent by an association acceptor to indicate that</span>
<span class="sd">    association negotiation has been successful.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    application_context_name : pydicom.uid.UID</span>
<span class="sd">        The &#39;Application Context Item&#39;s *Application Context Name* field value</span>
<span class="sd">        (if available).</span>
<span class="sd">    called_ae_title : bytes</span>
<span class="sd">        The requestor&#39;s *Called AE Title* field value, which is the destination</span>
<span class="sd">        DICOM application name as a 16-byte value. The value is not</span>
<span class="sd">        guaranteed to be the actual title and shall not be tested.</span>
<span class="sd">    calling_ae_title : bytes</span>
<span class="sd">        The requestor&#39;s *Calling AE Title* field value, which is the source</span>
<span class="sd">        DICOM application name as a 16-byte value. The value is not</span>
<span class="sd">        guaranteed to be the actual title and shall not be tested.</span>
<span class="sd">    pdu_length : int</span>
<span class="sd">        The number of bytes from the first byte following the *PDU Length*</span>
<span class="sd">        field to the last byte of the PDU.</span>
<span class="sd">    pdu_type : int</span>
<span class="sd">        The *PDU Type* field value (0x02).</span>
<span class="sd">    presentation_context : list of pdu_items.PresentationContextItemAC</span>
<span class="sd">        The *Presentation Context Item(s)*.</span>
<span class="sd">    protocol_version : int</span>
<span class="sd">        The *Protocol Version* field value (default 0x01).</span>
<span class="sd">    user_information : pdu_items.UserInformationItem</span>
<span class="sd">        The *User Information Item* (if available).</span>
<span class="sd">    variable_items : list</span>
<span class="sd">        A list containing the A-ASSOCIATE-AC&#39;s &#39;Variable Items&#39;. Contains</span>
<span class="sd">        one Application Context item, one or more Presentation Context items</span>
<span class="sd">        and one User Information item. The order of the items is not</span>
<span class="sd">        guaranteed.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    An A-ASSOCIATE-AC PDU requires the following parameters:</span>

<span class="sd">    * PDU type (1, fixed value, 0x02)</span>
<span class="sd">    * PDU length (1)</span>
<span class="sd">    * Protocol version (1, default value, 0x01)</span>
<span class="sd">    * Variable items (1)</span>

<span class="sd">      * Application Context Item (1)</span>

<span class="sd">        * Item type (1, fixed value, 0x10)</span>
<span class="sd">        * Item length (1)</span>
<span class="sd">        * Application Context Name (1, fixed in an application)</span>
<span class="sd">      * Presentation Context Item(s) (1 or more)</span>

<span class="sd">        * Item type (1, fixed value, 0x21)</span>
<span class="sd">        * Item length (1)</span>
<span class="sd">        * Context ID (1)</span>
<span class="sd">        * Result/reason (1)</span>
<span class="sd">        * Transfer Syntax Sub-items (1)</span>

<span class="sd">          * Item type (1, fixed, 0x40)</span>
<span class="sd">          * Item length (1)</span>
<span class="sd">          * Transfer syntax name(s) (1)</span>
<span class="sd">      * User Information Item (1)</span>

<span class="sd">        * Item type (1, fixed, 0x50)</span>
<span class="sd">        * Item length (1)</span>
<span class="sd">        * User data Sub-items (2 or more)</span>

<span class="sd">            * Maximum Length Received Sub-item (1)</span>
<span class="sd">            * Implementation Class UID Sub-item (1)</span>
<span class="sd">            * Optional User Data Sub-items (0 or more)</span>

<span class="sd">    **Encoding**</span>

<span class="sd">    When encoded, an A-ASSOCIATE-AC PDU has the following structure, taken</span>
<span class="sd">    from Table 9-17 [1]_ (offsets shown with Python indexing). PDUs are always</span>
<span class="sd">    encoded using Big Endian [2]_.</span>

<span class="sd">    +--------+-------------+------------------+</span>
<span class="sd">    | Offset | Length      | Description      |</span>
<span class="sd">    +========+=============+==================+</span>
<span class="sd">    | 0      | 1           | PDU type         |</span>
<span class="sd">    +--------+-------------+------------------+</span>
<span class="sd">    | 1      | 1           | Reserved         |</span>
<span class="sd">    +--------+-------------+------------------+</span>
<span class="sd">    | 2      | 4           | PDU length       |</span>
<span class="sd">    +--------+-------------+------------------+</span>
<span class="sd">    | 6      | 2           | Protocol version |</span>
<span class="sd">    +--------+-------------+------------------+</span>
<span class="sd">    | 8      | 2           | Reserved         |</span>
<span class="sd">    +--------+-------------+------------------+</span>
<span class="sd">    | 10     | 16          | Reserved^        |</span>
<span class="sd">    +--------+-------------+------------------+</span>
<span class="sd">    | 26     | 16          | Reserved^        |</span>
<span class="sd">    +--------+-------------+------------------+</span>
<span class="sd">    | 42     | 32          | Reserved         |</span>
<span class="sd">    +--------+-------------+------------------+</span>
<span class="sd">    | 74     | Variable    | Variable items   |</span>
<span class="sd">    +--------+-------------+------------------+</span>

<span class="sd">    ^ The reserved fields shall be sent with a value identical to the value</span>
<span class="sd">    received in the A-ASSOCIATE-RQ but their values shall not be tested.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    .. [1] DICOM Standard, Part 8, Section</span>
<span class="sd">       `9.3.3 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part08.html#sect_9.3.3&gt;`_</span>
<span class="sd">    .. [2] DICOM Standard, Part 8, Section</span>
<span class="sd">       `9.3.1 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part08.html#sect_9.3.1&gt;`_</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="A_ASSOCIATE_AC.__init__"><a class="viewcode-back" href="../../reference/generated/pynetdicom.pdu.A_ASSOCIATE_AC.html#pynetdicom.pdu.A_ASSOCIATE_AC.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialise a new A-ASSOCIATE-AC PDU.&quot;&quot;&quot;</span>
        <span class="c1"># We allow the user to modify the protocol version if so desired</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">protocol_version</span> <span class="o">=</span> <span class="mh">0x01</span>
        <span class="c1"># Called AE Title, should be present, but no guarantees</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_reserved_aet</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># Calling AE Title, should be present, but no guarantees</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_reserved_aec</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># `variable_items` is a list containing the following:</span>
        <span class="c1">#   1 ApplicationContextItem</span>
        <span class="c1">#   1 or more PresentationContextItemAC</span>
        <span class="c1">#   1 UserInformationItem</span>
        <span class="c1"># The order of the items in the list may not be as given above</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span> <span class="o">=</span> <span class="p">[]</span></div>

    <span class="k">def</span> <span class="nf">from_primitive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primitive</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Setup the current PDU using an A-ASSOCIATE (accept) primitive.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : pdu_primitives.A_ASSOCIATE</span>
<span class="sd">            The primitive to use to set the current PDU field values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_reserved_aet</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">called_ae_title</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_reserved_aec</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">calling_ae_title</span>

        <span class="c1"># Make application context</span>
        <span class="n">application_context</span> <span class="o">=</span> <span class="n">ApplicationContextItem</span><span class="p">()</span>
        <span class="n">application_context</span><span class="o">.</span><span class="n">application_context_name</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">primitive</span><span class="o">.</span><span class="n">application_context_name</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">application_context</span><span class="p">)</span>

        <span class="c1"># Make presentation contexts</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="n">primitive</span><span class="o">.</span><span class="n">presentation_context_definition_results_list</span><span class="p">:</span>
            <span class="n">presentation_context</span> <span class="o">=</span> <span class="n">PresentationContextItemAC</span><span class="p">()</span>
            <span class="n">presentation_context</span><span class="o">.</span><span class="n">from_primitive</span><span class="p">(</span><span class="n">ii</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">presentation_context</span><span class="p">)</span>

        <span class="c1"># Make user information</span>
        <span class="n">user_information</span> <span class="o">=</span> <span class="n">UserInformationItem</span><span class="p">()</span>
        <span class="n">user_information</span><span class="o">.</span><span class="n">from_primitive</span><span class="p">(</span><span class="n">primitive</span><span class="o">.</span><span class="n">user_information</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">user_information</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_primitive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return an A-ASSOCIATE (accept) primitive from the current PDU.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pdu_primitives.A_ASSOCIATE</span>
<span class="sd">            The primitive representation of the current PDU.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pynetdicom.pdu_primitives</span> <span class="kn">import</span> <span class="n">A_ASSOCIATE</span>

        <span class="n">primitive</span> <span class="o">=</span> <span class="n">A_ASSOCIATE</span><span class="p">()</span>

        <span class="c1"># The two reserved parameters at byte offsets 11 and 27 shall be set</span>
        <span class="c1">#    to called and calling AET byte the value shall not be</span>
        <span class="c1">#   tested when received (PS3.8 Table 9-17)</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">called_ae_title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reserved_aet</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">calling_ae_title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reserved_aec</span>

        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="p">:</span>
            <span class="c1"># Add application context</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">ApplicationContextItem</span><span class="p">):</span>
                <span class="n">primitive</span><span class="o">.</span><span class="n">application_context_name</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">item</span><span class="o">.</span><span class="n">application_context_name</span>
                <span class="p">)</span>

            <span class="c1"># Add presentation contexts</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">PresentationContextItemAC</span><span class="p">):</span>
                <span class="n">primitive</span><span class="o">.</span><span class="n">presentation_context_definition_results_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">item</span><span class="o">.</span><span class="n">to_primitive</span><span class="p">()</span>
                <span class="p">)</span>

            <span class="c1"># Add user information</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">UserInformationItem</span><span class="p">):</span>
                <span class="n">primitive</span><span class="o">.</span><span class="n">user_information</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">to_primitive</span><span class="p">()</span>

        <span class="c1"># 0x00 = Accepted</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="mh">0x00</span>

        <span class="k">return</span> <span class="n">primitive</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">application_context_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the *Application Context Name*, if available.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pydicom.uid.UID or None</span>
<span class="sd">            The acceptor&#39;s *Application Context Name* or None if not available.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">ApplicationContextItem</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">item</span><span class="o">.</span><span class="n">application_context_name</span>

        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">called_ae_title</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the value sent in the *Called AE Title* reserved space.</span>

<span class="sd">        While the standard says this value should match the A-ASSOCIATE-RQ</span>
<span class="sd">        value there is no guarantee and this should not be used as a check</span>
<span class="sd">        value.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytes</span>
<span class="sd">            The value the A-ASSOCIATE-AC sent in the *Called AE Title* reserved</span>
<span class="sd">            space.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_reserved_aet</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_reserved_aet</span><span class="p">,</span> <span class="s1">&#39;ascii&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reserved_aet</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">calling_ae_title</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the value sent in the *Calling AE Title* reserved space.</span>

<span class="sd">        While the standard says this value should match the A-ASSOCIATE-RQ</span>
<span class="sd">        value there is no guarantee and this should not be used as a check</span>
<span class="sd">        value.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytes</span>
<span class="sd">            The value the A-ASSOCIATE-AC sent in the *Calling AE Title*</span>
<span class="sd">            reserved space.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_reserved_aec</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_reserved_aec</span><span class="p">,</span> <span class="s1">&#39;ascii&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reserved_aec</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_decoders</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return an iterable of tuples that contain field decoders.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list of tuple</span>
<span class="sd">            A list of ((offset, length), attr_name, callable, [args]), where</span>

<span class="sd">            - offset is the byte offset to start at</span>
<span class="sd">            - length is how many bytes to slice (if None then will slice to the</span>
<span class="sd">              end of the data),</span>
<span class="sd">            - attr_name is the name of the attribute corresponding to the field</span>
<span class="sd">            - callable is a decoding function that returns the decoded value,</span>
<span class="sd">            - args is a list of arguments to pass callable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="s1">&#39;protocol_version&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_unpack</span><span class="p">,</span> <span class="p">[</span><span class="n">UNPACK_UINT2</span><span class="p">]),</span>
            <span class="p">((</span><span class="mi">10</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="s1">&#39;_reserved_aet&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_bytes</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="p">((</span><span class="mi">26</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="s1">&#39;_reserved_aec&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_bytes</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="p">((</span><span class="mi">74</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="s1">&#39;variable_items&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_generate_items</span><span class="p">,</span> <span class="p">[])</span>
        <span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_encoders</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return an iterable of tuples that contain field decoders.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list of tuple</span>
<span class="sd">            A list of (attr_name, callable, [args]), where</span>

<span class="sd">            - attr_name is the name of the attribute corresponding to the field</span>
<span class="sd">            - callable is an encoding function that returns bytes</span>
<span class="sd">            - args is a list of arguments to pass callable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="p">(</span><span class="s1">&#39;pdu_type&#39;</span><span class="p">,</span> <span class="n">PACK_UCHAR</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">PACK_UCHAR</span><span class="p">]),</span>
            <span class="p">(</span><span class="s1">&#39;pdu_length&#39;</span><span class="p">,</span> <span class="n">PACK_UINT4</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="p">(</span><span class="s1">&#39;protocol_version&#39;</span><span class="p">,</span> <span class="n">PACK_UINT2</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x0000</span><span class="p">,</span> <span class="n">PACK_UINT2</span><span class="p">]),</span>
            <span class="p">(</span><span class="s1">&#39;_reserved_aet&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_bytes</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="p">(</span><span class="s1">&#39;_reserved_aec&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_bytes</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">PACK_UINT4</span><span class="p">]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">PACK_UINT4</span><span class="p">]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">PACK_UINT4</span><span class="p">]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">PACK_UINT4</span><span class="p">]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">PACK_UINT4</span><span class="p">]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">PACK_UINT4</span><span class="p">]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">PACK_UINT4</span><span class="p">]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">PACK_UINT4</span><span class="p">]),</span>
            <span class="p">(</span><span class="s1">&#39;variable_items&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_encode_items</span><span class="p">,</span> <span class="p">[])</span>
        <span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pdu_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the *PDU Length* field value as an int.&quot;&quot;&quot;</span>
        <span class="n">length</span> <span class="o">=</span> <span class="mi">68</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="p">:</span>
            <span class="n">length</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">length</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">presentation_context</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a list of the Presentation Context Items.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list of pdu_items.PresentationContextItemAC</span>
<span class="sd">            The Presentation Context Items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span> <span class="k">if</span>
                <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">PresentationContextItemAC</span><span class="p">)]</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a string representation of the PDU.&quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;A-ASSOCIATE-AC PDU</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;==================</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  PDU type: 0x</span><span class="si">{0:02x}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  PDU length: </span><span class="si">{0:d}</span><span class="s1"> bytes</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  Protocol version: </span><span class="si">{0:d}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">protocol_version</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  Reserved (Called AET):  </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_reserved_aet</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  Reserved (Calling AET): </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_reserved_aec</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  Variable Items:</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  ---------------</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  * Application Context Item</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;    -  Context name: =</span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">application_context_name</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  * Presentation Context Item(s):</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">presentation_context</span><span class="p">:</span>
            <span class="n">item_str</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ii</span><span class="p">)</span>
            <span class="n">item_str_list</span> <span class="o">=</span> <span class="n">item_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;    -  </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">item_str_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">jj</span> <span class="ow">in</span> <span class="n">item_str_list</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;       </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">jj</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  * User Information Item(s):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_information</span><span class="o">.</span><span class="n">user_data</span><span class="p">:</span>
            <span class="n">item_str</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            <span class="n">item_str_list</span> <span class="o">=</span> <span class="n">item_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;    -  </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">item_str_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">jj</span> <span class="ow">in</span> <span class="n">item_str_list</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;       </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">jj</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">s</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">user_information</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the User Information Item, if available.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pdu_items.UserInformationItem or None</span>
<span class="sd">            The acceptor&#39;s User Information object or None, if not available.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">UserInformationItem</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">item</span>

        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="A_ASSOCIATE_RJ"><a class="viewcode-back" href="../../reference/generated/pynetdicom.pdu.A_ASSOCIATE_RJ.html#pynetdicom.pdu.A_ASSOCIATE_RJ">[docs]</a><span class="k">class</span> <span class="nc">A_ASSOCIATE_RJ</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An A-ASSOCIATE-RJ PDU.</span>

<span class="sd">    An A-ASSOCIATE-RJ PDU is sent by an association acceptor to indicate that</span>
<span class="sd">    association negotiation has been unsuccessful.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    pdu_length : int</span>
<span class="sd">        The number of bytes from the first byte following the *PDU Length*</span>
<span class="sd">        field to the last byte of the PDU.</span>
<span class="sd">    pdu_type : int</span>
<span class="sd">        The *PDU Type* field value (0x03).</span>
<span class="sd">    reason_diagnostic : int</span>
<span class="sd">        The *Reason/Diagnostic* field value.</span>
<span class="sd">    result : int</span>
<span class="sd">        The *Result* field value.</span>
<span class="sd">    source : int</span>
<span class="sd">        The *Source* field value.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    An A-ASSOCIATE-RJ PDU requires the following parameters:</span>

<span class="sd">    * PDU type (1, fixed value, 0x03)</span>
<span class="sd">    * PDU length (1)</span>
<span class="sd">    * Result (1)</span>
<span class="sd">    * Source (1)</span>
<span class="sd">    * Reason/Diagnostic (1)</span>

<span class="sd">    **Encoding**</span>

<span class="sd">    When encoded, an A-ASSOCIATE-RJ PDU has the following structure, taken</span>
<span class="sd">    from Table 9-21 [1]_ (offsets shown with Python indexing). PDUs are always</span>
<span class="sd">    encoded using Big Endian [2]_.</span>

<span class="sd">    +--------+-------------+-------------------+</span>
<span class="sd">    | Offset | Length      | Description       |</span>
<span class="sd">    +========+=============+===================+</span>
<span class="sd">    | 0      | 1           | PDU type          |</span>
<span class="sd">    +--------+-------------+-------------------+</span>
<span class="sd">    | 1      | 1           | Reserved          |</span>
<span class="sd">    +--------+-------------+-------------------+</span>
<span class="sd">    | 2      | 4           | PDU length        |</span>
<span class="sd">    +--------+-------------+-------------------+</span>
<span class="sd">    | 6      | 1           | Reserved          |</span>
<span class="sd">    +--------+-------------+-------------------+</span>
<span class="sd">    | 7      | 1           | Result            |</span>
<span class="sd">    +--------+-------------+-------------------+</span>
<span class="sd">    | 8      | 1           | Source            |</span>
<span class="sd">    +--------+-------------+-------------------+</span>
<span class="sd">    | 9      | 1           | Reason/diagnostic |</span>
<span class="sd">    +--------+-------------+-------------------+</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    .. [1] DICOM Standard, Part 8, Section</span>
<span class="sd">       `9.3.4 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part08.html#sect_9.3.4&gt;`_</span>
<span class="sd">    .. [2] DICOM Standard, Part 8, Section</span>
<span class="sd">       `9.3.1 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part08.html#sect_9.3.1&gt;`_</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="A_ASSOCIATE_RJ.__init__"><a class="viewcode-back" href="../../reference/generated/pynetdicom.pdu.A_ASSOCIATE_RJ.html#pynetdicom.pdu.A_ASSOCIATE_RJ.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialise a new A-ASSOCIATE-RJ PDU.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reason_diagnostic</span> <span class="o">=</span> <span class="kc">None</span></div>

    <span class="k">def</span> <span class="nf">from_primitive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primitive</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Setup the current PDU using an A-ASSOCIATE (reject) primitive.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : pdu_primitives.A_ASSOCIATE</span>
<span class="sd">            The primitive to use to set the current PDU field values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">result</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">result_source</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reason_diagnostic</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">diagnostic</span>

    <span class="k">def</span> <span class="nf">to_primitive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return an A-ASSOCIATE (reject) primitive from the current PDU.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pdu_primitives.A_ASSOCIATE</span>
<span class="sd">            The primitive representation of the current PDU.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pynetdicom.pdu_primitives</span> <span class="kn">import</span> <span class="n">A_ASSOCIATE</span>

        <span class="n">primitive</span> <span class="o">=</span> <span class="n">A_ASSOCIATE</span><span class="p">()</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">result</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">result_source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">diagnostic</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reason_diagnostic</span>

        <span class="k">return</span> <span class="n">primitive</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_decoders</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return an iterable of tuples that contain field decoders.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list of tuple</span>
<span class="sd">            A list of ((offset, length), attr_name, callable, [args]), where</span>

<span class="sd">            - offset is the byte offset to start at</span>
<span class="sd">            - length is how many bytes to slice (if None then will slice to the</span>
<span class="sd">              end of the data),</span>
<span class="sd">            - attr_name is the name of the attribute corresponding to the field</span>
<span class="sd">            - callable is a decoding function that returns the decoded value,</span>
<span class="sd">            - args is a list of arguments to pass callable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="p">((</span><span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s1">&#39;result&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_unpack</span><span class="p">,</span> <span class="p">[</span><span class="n">UNPACK_UCHAR</span><span class="p">]),</span>
            <span class="p">((</span><span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s1">&#39;source&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_unpack</span><span class="p">,</span> <span class="p">[</span><span class="n">UNPACK_UCHAR</span><span class="p">]),</span>
            <span class="p">((</span><span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s1">&#39;reason_diagnostic&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_unpack</span><span class="p">,</span> <span class="p">[</span><span class="n">UNPACK_UCHAR</span><span class="p">])</span>
        <span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_encoders</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return an iterable of tuples that contain field decoders.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list of tuple</span>
<span class="sd">            A list of (attr_name, callable, [args]), where</span>

<span class="sd">            - attr_name is the name of the attribute corresponding to the field</span>
<span class="sd">            - callable is an encoding function that returns bytes</span>
<span class="sd">            - args is a list of arguments to pass callable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="p">(</span><span class="s1">&#39;pdu_type&#39;</span><span class="p">,</span> <span class="n">PACK_UCHAR</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">PACK_UCHAR</span><span class="p">]),</span>
            <span class="p">(</span><span class="s1">&#39;pdu_length&#39;</span><span class="p">,</span> <span class="n">PACK_UINT4</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">PACK_UCHAR</span><span class="p">]),</span>
            <span class="p">(</span><span class="s1">&#39;result&#39;</span><span class="p">,</span> <span class="n">PACK_UCHAR</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="p">(</span><span class="s1">&#39;source&#39;</span><span class="p">,</span> <span class="n">PACK_UCHAR</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="p">(</span><span class="s1">&#39;reason_diagnostic&#39;</span><span class="p">,</span> <span class="n">PACK_UCHAR</span><span class="p">,</span> <span class="p">[]),</span>
        <span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pdu_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the *PDU Length* field value as an int.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">4</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">reason_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a str describing the *Reason/Diagnostic* field value.&quot;&quot;&quot;</span>
        <span class="n">_reasons</span> <span class="o">=</span> <span class="p">{</span>
            <span class="mi">1</span> <span class="p">:</span> <span class="p">{</span>
                <span class="mi">1</span> <span class="p">:</span> <span class="s2">&quot;No reason given&quot;</span><span class="p">,</span>
                <span class="mi">2</span> <span class="p">:</span> <span class="s2">&quot;Application context name not supported&quot;</span><span class="p">,</span>
                <span class="mi">3</span> <span class="p">:</span> <span class="s2">&quot;Calling AE title not recognised&quot;</span><span class="p">,</span>
                <span class="mi">4</span> <span class="p">:</span> <span class="s2">&quot;Reserved&quot;</span><span class="p">,</span>
                <span class="mi">5</span> <span class="p">:</span> <span class="s2">&quot;Reserved&quot;</span><span class="p">,</span>
                <span class="mi">6</span> <span class="p">:</span> <span class="s2">&quot;Reserved&quot;</span><span class="p">,</span>
                <span class="mi">7</span> <span class="p">:</span> <span class="s2">&quot;Called AE title not recognised&quot;</span><span class="p">,</span>
                <span class="mi">8</span> <span class="p">:</span> <span class="s2">&quot;Reserved&quot;</span><span class="p">,</span>
                <span class="mi">9</span> <span class="p">:</span> <span class="s2">&quot;Reserved&quot;</span><span class="p">,</span>
                <span class="mi">10</span> <span class="p">:</span> <span class="s2">&quot;Reserved&quot;</span>
            <span class="p">},</span>
            <span class="mi">2</span> <span class="p">:</span> <span class="p">{</span>
                <span class="mi">1</span> <span class="p">:</span> <span class="s2">&quot;No reason given&quot;</span><span class="p">,</span>
                <span class="mi">2</span> <span class="p">:</span> <span class="s2">&quot;Protocol version not supported&quot;</span>
            <span class="p">},</span>
            <span class="mi">3</span> <span class="p">:</span> <span class="p">{</span>
                <span class="mi">0</span> <span class="p">:</span> <span class="s2">&quot;Reserved&quot;</span><span class="p">,</span>
                <span class="mi">1</span> <span class="p">:</span> <span class="s2">&quot;Temporary congestion&quot;</span><span class="p">,</span>
                <span class="mi">2</span> <span class="p">:</span> <span class="s2">&quot;Local limit exceeded&quot;</span><span class="p">,</span>
                <span class="mi">3</span> <span class="p">:</span> <span class="s2">&quot;Reserved&quot;</span><span class="p">,</span>
                <span class="mi">4</span> <span class="p">:</span> <span class="s2">&quot;Reserved&quot;</span><span class="p">,</span>
                <span class="mi">5</span><span class="p">:</span> <span class="s2">&quot;Reserved&quot;</span><span class="p">,</span>
                <span class="mi">6</span> <span class="p">:</span> <span class="s2">&quot;Reserved&quot;</span><span class="p">,</span>
                <span class="mi">7</span> <span class="p">:</span> <span class="s2">&quot;Reserved&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_reasons</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Invalid value in Source field in &#39;</span>
                         <span class="s1">&#39;A-ASSOCIATE-RJ PDU&#39;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Invalid value in Source field in &#39;</span>
                             <span class="s1">&#39;A-ASSOCIATE-RJ PDU&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">reason_diagnostic</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_reasons</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">]:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Invalid value in Reason field in &#39;</span>
                         <span class="s1">&#39;A-ASSOCIATE-RJ PDU&#39;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Invalid value in Reason field in &#39;</span>
                             <span class="s1">&#39;A-ASSOCIATE-RJ PDU&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">_reasons</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">reason_diagnostic</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">result_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a str describing the *Result* field value.&quot;&quot;&quot;</span>
        <span class="n">_results</span> <span class="o">=</span> <span class="p">{</span>
            <span class="mi">1</span> <span class="p">:</span> <span class="s1">&#39;Rejected (Permanent)&#39;</span><span class="p">,</span>
            <span class="mi">2</span> <span class="p">:</span> <span class="s1">&#39;Rejected (Transient)&#39;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">result</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_results</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Invalid value in Result field in &#39;</span>
                         <span class="s1">&#39;A-ASSOCIATE-RJ PDU&#39;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Invalid value in Result field in &#39;</span>
                             <span class="s1">&#39;A-ASSOCIATE-RJ PDU&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">_results</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">source_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a str describing the *Source* field value.&quot;&quot;&quot;</span>
        <span class="n">_sources</span> <span class="o">=</span> <span class="p">{</span>
            <span class="mi">1</span> <span class="p">:</span> <span class="s1">&#39;DUL service-user&#39;</span><span class="p">,</span>
            <span class="mi">2</span> <span class="p">:</span> <span class="s1">&#39;DUL service-provider (ACSE related)&#39;</span><span class="p">,</span>
            <span class="mi">3</span> <span class="p">:</span> <span class="s1">&#39;DUL service-provider (presentation related)&#39;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_sources</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Invalid value in Source field in &#39;</span>
                         <span class="s1">&#39;A-ASSOCIATE-RJ PDU&#39;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Invalid value in Source field in &#39;</span>
                             <span class="s1">&#39;A-ASSOCIATE-RJ PDU&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">_sources</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a string representation of the PDU.&quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;A-ASSOCIATE-RJ PDU</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;==================</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  PDU type: 0x</span><span class="si">{0:02x}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  PDU length: </span><span class="si">{0:d}</span><span class="s1"> bytes</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  Result: </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">result_str</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  Source: </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source_str</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  Reason/Diagnostic: </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reason_str</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">s</span></div>


<span class="c1"># Overridden _generate_items and _wrap_generate_items</span>
<div class="viewcode-block" id="P_DATA_TF"><a class="viewcode-back" href="../../reference/generated/pynetdicom.pdu.P_DATA_TF.html#pynetdicom.pdu.P_DATA_TF">[docs]</a><span class="k">class</span> <span class="nc">P_DATA_TF</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A P-DATA-TF PDU.</span>

<span class="sd">    A P-DATA-TF PDU is used once an association has been established to send</span>
<span class="sd">    DIMSE message data.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    pdu_length : int</span>
<span class="sd">        The number of bytes from the first byte following the *PDU Length*</span>
<span class="sd">        field to the last byte of the PDU.</span>
<span class="sd">    pdu_type : int</span>
<span class="sd">        The *PDU Type* field value (0x04).</span>
<span class="sd">    presentation_data_value_items : list of pdu.PresentationDataValueItem</span>
<span class="sd">        The *Presentation Data Value Item(s)* field value.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    A P-DATA-TF PDU requires the following parameters:</span>

<span class="sd">    * PDU type (1, fixed value, 0x04)</span>
<span class="sd">    * PDU length (1)</span>
<span class="sd">    * Presentation data value Item(s) (1 or more)</span>

<span class="sd">    **Encoding**</span>

<span class="sd">    When encoded, a P-DATA-TF PDU has the following structure, taken</span>
<span class="sd">    from Table 9-22 [1]_ (offsets shown with Python indexing). PDUs are always</span>
<span class="sd">    encoded using Big Endian [2]_.</span>

<span class="sd">    +--------+-------------+-------------------------------+</span>
<span class="sd">    | Offset | Length      | Description                   |</span>
<span class="sd">    +========+=============+===============================+</span>
<span class="sd">    | 0      | 1           | PDU type                      |</span>
<span class="sd">    +--------+-------------+-------------------------------+</span>
<span class="sd">    | 1      | 1           | Reserved                      |</span>
<span class="sd">    +--------+-------------+-------------------------------+</span>
<span class="sd">    | 2      | 4           | PDU length                    |</span>
<span class="sd">    +--------+-------------+-------------------------------+</span>
<span class="sd">    | 6      | Variable    | Presentation data value items |</span>
<span class="sd">    +--------+-------------+-------------------------------+</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    .. [1] DICOM Standard, Part 8, Section</span>
<span class="sd">       `9.3.5 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part08.html#sect_9.3.5&gt;`_</span>
<span class="sd">    .. [2] DICOM Standard, Part 8, Section</span>
<span class="sd">       `9.3.1 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part08.html#sect_9.3.1&gt;`_</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="P_DATA_TF.__init__"><a class="viewcode-back" href="../../reference/generated/pynetdicom.pdu.P_DATA_TF.html#pynetdicom.pdu.P_DATA_TF.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialise a new P-DATA-TF PDU.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value_items</span> <span class="o">=</span> <span class="p">[]</span></div>

    <span class="k">def</span> <span class="nf">from_primitive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primitive</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Setup the current PDU using a P-DATA primitive.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : pdu_primitives.P_DATA</span>
<span class="sd">            The primitive to use to set the current PDU field values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">primitive</span><span class="o">.</span><span class="n">presentation_data_value_list</span><span class="p">:</span>
            <span class="n">presentation_data_value</span> <span class="o">=</span> <span class="n">PresentationDataValueItem</span><span class="p">()</span>
            <span class="n">presentation_data_value</span><span class="o">.</span><span class="n">presentation_context_id</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">presentation_data_value</span><span class="o">.</span><span class="n">presentation_data_value</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">presentation_data_value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_primitive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a P-DATA primitive from the current PDU.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pdu_primitives.P_DATA</span>
<span class="sd">            The primitive representation of the current PDU.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pynetdicom.pdu_primitives</span> <span class="kn">import</span> <span class="n">P_DATA</span>

        <span class="n">primitive</span> <span class="o">=</span> <span class="n">P_DATA</span><span class="p">()</span>

        <span class="n">primitive</span><span class="o">.</span><span class="n">presentation_data_value_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value_items</span><span class="p">:</span>
            <span class="n">primitive</span><span class="o">.</span><span class="n">presentation_data_value_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">presentation_context_id</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">presentation_data_value</span><span class="p">]</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">primitive</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_decoders</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return an iterable of tuples that contain field decoders.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list of tuple</span>
<span class="sd">            A list of ((offset, length), attr_name, callable, [args]), where</span>

<span class="sd">            - offset is the byte offset to start at</span>
<span class="sd">            - length is how many bytes to slice (if None then will slice to the</span>
<span class="sd">              end of the data),</span>
<span class="sd">            - attr_name is the name of the attribute corresponding to the field</span>
<span class="sd">            - callable is a decoding function that returns the decoded value,</span>
<span class="sd">            - args is a list of arguments to pass callable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
             <span class="s1">&#39;presentation_data_value_items&#39;</span><span class="p">,</span>
             <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_generate_items</span><span class="p">,</span>
             <span class="p">[])</span>
        <span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_encoders</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return an iterable of tuples that contain field decoders.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list of tuple</span>
<span class="sd">            A list of (attr_name, callable, [args]), where</span>

<span class="sd">            - attr_name is the name of the attribute corresponding to the field</span>
<span class="sd">            - callable is an encoding function that returns bytes</span>
<span class="sd">            - args is a list of arguments to pass callable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="p">(</span><span class="s1">&#39;pdu_type&#39;</span><span class="p">,</span> <span class="n">PACK_UCHAR</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">PACK_UCHAR</span><span class="p">]),</span>
            <span class="p">(</span><span class="s1">&#39;pdu_length&#39;</span><span class="p">,</span> <span class="n">PACK_UINT4</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="p">(</span><span class="s1">&#39;presentation_data_value_items&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_encode_items</span><span class="p">,</span> <span class="p">[])</span>
        <span class="p">]</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_generate_items</span><span class="p">(</span><span class="n">bytestream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Yield the variable PDV item data from `bytestream`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bytestream : bytes</span>
<span class="sd">            The encoded PDU variable item data.</span>

<span class="sd">        Yields</span>
<span class="sd">        ------</span>
<span class="sd">        int, bytes</span>
<span class="sd">            The PDV&#39;s Presentation Context ID as int, and the PDV item&#39;s</span>
<span class="sd">            encoded data as bytes.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        **Encoding**</span>
<span class="sd">        When encoded, a Presentation Data Value Item has the following</span>
<span class="sd">        structure, taken from Table 9-23 [1]_ (offset shown with Python</span>
<span class="sd">        indexing). The item is encoded using Big Endian, but the encoding of</span>
<span class="sd">        of the presentation data message fragments is dependent on the</span>
<span class="sd">        negotiated transfer syntax [2]_.</span>

<span class="sd">        +--------+-------------+-------------------------+</span>
<span class="sd">        | Offset | Length      | Description             |</span>
<span class="sd">        +========+=============+=========================+</span>
<span class="sd">        | 0      | 4           | Item length             |</span>
<span class="sd">        +--------+-------------+-------------------------+</span>
<span class="sd">        | 4      | 1           | Context ID              |</span>
<span class="sd">        +--------+-------------+-------------------------+</span>
<span class="sd">        | 5      | NN          | Presentation data value |</span>
<span class="sd">        +--------+-------------+-------------------------+</span>

<span class="sd">        References</span>
<span class="sd">        ----------</span>
<span class="sd">        .. [1] DICOM Standard, Part 8, Section</span>
<span class="sd">           `9.3.5.1 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part08.html#sect_9.3.5.1&gt;`_</span>
<span class="sd">        .. [2] DICOM Standard, Part 8, Section</span>
<span class="sd">           `9.3.1 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part08.html#sect_9.3.1&gt;`_</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">bytestream</span><span class="p">[</span><span class="n">offset</span><span class="p">:</span><span class="n">offset</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]:</span>
            <span class="n">item_length</span> <span class="o">=</span> <span class="n">UNPACK_UINT4</span><span class="p">(</span><span class="n">bytestream</span><span class="p">[</span><span class="n">offset</span><span class="p">:</span><span class="n">offset</span> <span class="o">+</span> <span class="mi">4</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">context_id</span> <span class="o">=</span> <span class="n">UNPACK_UCHAR</span><span class="p">(</span><span class="n">bytestream</span><span class="p">[</span><span class="n">offset</span> <span class="o">+</span> <span class="mi">4</span><span class="p">:</span><span class="n">offset</span> <span class="o">+</span> <span class="mi">5</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">bytestream</span><span class="p">[</span><span class="n">offset</span> <span class="o">+</span> <span class="mi">5</span><span class="p">:</span><span class="n">offset</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">+</span> <span class="n">item_length</span><span class="p">]</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="n">item_length</span> <span class="o">-</span> <span class="mi">1</span>
            <span class="k">yield</span> <span class="n">context_id</span><span class="p">,</span> <span class="n">data</span>
            <span class="c1"># Change `offset` to the start of the next PDV item</span>
            <span class="n">offset</span> <span class="o">+=</span> <span class="mi">4</span> <span class="o">+</span> <span class="n">item_length</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pdu_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the *PDU Length* field value as an int.&quot;&quot;&quot;</span>
        <span class="n">length</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value_items</span><span class="p">:</span>
            <span class="n">length</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">length</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a string representation of the PDU.&quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;P-DATA-TF PDU</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;=============</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  PDU type: 0x</span><span class="si">{0:02x}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  PDU length: </span><span class="si">{0:d}</span><span class="s1"> bytes</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  Presentation Data Value Item(s):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  --------------------------------</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value_items</span><span class="p">:</span>
            <span class="n">item_str</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ii</span><span class="p">)</span>
            <span class="n">item_str_list</span> <span class="o">=</span> <span class="n">item_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  *  </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">item_str_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">jj</span> <span class="ow">in</span> <span class="n">item_str_list</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;     </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">jj</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">s</span>

    <span class="k">def</span> <span class="nf">_wrap_generate_items</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytestream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a list of PDV Items generated from `bytestream`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bytestream : bytes</span>
<span class="sd">            The encoded presentation data value items.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list of pdu_items.PresentationDataValueItem</span>
<span class="sd">            The presentation data value items contained in `bytestream`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">item_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">context_id</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_items</span><span class="p">(</span><span class="n">bytestream</span><span class="p">):</span>
            <span class="n">pdv_item</span> <span class="o">=</span> <span class="n">PresentationDataValueItem</span><span class="p">()</span>
            <span class="n">pdv_item</span><span class="o">.</span><span class="n">presentation_context_id</span> <span class="o">=</span> <span class="n">context_id</span>
            <span class="n">pdv_item</span><span class="o">.</span><span class="n">presentation_data_value</span> <span class="o">=</span> <span class="n">data</span>
            <span class="n">item_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pdv_item</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">item_list</span></div>


<div class="viewcode-block" id="A_RELEASE_RQ"><a class="viewcode-back" href="../../reference/generated/pynetdicom.pdu.A_RELEASE_RQ.html#pynetdicom.pdu.A_RELEASE_RQ">[docs]</a><span class="k">class</span> <span class="nc">A_RELEASE_RQ</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An A-RELEASE-RQ PDU.</span>

<span class="sd">    An A-RELEASE-RQ PDU is used once an association has been established to</span>
<span class="sd">    initiate the release of the association.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    pdu_length : int</span>
<span class="sd">        The number of bytes from the first byte following the *PDU Length*</span>
<span class="sd">        field to the last byte of the PDU.</span>
<span class="sd">    pdu_type : int</span>
<span class="sd">        The *PDU Type* field value (0x05).</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    An A-RELEASE-RQ PDU requires the following parameters:</span>

<span class="sd">    * PDU type (1, fixed value, 0x05)</span>
<span class="sd">    * PDU length (1, fixed value, 4)</span>

<span class="sd">    **Encoding**</span>

<span class="sd">    When encoded, an A-RELEASE-RQ PDU has the following structure, taken</span>
<span class="sd">    from Table 9-24 [1]_ (offsets shown with Python indexing). PDUs are always</span>
<span class="sd">    encoded using Big Endian [2]_.</span>

<span class="sd">    +--------+-------------+---------------+</span>
<span class="sd">    | Offset | Length      | Description   |</span>
<span class="sd">    +========+=============+===============+</span>
<span class="sd">    | 0      | 1           | PDU type      |</span>
<span class="sd">    +--------+-------------+---------------+</span>
<span class="sd">    | 1      | 1           | Reserved      |</span>
<span class="sd">    +--------+-------------+---------------+</span>
<span class="sd">    | 2      | 4           | PDU length    |</span>
<span class="sd">    +--------+-------------+---------------+</span>
<span class="sd">    | 6      | 4           | Reserved      |</span>
<span class="sd">    +--------+-------------+---------------+</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    .. [1] DICOM Standard, Part 8, Section</span>
<span class="sd">       `9.3.6 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part08.html#sect_9.3.6&gt;`_</span>
<span class="sd">    .. [2] DICOM Standard, Part 8, Section</span>
<span class="sd">       `9.3.1 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part08.html#sect_9.3.1&gt;`_</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="A_RELEASE_RQ.__init__"><a class="viewcode-back" href="../../reference/generated/pynetdicom.pdu.A_RELEASE_RQ.html#pynetdicom.pdu.A_RELEASE_RQ.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialise a new A-RELEASE-RQ PDU.&quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">from_primitive</span><span class="p">(</span><span class="n">primitive</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Setup the current PDU using an A-RELEASE (request) primitive.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : pdu_primitives.A_RELEASE</span>
<span class="sd">            The primitive to use to set the current PDU field values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">to_primitive</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Return an A-RELEASE (request) primitive from the current PDU.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pdu_primitives.A_RELEASE</span>
<span class="sd">            The primitive representation of the current PDU.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pynetdicom.pdu_primitives</span> <span class="kn">import</span> <span class="n">A_RELEASE</span>

        <span class="k">return</span> <span class="n">A_RELEASE</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_decoders</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return an iterable of tuples that contain field decoders.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list of tuple</span>
<span class="sd">            A list of ((offset, length), attr_name, callable, [args]), where</span>

<span class="sd">            - offset is the byte offset to start at</span>
<span class="sd">            - length is how many bytes to slice (if None then will slice to the</span>
<span class="sd">              end of the data),</span>
<span class="sd">            - attr_name is the name of the attribute corresponding to the field</span>
<span class="sd">            - callable is a decoding function that returns the decoded value,</span>
<span class="sd">            - args is a list of arguments to pass callable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_encoders</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return an iterable of tuples that contain field decoders.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list of tuple</span>
<span class="sd">            A list of (attr_name, callable, [args]), where</span>

<span class="sd">            - attr_name is the name of the attribute corresponding to the field</span>
<span class="sd">            - callable is an encoding function that returns bytes</span>
<span class="sd">            - args is a list of arguments to pass callable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="p">(</span><span class="s1">&#39;pdu_type&#39;</span><span class="p">,</span> <span class="n">PACK_UCHAR</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">PACK_UCHAR</span><span class="p">]),</span>
            <span class="p">(</span><span class="s1">&#39;pdu_length&#39;</span><span class="p">,</span> <span class="n">PACK_UINT4</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">PACK_UINT4</span><span class="p">])</span>
        <span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pdu_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the *PDU Length* field value as an int.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">4</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a string representation of the PDU.&quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;A-RELEASE-RQ PDU</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;================</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  PDU type: 0x</span><span class="si">{0:02x}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  PDU length: </span><span class="si">{0:d}</span><span class="s1"> bytes</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">s</span></div>


<div class="viewcode-block" id="A_RELEASE_RP"><a class="viewcode-back" href="../../reference/generated/pynetdicom.pdu.A_RELEASE_RP.html#pynetdicom.pdu.A_RELEASE_RP">[docs]</a><span class="k">class</span> <span class="nc">A_RELEASE_RP</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An A-RELEASE-RP PDU.</span>

<span class="sd">    An A-RELEASE-RP PDU is used once an association has been established to</span>
<span class="sd">    confirm the release of the association.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    pdu_length : int</span>
<span class="sd">        The number of bytes from the first byte following the *PDU Length*</span>
<span class="sd">        field to the last byte of the PDU.</span>
<span class="sd">    pdu_type : int</span>
<span class="sd">        The *PDU Type* field value (0x06).</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    An A-RELEASE-RP PDU requires the following parameters:</span>

<span class="sd">    * PDU type (1, fixed value, 0x06)</span>
<span class="sd">    * PDU length (1, fixed value, 0x00000004)</span>

<span class="sd">    **Encoding**</span>

<span class="sd">    When encoded, an A-RELEASE-RP PDU has the following structure, taken</span>
<span class="sd">    from Table 9-25 [1]_ (offsets shown with Python indexing). PDUs are always</span>
<span class="sd">    encoded using Big Endian [2]_.</span>

<span class="sd">    +--------+-------------+---------------+</span>
<span class="sd">    | Offset | Length      | Description   |</span>
<span class="sd">    +========+=============+===============+</span>
<span class="sd">    | 0      | 1           | PDU type      |</span>
<span class="sd">    +--------+-------------+---------------+</span>
<span class="sd">    | 1      | 1           | Reserved      |</span>
<span class="sd">    +--------+-------------+---------------+</span>
<span class="sd">    | 2      | 4           | PDU length    |</span>
<span class="sd">    +--------+-------------+---------------+</span>
<span class="sd">    | 6      | 4           | Reserved      |</span>
<span class="sd">    +--------+-------------+---------------+</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    .. [1] DICOM Standard, Part 8, Section</span>
<span class="sd">       `9.3.7 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part08.html#sect_9.3.7&gt;`_</span>
<span class="sd">    .. [2] DICOM Standard, Part 8, Section</span>
<span class="sd">       `9.3.1 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part08.html#sect_9.3.1&gt;`_</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="A_RELEASE_RP.__init__"><a class="viewcode-back" href="../../reference/generated/pynetdicom.pdu.A_RELEASE_RP.html#pynetdicom.pdu.A_RELEASE_RP.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialise a new A-RELEASE-RP PDU.&quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">from_primitive</span><span class="p">(</span><span class="n">primitive</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Setup the current PDU using an A-release (response) primitive.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : pdu_primitives.A_RELEASE</span>
<span class="sd">            The primitive to use to set the current PDU field values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">to_primitive</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Return an A-RELEASE (response) primitive from the current PDU.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pdu_primitives.A_RELEASE</span>
<span class="sd">            The primitive representation of the current PDU.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pynetdicom.pdu_primitives</span> <span class="kn">import</span> <span class="n">A_RELEASE</span>

        <span class="n">primitive</span> <span class="o">=</span> <span class="n">A_RELEASE</span><span class="p">()</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="s1">&#39;affirmative&#39;</span>

        <span class="k">return</span> <span class="n">primitive</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_decoders</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return an iterable of tuples that contain field decoders.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list of tuple</span>
<span class="sd">            A list of ((offset, length), attr_name, callable, [args]), where</span>

<span class="sd">            - offset is the byte offset to start at</span>
<span class="sd">            - length is how many bytes to slice (if None then will slice to the</span>
<span class="sd">              end of the data),</span>
<span class="sd">            - attr_name is the name of the attribute corresponding to the field</span>
<span class="sd">            - callable is a decoding function that returns the decoded value,</span>
<span class="sd">            - args is a list of arguments to pass callable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_encoders</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return an iterable of tuples that contain field decoders.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list of tuple</span>
<span class="sd">            A list of (attr_name, callable, [args]), where</span>

<span class="sd">            - attr_name is the name of the attribute corresponding to the field</span>
<span class="sd">            - callable is an encoding function that returns bytes</span>
<span class="sd">            - args is a list of arguments to pass callable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="p">(</span><span class="s1">&#39;pdu_type&#39;</span><span class="p">,</span> <span class="n">PACK_UCHAR</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">PACK_UCHAR</span><span class="p">]),</span>
            <span class="p">(</span><span class="s1">&#39;pdu_length&#39;</span><span class="p">,</span> <span class="n">PACK_UINT4</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">PACK_UINT4</span><span class="p">])</span>
        <span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pdu_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the *PDU Length* field value as an int.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">4</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a string representation of the PDU.&quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;A-RELEASE-RP PDU</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;================</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  PDU type: 0x</span><span class="si">{0:02x}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  PDU length: </span><span class="si">{0:d}</span><span class="s1"> bytes</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">s</span></div>


<div class="viewcode-block" id="A_ABORT_RQ"><a class="viewcode-back" href="../../reference/generated/pynetdicom.pdu.A_ABORT_RQ.html#pynetdicom.pdu.A_ABORT_RQ">[docs]</a><span class="k">class</span> <span class="nc">A_ABORT_RQ</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An A-ABORT-RQ PDU.</span>

<span class="sd">    An A-ABORT-RQ PDU is used to abort the association.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    pdu_length : int</span>
<span class="sd">        The number of bytes from the first byte following the *PDU Length*</span>
<span class="sd">        field to the last byte of the PDU.</span>
<span class="sd">    pdu_type : int</span>
<span class="sd">        The *PDU Type* field value (0x07).</span>
<span class="sd">    reason_diagnostic : int</span>
<span class="sd">        The *Reason/Diagnostic* field value.</span>
<span class="sd">    source : int</span>
<span class="sd">        The *Source* field value.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    An A-ABORT-RQ PDU requires the following parameters:</span>

<span class="sd">    * PDU type (1, fixed value, 0x06)</span>
<span class="sd">    * PDU length (1, fixed value, 4)</span>
<span class="sd">    * Source (1)</span>
<span class="sd">    * Reason/Diagnostic (1)</span>

<span class="sd">    **Encoding**</span>

<span class="sd">    When encoded, an A-ABORT-RQ PDU has the following structure, taken</span>
<span class="sd">    from Table 9-26 [1]_ (offsets shown with Python indexing). PDUs are always</span>
<span class="sd">    encoded using Big Endian [2]_.</span>

<span class="sd">    +--------+-------------+-------------------+</span>
<span class="sd">    | Offset | Length      | Description       |</span>
<span class="sd">    +========+=============+===================+</span>
<span class="sd">    | 0      | 1           | PDU type          |</span>
<span class="sd">    +--------+-------------+-------------------+</span>
<span class="sd">    | 1      | 1           | Reserved          |</span>
<span class="sd">    +--------+-------------+-------------------+</span>
<span class="sd">    | 2      | 4           | PDU length        |</span>
<span class="sd">    +--------+-------------+-------------------+</span>
<span class="sd">    | 6      | 1           | Reserved          |</span>
<span class="sd">    +--------+-------------+-------------------+</span>
<span class="sd">    | 7      | 1           | Reserved          |</span>
<span class="sd">    +--------+-------------+-------------------+</span>
<span class="sd">    | 8      | 1           | Source            |</span>
<span class="sd">    +--------+-------------+-------------------+</span>
<span class="sd">    | 9      | 1           | Reason/Diagnostic |</span>
<span class="sd">    +--------+-------------+-------------------+</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    .. [1] DICOM Standard, Part 8, Section</span>
<span class="sd">       `9.3.8 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part08.html#sect_9.3.8&gt;`_</span>
<span class="sd">    .. [2] DICOM Standard, Part 8, Section</span>
<span class="sd">       `9.3.1 &lt;http://dicom.nema.org/medical/dicom/current/output/html/part08.html#sect_9.3.1&gt;`_</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="A_ABORT_RQ.__init__"><a class="viewcode-back" href="../../reference/generated/pynetdicom.pdu.A_ABORT_RQ.html#pynetdicom.pdu.A_ABORT_RQ.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialise a new A-ABORT-RQ PDU.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reason_diagnostic</span> <span class="o">=</span> <span class="kc">None</span></div>

    <span class="k">def</span> <span class="nf">from_primitive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primitive</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Setup the current PDU using an A-ABORT or A-P-ABORT primitive.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : pdu_primitives.A_ABORT or pdu_primitives.A_P_ABORT</span>
<span class="sd">            The primitive to use to set the current PDU field values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pynetdicom.pdu_primitives</span> <span class="kn">import</span> <span class="n">A_ABORT</span><span class="p">,</span> <span class="n">A_P_ABORT</span>

        <span class="c1"># User initiated abort</span>
        <span class="k">if</span> <span class="n">primitive</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">==</span> <span class="n">A_ABORT</span><span class="p">:</span>
            <span class="c1"># The reason field shall be 0x00 when the source is DUL</span>
            <span class="c1"># service-user</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reason_diagnostic</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">abort_source</span>

        <span class="c1"># User provider primitive abort</span>
        <span class="k">elif</span> <span class="n">primitive</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">==</span> <span class="n">A_P_ABORT</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reason_diagnostic</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">provider_reason</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="mi">2</span>

    <span class="k">def</span> <span class="nf">to_primitive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return an A-ABORT or A-P-ABORT primitive from the current PDU.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pdu_primitives.A_ABORT or pdu_primitives.A_P_ABORT</span>
<span class="sd">            The primitive representation of the current PDU.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pynetdicom.pdu_primitives</span> <span class="kn">import</span> <span class="n">A_ABORT</span><span class="p">,</span> <span class="n">A_P_ABORT</span>

        <span class="c1"># User initiated abort</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">==</span> <span class="mh">0x00</span><span class="p">:</span>
            <span class="n">primitive</span> <span class="o">=</span> <span class="n">A_ABORT</span><span class="p">()</span>
            <span class="n">primitive</span><span class="o">.</span><span class="n">abort_source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span>

        <span class="c1"># User provider primitive abort</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">==</span> <span class="mh">0x02</span><span class="p">:</span>
            <span class="n">primitive</span> <span class="o">=</span> <span class="n">A_P_ABORT</span><span class="p">()</span>
            <span class="n">primitive</span><span class="o">.</span><span class="n">provider_reason</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reason_diagnostic</span>

        <span class="k">return</span> <span class="n">primitive</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_decoders</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return an iterable of tuples that contain field decoders.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list of tuple</span>
<span class="sd">            A list of ((offset, length), attr_name, callable, [args]), where</span>

<span class="sd">            - offset is the byte offset to start at</span>
<span class="sd">            - length is how many bytes to slice (if None then will slice to the</span>
<span class="sd">              end of the data),</span>
<span class="sd">            - attr_name is the name of the attribute corresponding to the field</span>
<span class="sd">            - callable is a decoding function that returns the decoded value,</span>
<span class="sd">            - args is a list of arguments to pass callable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="p">((</span><span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s1">&#39;source&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_unpack</span><span class="p">,</span> <span class="p">[</span><span class="n">UNPACK_UCHAR</span><span class="p">]),</span>
            <span class="p">((</span><span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s1">&#39;reason_diagnostic&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_unpack</span><span class="p">,</span> <span class="p">[</span><span class="n">UNPACK_UCHAR</span><span class="p">])</span>
        <span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_encoders</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return an iterable of tuples that contain field decoders.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list of tuple</span>
<span class="sd">            A list of (attr_name, callable, [args]), where</span>

<span class="sd">            - attr_name is the name of the attribute corresponding to the field</span>
<span class="sd">            - callable is an encoding function that returns bytes</span>
<span class="sd">            - args is a list of arguments to pass callable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="p">(</span><span class="s1">&#39;pdu_type&#39;</span><span class="p">,</span> <span class="n">PACK_UCHAR</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">PACK_UCHAR</span><span class="p">]),</span>
            <span class="p">(</span><span class="s1">&#39;pdu_length&#39;</span><span class="p">,</span> <span class="n">PACK_UINT4</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">PACK_UCHAR</span><span class="p">]),</span>
            <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_pack</span><span class="p">,</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">PACK_UCHAR</span><span class="p">]),</span>
            <span class="p">(</span><span class="s1">&#39;source&#39;</span><span class="p">,</span> <span class="n">PACK_UCHAR</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="p">(</span><span class="s1">&#39;reason_diagnostic&#39;</span><span class="p">,</span> <span class="n">PACK_UCHAR</span><span class="p">,</span> <span class="p">[]),</span>
        <span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pdu_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the *PDU Length* field value as an int.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">4</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a string representation of the PDU.&quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;A-ABORT PDU</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;===========</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  PDU type: 0x</span><span class="si">{0:02x}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  PDU length: </span><span class="si">{0:d}</span><span class="s2"> bytes</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Abort Source: </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source_str</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Reason/Diagnostic: </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reason_str</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">s</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">source_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a str description of the *Source* field value.&quot;&quot;&quot;</span>
        <span class="n">_sources</span> <span class="o">=</span> <span class="p">{</span>
            <span class="mi">0</span> <span class="p">:</span> <span class="s1">&#39;DUL service-user&#39;</span><span class="p">,</span>
            <span class="mi">1</span> <span class="p">:</span> <span class="s1">&#39;Reserved&#39;</span><span class="p">,</span>
            <span class="mi">2</span> <span class="p">:</span> <span class="s1">&#39;DUL service-provider&#39;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">_sources</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">reason_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a str description of the *Reason/Diagnostic* field value.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">_reason_str</span> <span class="o">=</span> <span class="p">{</span>
                <span class="mi">0</span> <span class="p">:</span> <span class="s2">&quot;No reason given&quot;</span><span class="p">,</span>
                <span class="mi">1</span> <span class="p">:</span> <span class="s2">&quot;Unrecognised PDU&quot;</span><span class="p">,</span>
                <span class="mi">2</span> <span class="p">:</span> <span class="s2">&quot;Unexpected PDU&quot;</span><span class="p">,</span>
                <span class="mi">3</span> <span class="p">:</span> <span class="s2">&quot;Reserved&quot;</span><span class="p">,</span>
                <span class="mi">4</span> <span class="p">:</span> <span class="s2">&quot;Unrecognised PDU parameter&quot;</span><span class="p">,</span>
                <span class="mi">5</span> <span class="p">:</span> <span class="s2">&quot;Unexpected PDU parameter&quot;</span><span class="p">,</span>
                <span class="mi">6</span> <span class="p">:</span> <span class="s2">&quot;Invalid PDU parameter value&quot;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="n">_reason_str</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">reason_diagnostic</span><span class="p">]</span>

        <span class="k">return</span> <span class="s1">&#39;No reason given&#39;</span></div>


<span class="c1"># PDUs indexed by their type</span>
<span class="n">PDU_TYPES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="mh">0x01</span> <span class="p">:</span> <span class="n">A_ASSOCIATE_RQ</span><span class="p">,</span>
    <span class="mh">0x02</span> <span class="p">:</span> <span class="n">A_ASSOCIATE_AC</span><span class="p">,</span>
    <span class="mh">0x03</span> <span class="p">:</span> <span class="n">A_ASSOCIATE_RJ</span><span class="p">,</span>
    <span class="mh">0x04</span> <span class="p">:</span> <span class="n">P_DATA_TF</span><span class="p">,</span>
    <span class="mh">0x05</span> <span class="p">:</span> <span class="n">A_RELEASE_RQ</span><span class="p">,</span>
    <span class="mh">0x06</span> <span class="p">:</span> <span class="n">A_RELEASE_RP</span><span class="p">,</span>
    <span class="mh">0x07</span> <span class="p">:</span> <span class="n">A_ABORT_RQ</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018-19, pynetdicom contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>